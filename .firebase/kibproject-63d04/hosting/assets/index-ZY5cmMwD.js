var M1=Object.defineProperty;var P1=(n,e,t)=>e in n?M1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var de=(n,e,t)=>P1(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function j1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pg={exports:{}},au={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function L1(){if(Qw)return au;Qw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:o}}return au.Fragment=e,au.jsx=t,au.jsxs=t,au}var $w;function V1(){return $w||($w=1,Pg.exports=L1()),Pg.exports}var g=V1(),jg={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function U1(){if(Kw)return Ie;Kw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function w(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,P={};function L(V,se,ye){this.props=V,this.context=se,this.refs=P,this.updater=ye||T}L.prototype.isReactComponent={},L.prototype.setState=function(V,se){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,se,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function z(){}z.prototype=L.prototype;function Y(V,se,ye){this.props=V,this.context=se,this.refs=P,this.updater=ye||T}var Q=Y.prototype=new z;Q.constructor=Y,S(Q,L.prototype),Q.isPureReactComponent=!0;var te=Array.isArray,re={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function k(V,se,ye,ue,he,De){return ye=De.ref,{$$typeof:n,type:V,key:se,ref:ye!==void 0?ye:null,props:De}}function C(V,se){return k(V.type,se,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function I(V){var se={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ye){return se[ye]})}var j=/\/+/g;function q(V,se){return typeof V=="object"&&V!==null&&V.key!=null?I(""+V.key):se.toString(36)}function O(){}function rt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(O,O):(V.status="pending",V.then(function(se){V.status==="pending"&&(V.status="fulfilled",V.value=se)},function(se){V.status==="pending"&&(V.status="rejected",V.reason=se)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function bt(V,se,ye,ue,he){var De=typeof V;(De==="undefined"||De==="boolean")&&(V=null);var Re=!1;if(V===null)Re=!0;else switch(De){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(V.$$typeof){case n:case e:Re=!0;break;case v:return Re=V._init,bt(Re(V._payload),se,ye,ue,he)}}if(Re)return he=he(V),Re=ue===""?"."+q(V,0):ue,te(he)?(ye="",Re!=null&&(ye=Re.replace(j,"$&/")+"/"),bt(he,se,ye,"",function(xt){return xt})):he!=null&&(R(he)&&(he=C(he,ye+(he.key==null||V&&V.key===he.key?"":(""+he.key).replace(j,"$&/")+"/")+Re)),se.push(he)),1;Re=0;var jt=ue===""?".":ue+":";if(te(V))for(var Ye=0;Ye<V.length;Ye++)ue=V[Ye],De=jt+q(ue,Ye),Re+=bt(ue,se,ye,De,he);else if(Ye=w(V),typeof Ye=="function")for(V=Ye.call(V),Ye=0;!(ue=V.next()).done;)ue=ue.value,De=jt+q(ue,Ye++),Re+=bt(ue,se,ye,De,he);else if(De==="object"){if(typeof V.then=="function")return bt(rt(V),se,ye,ue,he);throw se=String(V),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Re}function le(V,se,ye){if(V==null)return V;var ue=[],he=0;return bt(V,ue,"","",function(De){return se.call(ye,De,he++)}),ue}function Ee(V){if(V._status===-1){var se=V._result;se=se(),se.then(function(ye){(V._status===0||V._status===-1)&&(V._status=1,V._result=ye)},function(ye){(V._status===0||V._status===-1)&&(V._status=2,V._result=ye)}),V._status===-1&&(V._status=0,V._result=se)}if(V._status===1)return V._result.default;throw V._result}var pe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Je(){}return Ie.Children={map:le,forEach:function(V,se,ye){le(V,function(){se.apply(this,arguments)},ye)},count:function(V){var se=0;return le(V,function(){se++}),se},toArray:function(V){return le(V,function(se){return se})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ie.Component=L,Ie.Fragment=t,Ie.Profiler=s,Ie.PureComponent=Y,Ie.StrictMode=i,Ie.Suspense=m,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,Ie.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ie.cache=function(V){return function(){return V.apply(null,arguments)}},Ie.cloneElement=function(V,se,ye){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ue=S({},V.props),he=V.key,De=void 0;if(se!=null)for(Re in se.ref!==void 0&&(De=void 0),se.key!==void 0&&(he=""+se.key),se)!ne.call(se,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&se.ref===void 0||(ue[Re]=se[Re]);var Re=arguments.length-2;if(Re===1)ue.children=ye;else if(1<Re){for(var jt=Array(Re),Ye=0;Ye<Re;Ye++)jt[Ye]=arguments[Ye+2];ue.children=jt}return k(V.type,he,void 0,void 0,De,ue)},Ie.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Ie.createElement=function(V,se,ye){var ue,he={},De=null;if(se!=null)for(ue in se.key!==void 0&&(De=""+se.key),se)ne.call(se,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(he[ue]=se[ue]);var Re=arguments.length-2;if(Re===1)he.children=ye;else if(1<Re){for(var jt=Array(Re),Ye=0;Ye<Re;Ye++)jt[Ye]=arguments[Ye+2];he.children=jt}if(V&&V.defaultProps)for(ue in Re=V.defaultProps,Re)he[ue]===void 0&&(he[ue]=Re[ue]);return k(V,De,void 0,void 0,null,he)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(V){return{$$typeof:d,render:V}},Ie.isValidElement=R,Ie.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:Ee}},Ie.memo=function(V,se){return{$$typeof:p,type:V,compare:se===void 0?null:se}},Ie.startTransition=function(V){var se=re.T,ye={};re.T=ye;try{var ue=V(),he=re.S;he!==null&&he(ye,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Je,pe)}catch(De){pe(De)}finally{re.T=se}},Ie.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},Ie.use=function(V){return re.H.use(V)},Ie.useActionState=function(V,se,ye){return re.H.useActionState(V,se,ye)},Ie.useCallback=function(V,se){return re.H.useCallback(V,se)},Ie.useContext=function(V){return re.H.useContext(V)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(V,se){return re.H.useDeferredValue(V,se)},Ie.useEffect=function(V,se){return re.H.useEffect(V,se)},Ie.useId=function(){return re.H.useId()},Ie.useImperativeHandle=function(V,se,ye){return re.H.useImperativeHandle(V,se,ye)},Ie.useInsertionEffect=function(V,se){return re.H.useInsertionEffect(V,se)},Ie.useLayoutEffect=function(V,se){return re.H.useLayoutEffect(V,se)},Ie.useMemo=function(V,se){return re.H.useMemo(V,se)},Ie.useOptimistic=function(V,se){return re.H.useOptimistic(V,se)},Ie.useReducer=function(V,se,ye){return re.H.useReducer(V,se,ye)},Ie.useRef=function(V){return re.H.useRef(V)},Ie.useState=function(V){return re.H.useState(V)},Ie.useSyncExternalStore=function(V,se,ye){return re.H.useSyncExternalStore(V,se,ye)},Ie.useTransition=function(){return re.H.useTransition()},Ie.version="19.0.0",Ie}var Xw;function e_(){return Xw||(Xw=1,jg.exports=U1()),jg.exports}var M=e_();const Zw=j1(M);var Lg={exports:{}},ou={},Vg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function F1(){return Jw||(Jw=1,function(n){function e(le,Ee){var pe=le.length;le.push(Ee);e:for(;0<pe;){var Je=pe-1>>>1,V=le[Je];if(0<s(V,Ee))le[Je]=Ee,le[pe]=V,pe=Je;else break e}}function t(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var Ee=le[0],pe=le.pop();if(pe!==Ee){le[0]=pe;e:for(var Je=0,V=le.length,se=V>>>1;Je<se;){var ye=2*(Je+1)-1,ue=le[ye],he=ye+1,De=le[he];if(0>s(ue,pe))he<V&&0>s(De,ue)?(le[Je]=De,le[he]=pe,Je=he):(le[Je]=ue,le[ye]=pe,Je=ye);else if(he<V&&0>s(De,pe))le[Je]=De,le[he]=pe,Je=he;else break e}}return Ee}function s(le,Ee){var pe=le.sortIndex-Ee.sortIndex;return pe!==0?pe:le.id-Ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],p=[],v=1,E=null,w=3,T=!1,S=!1,P=!1,L=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function Q(le){for(var Ee=t(p);Ee!==null;){if(Ee.callback===null)i(p);else if(Ee.startTime<=le)i(p),Ee.sortIndex=Ee.expirationTime,e(m,Ee);else break;Ee=t(p)}}function te(le){if(P=!1,Q(le),!S)if(t(m)!==null)S=!0,rt();else{var Ee=t(p);Ee!==null&&bt(te,Ee.startTime-le)}}var re=!1,ne=-1,k=5,C=-1;function R(){return!(n.unstable_now()-C<k)}function I(){if(re){var le=n.unstable_now();C=le;var Ee=!0;try{e:{S=!1,P&&(P=!1,z(ne),ne=-1),T=!0;var pe=w;try{t:{for(Q(le),E=t(m);E!==null&&!(E.expirationTime>le&&R());){var Je=E.callback;if(typeof Je=="function"){E.callback=null,w=E.priorityLevel;var V=Je(E.expirationTime<=le);if(le=n.unstable_now(),typeof V=="function"){E.callback=V,Q(le),Ee=!0;break t}E===t(m)&&i(m),Q(le)}else i(m);E=t(m)}if(E!==null)Ee=!0;else{var se=t(p);se!==null&&bt(te,se.startTime-le),Ee=!1}}break e}finally{E=null,w=pe,T=!1}Ee=void 0}}finally{Ee?j():re=!1}}}var j;if(typeof Y=="function")j=function(){Y(I)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,O=q.port2;q.port1.onmessage=I,j=function(){O.postMessage(null)}}else j=function(){L(I,0)};function rt(){re||(re=!0,j())}function bt(le,Ee){ne=L(function(){le(n.unstable_now())},Ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){S||T||(S=!0,rt())},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(le){switch(w){case 1:case 2:case 3:var Ee=3;break;default:Ee=w}var pe=w;w=Ee;try{return le()}finally{w=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,Ee){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var pe=w;w=le;try{return Ee()}finally{w=pe}},n.unstable_scheduleCallback=function(le,Ee,pe){var Je=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Je+pe:Je):pe=Je,le){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=pe+V,le={id:v++,callback:Ee,priorityLevel:le,startTime:pe,expirationTime:V,sortIndex:-1},pe>Je?(le.sortIndex=pe,e(p,le),t(m)===null&&le===t(p)&&(P?(z(ne),ne=-1):P=!0,bt(te,pe-Je))):(le.sortIndex=V,e(m,le),S||T||(S=!0,rt())),le},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(le){var Ee=w;return function(){var pe=w;w=Ee;try{return le.apply(this,arguments)}finally{w=pe}}}}(Ug)),Ug}var eb;function q1(){return eb||(eb=1,Vg.exports=F1()),Vg.exports}var Fg={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function z1(){if(tb)return bn;tb=1;var n=e_();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,v)},bn.flushSync=function(m){var p=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=v,i.d.f()}},bn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},bn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},bn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:T}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:w,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},bn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},bn.requestFormReset=function(m){i.d.r(m)},bn.unstable_batchedUpdates=function(m,p){return m(p)},bn.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},bn.version="19.0.0",bn}var nb;function B1(){if(nb)return Fg.exports;nb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fg.exports=z1(),Fg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function H1(){if(ib)return ou;ib=1;var n=q1(),e=e_(),t=B1();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),te=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ne(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function C(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case m:return"Fragment";case d:return"Portal";case v:return"Profiler";case p:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case T:return(r.displayName||"Context")+".Provider";case w:return(r._context.displayName||"Context")+".Consumer";case S:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return a=r.displayName||null,a!==null?a:C(r.type)||"Memo";case Y:a=r._payload,r=r._init;try{return C(r(a))}catch{}}return null}var R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,j,q;function O(r){if(j===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);j=a&&a[1]||"",q=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+j+r+q}var rt=!1;function bt(r,a){if(!r||rt)return"";rt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(K){var W=K}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(K){W=K}r.call(ie.prototype)}}else{try{throw Error()}catch(K){W=K}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(K){if(K&&W&&typeof K.stack=="string")return[K.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),x=y[0],A=y[1];if(x&&A){var D=x.split(`
`),F=A.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===F.length)for(u=D.length-1,f=F.length-1;1<=u&&0<=f&&D[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==F[f]){var X=`
`+D[u].replace(" at new "," at ");return r.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",r.displayName)),X}while(1<=u&&0<=f);break}}}finally{rt=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?O(l):""}function le(r){switch(r.tag){case 26:case 27:case 5:return O(r.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return r=bt(r.type,!1),r;case 11:return r=bt(r.type.render,!1),r;case 1:return r=bt(r.type,!0),r;default:return""}}function Ee(r){try{var a="";do a+=le(r),r=r.return;while(r);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function pe(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function Je(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function V(r){if(pe(r)!==r)throw Error(i(188))}function se(r){var a=r.alternate;if(!a){if(a=pe(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,u=a;;){var f=l.return;if(f===null)break;var y=f.alternate;if(y===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===l)return V(f),r;if(y===u)return V(f),a;y=y.sibling}throw Error(i(188))}if(l.return!==u.return)l=f,u=y;else{for(var x=!1,A=f.child;A;){if(A===l){x=!0,l=f,u=y;break}if(A===u){x=!0,u=f,l=y;break}A=A.sibling}if(!x){for(A=y.child;A;){if(A===l){x=!0,l=y,u=f;break}if(A===u){x=!0,u=y,l=f;break}A=A.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function ye(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=ye(r),a!==null)return a;r=r.sibling}return null}var ue=Array.isArray,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},Re=[],jt=-1;function Ye(r){return{current:r}}function xt(r){0>jt||(r.current=Re[jt],Re[jt]=null,jt--)}function nt(r,a){jt++,Re[jt]=r.current,r.current=a}var Cn=Ye(null),dr=Ye(null),Jn=Ye(null),ss=Ye(null);function as(r,a){switch(nt(Jn,a),nt(dr,r),nt(Cn,null),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?xw(a):0;break;default:if(r=r===8?a.parentNode:a,a=r.tagName,r=r.namespaceURI)r=xw(r),a=Tw(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}xt(Cn),nt(Cn,a)}function fr(){xt(Cn),xt(dr),xt(Jn)}function tc(r){r.memoizedState!==null&&nt(ss,r);var a=Cn.current,l=Tw(a,r.type);a!==l&&(nt(dr,r),nt(Cn,l))}function wo(r){dr.current===r&&(xt(Cn),xt(dr)),ss.current===r&&(xt(ss),tu._currentValue=De)}var bo=Object.prototype.hasOwnProperty,_a=n.unstable_scheduleCallback,xo=n.unstable_cancelCallback,Lm=n.unstable_shouldYield,nc=n.unstable_requestPaint,Ln=n.unstable_now,wh=n.unstable_getCurrentPriorityLevel,Ht=n.unstable_ImmediatePriority,tn=n.unstable_UserBlockingPriority,mr=n.unstable_NormalPriority,bh=n.unstable_LowPriority,ic=n.unstable_IdlePriority,Vm=n.log,va=n.unstable_setDisableYieldValue,os=null,En=null;function rc(r){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(os,r,void 0,(r.current.flags&128)===128)}catch{}}function ji(r){if(typeof Vm=="function"&&va(r),En&&typeof En.setStrictMode=="function")try{En.setStrictMode(os,r)}catch{}}var Nn=Math.clz32?Math.clz32:Th,sc=Math.log,xh=Math.LN2;function Th(r){return r>>>=0,r===0?32:31-(sc(r)/xh|0)|0}var Li=128,ls=4194304;function xi(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ei(r,a){var l=r.pendingLanes;if(l===0)return 0;var u=0,f=r.suspendedLanes,y=r.pingedLanes,x=r.warmLanes;r=r.finishedLanes!==0;var A=l&134217727;return A!==0?(l=A&~f,l!==0?u=xi(l):(y&=A,y!==0?u=xi(y):r||(x=A&~x,x!==0&&(u=xi(x))))):(A=l&~f,A!==0?u=xi(A):y!==0?u=xi(y):r||(x=l&~x,x!==0&&(u=xi(x)))),u===0?0:a!==0&&a!==u&&(a&f)===0&&(f=u&-u,x=a&-a,f>=x||f===32&&(x&4194176)!==0)?a:u}function cs(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function To(r,a){switch(r){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ac(){var r=Li;return Li<<=1,(Li&4194176)===0&&(Li=128),r}function us(){var r=ls;return ls<<=1,(ls&62914560)===0&&(ls=4194304),r}function So(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function Dt(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Sh(r,a,l,u,f,y){var x=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var A=r.entanglements,D=r.expirationTimes,F=r.hiddenUpdates;for(l=x&~l;0<l;){var X=31-Nn(l),ie=1<<X;A[X]=0,D[X]=-1;var W=F[X];if(W!==null)for(F[X]=null,X=0;X<W.length;X++){var K=W[X];K!==null&&(K.lane&=-536870913)}l&=~ie}u!==0&&hs(r,u,0),y!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=y&~(x&~a))}function hs(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-Nn(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|l&4194218}function ds(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var u=31-Nn(l),f=1<<u;f&a|r[u]&a&&(r[u]|=a),l&=~f}}function Ah(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ch(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:zw(r.type))}function fs(r,a){var l=he.p;try{return he.p=r,a()}finally{he.p=l}}var Vi=Math.random().toString(36).slice(2),nn="__reactFiber$"+Vi,Gt="__reactProps$"+Vi,pr="__reactContainer$"+Vi,Ea="__reactEvents$"+Vi,Ao="__reactListeners$"+Vi,Ui="__reactHandles$"+Vi,oc="__reactResources$"+Vi,ms="__reactMarker$"+Vi;function wa(r){delete r[nn],delete r[Gt],delete r[Ea],delete r[Ao],delete r[Ui]}function Ti(r){var a=r[nn];if(a)return a;for(var l=r.parentNode;l;){if(a=l[pr]||l[nn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=Cw(r);r!==null;){if(l=r[nn])return l;r=Cw(r)}return a}r=l,l=r.parentNode}return null}function gr(r){if(r=r[nn]||r[pr]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function ps(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function gs(r){var a=r[oc];return a||(a=r[oc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yt(r){r[ms]=!0}var lc=new Set,Co={};function Gn(r,a){Vn(r,a),Vn(r+"Capture",a)}function Vn(r,a){for(Co[r]=a,r=0;r<a.length;r++)lc.add(a[r])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Um=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cc={},uc={};function Nh(r){return bo.call(uc,r)?!0:bo.call(cc,r)?!1:Um.test(r)?uc[r]=!0:(cc[r]=!0,!1)}function ys(r,a,l){if(Nh(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function _s(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function ti(r,a,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+u)}}function Rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Rh(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Fm(r){var a=Rh(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),u=""+r[a];if(!r.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,y=l.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return f.call(this)},set:function(x){u=""+x,y.call(this,x)}}),Object.defineProperty(r,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function ba(r){r._valueTracker||(r._valueTracker=Fm(r))}function hc(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return r&&(u=Rh(r)?r.checked?"true":"false":r.value),r=u,r!==l?(a.setValue(r),!0):!1}function No(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var yr=/[\n"\\]/g;function Tt(r){return r.replace(yr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vs(r,a,l,u,f,y,x,A){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),a!=null?x==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Rn(a)):r.value!==""+Rn(a)&&(r.value=""+Rn(a)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),a!=null?Ro(r,x,Rn(a)):l!=null?Ro(r,x,Rn(l)):u!=null&&r.removeAttribute("value"),f==null&&y!=null&&(r.defaultChecked=!!y),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Rn(A):r.removeAttribute("name")}function xa(r,a,l,u,f,y,x,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;l=l!=null?""+Rn(l):"",a=a!=null?""+Rn(a):l,A||a===r.value||(r.value=a),r.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=A?r.checked:!!u,r.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Ro(r,a,l){a==="number"&&No(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function We(r,a,l,u){if(r=r.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=a.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&u&&(r[l].defaultSelected=!0)}else{for(l=""+Rn(l),a=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}a!==null||r[f].disabled||(a=r[f])}a!==null&&(a.selected=!0)}}function Ta(r,a,l){if(a!=null&&(a=""+Rn(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+Rn(l):""}function Es(r,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(ue(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=Rn(a),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u)}function ni(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var qm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dc(r,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,l):typeof l!="number"||l===0||qm.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function Ih(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&l[f]!==u&&dc(r,f,u)}else for(var y in a)a.hasOwnProperty(y)&&dc(r,y,a[y])}function fc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(r){return Bm.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ii=null;function Io(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _r=null,vr=null;function Er(r){var a=gr(r);if(a&&(r=a.stateNode)){var l=r[Gt]||null;e:switch(r=a.stateNode,a.type){case"input":if(vs(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==r&&u.form===r.form){var f=u[Gt]||null;if(!f)throw Error(i(90));vs(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===r.form&&hc(u)}break e;case"textarea":Ta(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&We(r,!!l.multiple,a,!1)}}}var mc=!1;function Dh(r,a,l){if(mc)return r(a,l);mc=!0;try{var u=r(a);return u}finally{if(mc=!1,(_r!==null||vr!==null)&&(bd(),_r&&(a=_r,r=vr,vr=_r=null,Er(a),r)))for(a=0;a<r.length;a++)Er(r[a])}}function Sa(r,a){var l=r.stateNode;if(l===null)return null;var u=l[Gt]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var ri=!1;if(Yn)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){ri=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{ri=!1}var qi=null,ws=null,wr=null;function pc(){if(wr)return wr;var r,a=ws,l=a.length,u,f="value"in qi?qi.value:qi.textContent,y=f.length;for(r=0;r<l&&a[r]===f[r];r++);var x=l-r;for(u=1;u<=x&&a[l-u]===f[y-u];u++);return wr=f.slice(r,1<u?1-u:void 0)}function zi(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Bi(){return!0}function gc(){return!1}function rn(r){function a(l,u,f,y,x){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(l=r[A],this[A]=l?l(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Bi:gc,this.isPropagationStopped=gc,this}return I(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),a}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Do=rn(et),Ca=I({},et,{view:0,detail:0}),Oh=rn(Ca),Oo,ko,Hi,Na=I({},Ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Hi&&(Hi&&r.type==="mousemove"?(Oo=r.screenX-Hi.screenX,ko=r.screenY-Hi.screenY):ko=Oo=0,Hi=r),Oo)},movementY:function(r){return"movementY"in r?r.movementY:ko}}),si=rn(Na),kh=I({},Na,{dataTransfer:0}),Hm=rn(kh),Ra=I({},Ca,{relatedTarget:0}),Mo=rn(Ra),yc=I({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),Po=rn(yc),Mh=I({},et,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),jo=rn(Mh),Gm=I({},et,{data:0}),_c=rn(Gm),Ia={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ph={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vc(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=jh[r])?!!a[r]:!1}function Da(){return vc}var Lh=I({},Ca,{key:function(r){if(r.key){var a=Ia[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=zi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ph[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(r){return r.type==="keypress"?zi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?zi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Lo=rn(Lh),Vh=I({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=rn(Vh),br=I({},Ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),Uh=rn(br),Fh=I({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),qh=rn(Fh),zh=I({},Na,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Vo=rn(zh),In=I({},et,{newState:0,oldState:0}),Bh=rn(In),Hh=[9,13,27,32],Gi=Yn&&"CompositionEvent"in window,h=null;Yn&&"documentMode"in document&&(h=document.documentMode);var _=Yn&&"TextEvent"in window&&!h,b=Yn&&(!Gi||h&&8<h&&11>=h),N=" ",H=!1;function $(r,a){switch(r){case"keyup":return Hh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ze=!1;function Yt(r,a){switch(r){case"compositionend":return oe(a);case"keypress":return a.which!==32?null:(H=!0,N);case"textInput":return r=a.data,r===N&&H?null:r;default:return null}}function Be(r,a){if(ze)return r==="compositionend"||!Gi&&$(r,a)?(r=pc(),wr=ws=qi=null,ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return b&&a.locale!=="ko"?null:a.data;default:return null}}var sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wt(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!sn[r.type]:a==="textarea"}function xr(r,a,l,u){_r?vr?vr.push(u):vr=[u]:_r=u,a=Cd(a,"onChange"),0<a.length&&(l=new Do("onChange","change",null,l,u),r.push({event:l,listeners:a}))}var dn=null,Yi=null;function wc(r){_w(r,0)}function Gh(r){var a=ps(r);if(hc(a))return r}function Wv(r,a){if(r==="change")return a}var Qv=!1;if(Yn){var Ym;if(Yn){var Wm="oninput"in document;if(!Wm){var $v=document.createElement("div");$v.setAttribute("oninput","return;"),Wm=typeof $v.oninput=="function"}Ym=Wm}else Ym=!1;Qv=Ym&&(!document.documentMode||9<document.documentMode)}function Kv(){dn&&(dn.detachEvent("onpropertychange",Xv),Yi=dn=null)}function Xv(r){if(r.propertyName==="value"&&Gh(Yi)){var a=[];xr(a,Yi,r,Io(r)),Dh(wc,a)}}function uR(r,a,l){r==="focusin"?(Kv(),dn=a,Yi=l,dn.attachEvent("onpropertychange",Xv)):r==="focusout"&&Kv()}function hR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Gh(Yi)}function dR(r,a){if(r==="click")return Gh(a)}function fR(r,a){if(r==="input"||r==="change")return Gh(a)}function mR(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Wn=typeof Object.is=="function"?Object.is:mR;function bc(r,a){if(Wn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!bo.call(a,f)||!Wn(r[f],a[f]))return!1}return!0}function Zv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Jv(r,a){var l=Zv(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=a&&u>=a)return{node:l,offset:a-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zv(l)}}function e0(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?e0(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function t0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=No(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=No(r.document)}return a}function Qm(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function pR(r,a){var l=t0(a);a=r.focusedElem;var u=r.selectionRange;if(l!==a&&a&&a.ownerDocument&&e0(a.ownerDocument.documentElement,a)){if(u!==null&&Qm(a)){if(r=u.start,l=u.end,l===void 0&&(l=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(l,a.value.length);else if(l=(r=a.ownerDocument||document)&&r.defaultView||window,l.getSelection){l=l.getSelection();var f=a.textContent.length,y=Math.min(u.start,f);u=u.end===void 0?y:Math.min(u.end,f),!l.extend&&y>u&&(f=u,u=y,y=f),f=Jv(a,y);var x=Jv(a,u);f&&x&&(l.rangeCount!==1||l.anchorNode!==f.node||l.anchorOffset!==f.offset||l.focusNode!==x.node||l.focusOffset!==x.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),l.removeAllRanges(),y>u?(l.addRange(r),l.extend(x.node,x.offset)):(r.setEnd(x.node,x.offset),l.addRange(r)))}}for(r=[],l=a;l=l.parentNode;)l.nodeType===1&&r.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)l=r[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var gR=Yn&&"documentMode"in document&&11>=document.documentMode,Uo=null,$m=null,xc=null,Km=!1;function n0(r,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Km||Uo==null||Uo!==No(u)||(u=Uo,"selectionStart"in u&&Qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),xc&&bc(xc,u)||(xc=u,u=Cd($m,"onSelect"),0<u.length&&(a=new Do("onSelect","select",null,a,l),r.push({event:a,listeners:u}),a.target=Uo)))}function Oa(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var Fo={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},Xm={},i0={};Yn&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function ka(r){if(Xm[r])return Xm[r];if(!Fo[r])return r;var a=Fo[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in i0)return Xm[r]=a[l];return r}var r0=ka("animationend"),s0=ka("animationiteration"),a0=ka("animationstart"),yR=ka("transitionrun"),_R=ka("transitionstart"),vR=ka("transitioncancel"),o0=ka("transitionend"),l0=new Map,c0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Si(r,a){l0.set(r,a),Gn(a,[r])}var ai=[],qo=0,Zm=0;function Yh(){for(var r=qo,a=Zm=qo=0;a<r;){var l=ai[a];ai[a++]=null;var u=ai[a];ai[a++]=null;var f=ai[a];ai[a++]=null;var y=ai[a];if(ai[a++]=null,u!==null&&f!==null){var x=u.pending;x===null?f.next=f:(f.next=x.next,x.next=f),u.pending=f}y!==0&&u0(l,f,y)}}function Wh(r,a,l,u){ai[qo++]=r,ai[qo++]=a,ai[qo++]=l,ai[qo++]=u,Zm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Jm(r,a,l,u){return Wh(r,a,l,u),Qh(r)}function bs(r,a){return Wh(r,null,null,a),Qh(r)}function u0(r,a,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var f=!1,y=r.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(f=!0)),r=y,y=y.return;f&&a!==null&&r.tag===3&&(y=r.stateNode,f=31-Nn(l),y=y.hiddenUpdates,r=y[f],r===null?y[f]=[a]:r.push(a),a.lane=l|536870912)}function Qh(r){if(50<Qc)throw Qc=0,sg=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var zo={},h0=new WeakMap;function oi(r,a){if(typeof r=="object"&&r!==null){var l=h0.get(r);return l!==void 0?l:(a={value:r,source:a,stack:Ee(a)},h0.set(r,a),a)}return{value:r,source:a,stack:Ee(a)}}var Bo=[],Ho=0,$h=null,Kh=0,li=[],ci=0,Ma=null,Tr=1,Sr="";function Pa(r,a){Bo[Ho++]=Kh,Bo[Ho++]=$h,$h=r,Kh=a}function d0(r,a,l){li[ci++]=Tr,li[ci++]=Sr,li[ci++]=Ma,Ma=r;var u=Tr;r=Sr;var f=32-Nn(u)-1;u&=~(1<<f),l+=1;var y=32-Nn(a)+f;if(30<y){var x=f-f%5;y=(u&(1<<x)-1).toString(32),u>>=x,f-=x,Tr=1<<32-Nn(a)+f|l<<f|u,Sr=y+r}else Tr=1<<y|l<<f|u,Sr=r}function ep(r){r.return!==null&&(Pa(r,1),d0(r,1,0))}function tp(r){for(;r===$h;)$h=Bo[--Ho],Bo[Ho]=null,Kh=Bo[--Ho],Bo[Ho]=null;for(;r===Ma;)Ma=li[--ci],li[ci]=null,Sr=li[--ci],li[ci]=null,Tr=li[--ci],li[ci]=null}var Dn=null,fn=null,Qe=!1,Ai=null,Wi=!1,np=Error(i(519));function ja(r){var a=Error(i(418,""));throw Ac(oi(a,r)),np}function f0(r){var a=r.stateNode,l=r.type,u=r.memoizedProps;switch(a[nn]=r,a[Gt]=u,l){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(l=0;l<Kc.length;l++)Fe(Kc[l],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Fe("invalid",a),xa(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ba(a);break;case"select":Fe("invalid",a);break;case"textarea":Fe("invalid",a),Es(a,u.value,u.defaultValue,u.children),ba(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||bw(a.textContent,l)?(u.popover!=null&&(Fe("beforetoggle",a),Fe("toggle",a)),u.onScroll!=null&&Fe("scroll",a),u.onScrollEnd!=null&&Fe("scrollend",a),u.onClick!=null&&(a.onclick=Nd),a=!0):a=!1,a||ja(r)}function m0(r){for(Dn=r.return;Dn;)switch(Dn.tag){case 3:case 27:Wi=!0;return;case 5:case 13:Wi=!1;return;default:Dn=Dn.return}}function Tc(r){if(r!==Dn)return!1;if(!Qe)return m0(r),Qe=!0,!1;var a=!1,l;if((l=r.tag!==3&&r.tag!==27)&&((l=r.tag===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||bg(r.type,r.memoizedProps)),l=!l),l&&(a=!0),a&&fn&&ja(r),m0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(a===0){fn=Ni(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;r=r.nextSibling}fn=null}}else fn=Dn?Ni(r.stateNode.nextSibling):null;return!0}function Sc(){fn=Dn=null,Qe=!1}function Ac(r){Ai===null?Ai=[r]:Ai.push(r)}var Cc=Error(i(460)),p0=Error(i(474)),ip={then:function(){}};function g0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Xh(){}function y0(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(Xh,Xh),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===Cc?Error(i(483)):r;default:if(typeof a.status=="string")a.then(Xh,Xh);else{if(r=ct,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===Cc?Error(i(483)):r}throw Nc=a,Cc}}var Nc=null;function _0(){if(Nc===null)throw Error(i(459));var r=Nc;return Nc=null,r}var Go=null,Rc=0;function Zh(r){var a=Rc;return Rc+=1,Go===null&&(Go=[]),y0(Go,r,a)}function Ic(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Jh(r,a){throw a.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function v0(r){var a=r._init;return a(r._payload)}function E0(r){function a(B,U){if(r){var G=B.deletions;G===null?(B.deletions=[U],B.flags|=16):G.push(U)}}function l(B,U){if(!r)return null;for(;U!==null;)a(B,U),U=U.sibling;return null}function u(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function f(B,U){return B=Ms(B,U),B.index=0,B.sibling=null,B}function y(B,U,G){return B.index=G,r?(G=B.alternate,G!==null?(G=G.index,G<U?(B.flags|=33554434,U):G):(B.flags|=33554434,U)):(B.flags|=1048576,U)}function x(B){return r&&B.alternate===null&&(B.flags|=33554434),B}function A(B,U,G,J){return U===null||U.tag!==6?(U=Xp(G,B.mode,J),U.return=B,U):(U=f(U,G),U.return=B,U)}function D(B,U,G,J){var me=G.type;return me===m?X(B,U,G.props.children,J,G.key):U!==null&&(U.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Y&&v0(me)===U.type)?(U=f(U,G.props),Ic(U,G),U.return=B,U):(U=yd(G.type,G.key,G.props,null,B.mode,J),Ic(U,G),U.return=B,U)}function F(B,U,G,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Zp(G,B.mode,J),U.return=B,U):(U=f(U,G.children||[]),U.return=B,U)}function X(B,U,G,J,me){return U===null||U.tag!==7?(U=Ya(G,B.mode,J,me),U.return=B,U):(U=f(U,G),U.return=B,U)}function ie(B,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Xp(""+U,B.mode,G),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case c:return G=yd(U.type,U.key,U.props,null,B.mode,G),Ic(G,U),G.return=B,G;case d:return U=Zp(U,B.mode,G),U.return=B,U;case Y:var J=U._init;return U=J(U._payload),ie(B,U,G)}if(ue(U)||ne(U))return U=Ya(U,B.mode,G,null),U.return=B,U;if(typeof U.then=="function")return ie(B,Zh(U),G);if(U.$$typeof===T)return ie(B,md(B,U),G);Jh(B,U)}return null}function W(B,U,G,J){var me=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return me!==null?null:A(B,U,""+G,J);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case c:return G.key===me?D(B,U,G,J):null;case d:return G.key===me?F(B,U,G,J):null;case Y:return me=G._init,G=me(G._payload),W(B,U,G,J)}if(ue(G)||ne(G))return me!==null?null:X(B,U,G,J,null);if(typeof G.then=="function")return W(B,U,Zh(G),J);if(G.$$typeof===T)return W(B,U,md(B,G),J);Jh(B,G)}return null}function K(B,U,G,J,me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return B=B.get(G)||null,A(U,B,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case c:return B=B.get(J.key===null?G:J.key)||null,D(U,B,J,me);case d:return B=B.get(J.key===null?G:J.key)||null,F(U,B,J,me);case Y:var ke=J._init;return J=ke(J._payload),K(B,U,G,J,me)}if(ue(J)||ne(J))return B=B.get(G)||null,X(U,B,J,me,null);if(typeof J.then=="function")return K(B,U,G,Zh(J),me);if(J.$$typeof===T)return K(B,U,G,md(U,J),me);Jh(U,J)}return null}function ge(B,U,G,J){for(var me=null,ke=null,_e=U,we=U=0,ln=null;_e!==null&&we<G.length;we++){_e.index>we?(ln=_e,_e=null):ln=_e.sibling;var $e=W(B,_e,G[we],J);if($e===null){_e===null&&(_e=ln);break}r&&_e&&$e.alternate===null&&a(B,_e),U=y($e,U,we),ke===null?me=$e:ke.sibling=$e,ke=$e,_e=ln}if(we===G.length)return l(B,_e),Qe&&Pa(B,we),me;if(_e===null){for(;we<G.length;we++)_e=ie(B,G[we],J),_e!==null&&(U=y(_e,U,we),ke===null?me=_e:ke.sibling=_e,ke=_e);return Qe&&Pa(B,we),me}for(_e=u(_e);we<G.length;we++)ln=K(_e,B,we,G[we],J),ln!==null&&(r&&ln.alternate!==null&&_e.delete(ln.key===null?we:ln.key),U=y(ln,U,we),ke===null?me=ln:ke.sibling=ln,ke=ln);return r&&_e.forEach(function(qs){return a(B,qs)}),Qe&&Pa(B,we),me}function Ae(B,U,G,J){if(G==null)throw Error(i(151));for(var me=null,ke=null,_e=U,we=U=0,ln=null,$e=G.next();_e!==null&&!$e.done;we++,$e=G.next()){_e.index>we?(ln=_e,_e=null):ln=_e.sibling;var qs=W(B,_e,$e.value,J);if(qs===null){_e===null&&(_e=ln);break}r&&_e&&qs.alternate===null&&a(B,_e),U=y(qs,U,we),ke===null?me=qs:ke.sibling=qs,ke=qs,_e=ln}if($e.done)return l(B,_e),Qe&&Pa(B,we),me;if(_e===null){for(;!$e.done;we++,$e=G.next())$e=ie(B,$e.value,J),$e!==null&&(U=y($e,U,we),ke===null?me=$e:ke.sibling=$e,ke=$e);return Qe&&Pa(B,we),me}for(_e=u(_e);!$e.done;we++,$e=G.next())$e=K(_e,B,we,$e.value,J),$e!==null&&(r&&$e.alternate!==null&&_e.delete($e.key===null?we:$e.key),U=y($e,U,we),ke===null?me=$e:ke.sibling=$e,ke=$e);return r&&_e.forEach(function(k1){return a(B,k1)}),Qe&&Pa(B,we),me}function Ct(B,U,G,J){if(typeof G=="object"&&G!==null&&G.type===m&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case c:e:{for(var me=G.key;U!==null;){if(U.key===me){if(me=G.type,me===m){if(U.tag===7){l(B,U.sibling),J=f(U,G.props.children),J.return=B,B=J;break e}}else if(U.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Y&&v0(me)===U.type){l(B,U.sibling),J=f(U,G.props),Ic(J,G),J.return=B,B=J;break e}l(B,U);break}else a(B,U);U=U.sibling}G.type===m?(J=Ya(G.props.children,B.mode,J,G.key),J.return=B,B=J):(J=yd(G.type,G.key,G.props,null,B.mode,J),Ic(J,G),J.return=B,B=J)}return x(B);case d:e:{for(me=G.key;U!==null;){if(U.key===me)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){l(B,U.sibling),J=f(U,G.children||[]),J.return=B,B=J;break e}else{l(B,U);break}else a(B,U);U=U.sibling}J=Zp(G,B.mode,J),J.return=B,B=J}return x(B);case Y:return me=G._init,G=me(G._payload),Ct(B,U,G,J)}if(ue(G))return ge(B,U,G,J);if(ne(G)){if(me=ne(G),typeof me!="function")throw Error(i(150));return G=me.call(G),Ae(B,U,G,J)}if(typeof G.then=="function")return Ct(B,U,Zh(G),J);if(G.$$typeof===T)return Ct(B,U,md(B,G),J);Jh(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(l(B,U.sibling),J=f(U,G),J.return=B,B=J):(l(B,U),J=Xp(G,B.mode,J),J.return=B,B=J),x(B)):l(B,U)}return function(B,U,G,J){try{Rc=0;var me=Ct(B,U,G,J);return Go=null,me}catch(_e){if(_e===Cc)throw _e;var ke=fi(29,_e,null,B.mode);return ke.lanes=J,ke.return=B,ke}finally{}}}var La=E0(!0),w0=E0(!1),Yo=Ye(null),ed=Ye(0);function b0(r,a){r=jr,nt(ed,r),nt(Yo,a),jr=r|a.baseLanes}function rp(){nt(ed,jr),nt(Yo,Yo.current)}function sp(){jr=ed.current,xt(Yo),xt(ed)}var ui=Ye(null),Qi=null;function xs(r){var a=r.alternate;nt(Qt,Qt.current&1),nt(ui,r),Qi===null&&(a===null||Yo.current!==null||a.memoizedState!==null)&&(Qi=r)}function x0(r){if(r.tag===22){if(nt(Qt,Qt.current),nt(ui,r),Qi===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(Qi=r)}}else Ts()}function Ts(){nt(Qt,Qt.current),nt(ui,ui.current)}function Ar(r){xt(ui),Qi===r&&(Qi=null),xt(Qt)}var Qt=Ye(0);function td(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ER=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},wR=n.unstable_scheduleCallback,bR=n.unstable_NormalPriority,$t={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ap(){return{controller:new ER,data:new Map,refCount:0}}function Dc(r){r.refCount--,r.refCount===0&&wR(bR,function(){r.controller.abort()})}var Oc=null,op=0,Wo=0,Qo=null;function xR(r,a){if(Oc===null){var l=Oc=[];op=0,Wo=fg(),Qo={status:"pending",value:void 0,then:function(u){l.push(u)}}}return op++,a.then(T0,T0),a}function T0(){if(--op===0&&Oc!==null){Qo!==null&&(Qo.status="fulfilled");var r=Oc;Oc=null,Wo=0,Qo=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function TR(r,a){var l=[],u={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),u}var S0=R.S;R.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&xR(r,a),S0!==null&&S0(r,a)};var Va=Ye(null);function lp(){var r=Va.current;return r!==null?r:ct.pooledCache}function nd(r,a){a===null?nt(Va,Va.current):nt(Va,a.pool)}function A0(){var r=lp();return r===null?null:{parent:$t._currentValue,pool:r}}var Ss=0,Oe=null,st=null,Lt=null,id=!1,$o=!1,Ua=!1,rd=0,kc=0,Ko=null,SR=0;function Ot(){throw Error(i(321))}function cp(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Wn(r[l],a[l]))return!1;return!0}function up(r,a,l,u,f,y){return Ss=y,Oe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=r===null||r.memoizedState===null?Fa:As,Ua=!1,y=l(u,f),Ua=!1,$o&&(y=N0(a,l,u,f)),C0(r),y}function C0(r){R.H=$i;var a=st!==null&&st.next!==null;if(Ss=0,Lt=st=Oe=null,id=!1,kc=0,Ko=null,a)throw Error(i(300));r===null||an||(r=r.dependencies,r!==null&&fd(r)&&(an=!0))}function N0(r,a,l,u){Oe=r;var f=0;do{if($o&&(Ko=null),kc=0,$o=!1,25<=f)throw Error(i(301));if(f+=1,Lt=st=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}R.H=qa,y=a(l,u)}while($o);return y}function AR(){var r=R.H,a=r.useState()[0];return a=typeof a.then=="function"?Mc(a):a,r=r.useState()[0],(st!==null?st.memoizedState:null)!==r&&(Oe.flags|=1024),a}function hp(){var r=rd!==0;return rd=0,r}function dp(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function fp(r){if(id){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}id=!1}Ss=0,Lt=st=Oe=null,$o=!1,kc=rd=0,Ko=null}function Un(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Oe.memoizedState=Lt=r:Lt=Lt.next=r,Lt}function Vt(){if(st===null){var r=Oe.alternate;r=r!==null?r.memoizedState:null}else r=st.next;var a=Lt===null?Oe.memoizedState:Lt.next;if(a!==null)Lt=a,st=r;else{if(r===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));st=r,r={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Lt===null?Oe.memoizedState=Lt=r:Lt=Lt.next=r}return Lt}var sd;sd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Mc(r){var a=kc;return kc+=1,Ko===null&&(Ko=[]),r=y0(Ko,r,a),a=Oe,(Lt===null?a.memoizedState:Lt.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?Fa:As),r}function ad(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Mc(r);if(r.$$typeof===T)return wn(r)}throw Error(i(438,String(r)))}function mp(r){var a=null,l=Oe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=sd(),Oe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),u=0;u<r;u++)l[u]=te;return a.index++,l}function Cr(r,a){return typeof a=="function"?a(r):a}function od(r){var a=Vt();return pp(a,st,r)}function pp(r,a,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var f=r.baseQueue,y=u.pending;if(y!==null){if(f!==null){var x=f.next;f.next=y.next,y.next=x}a.baseQueue=f=y,u.pending=null}if(y=r.baseState,f===null)r.memoizedState=y;else{a=f.next;var A=x=null,D=null,F=a,X=!1;do{var ie=F.lane&-536870913;if(ie!==F.lane?(He&ie)===ie:(Ss&ie)===ie){var W=F.revertLane;if(W===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ie===Wo&&(X=!0);else if((Ss&W)===W){F=F.next,W===Wo&&(X=!0);continue}else ie={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=ie,x=y):D=D.next=ie,Oe.lanes|=W,Ps|=W;ie=F.action,Ua&&l(y,ie),y=F.hasEagerState?F.eagerState:l(y,ie)}else W={lane:ie,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=W,x=y):D=D.next=W,Oe.lanes|=ie,Ps|=ie;F=F.next}while(F!==null&&F!==a);if(D===null?x=y:D.next=A,!Wn(y,r.memoizedState)&&(an=!0,X&&(l=Qo,l!==null)))throw l;r.memoizedState=y,r.baseState=x,r.baseQueue=D,u.lastRenderedState=y}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function gp(r){var a=Vt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,f=l.pending,y=a.memoizedState;if(f!==null){l.pending=null;var x=f=f.next;do y=r(y,x.action),x=x.next;while(x!==f);Wn(y,a.memoizedState)||(an=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,u]}function R0(r,a,l){var u=Oe,f=Vt(),y=Qe;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=a();var x=!Wn((st||f).memoizedState,l);if(x&&(f.memoizedState=l,an=!0),f=f.queue,vp(O0.bind(null,u,f,r),[r]),f.getSnapshot!==a||x||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,Xo(9,D0.bind(null,u,f,l,a),{destroy:void 0},null),ct===null)throw Error(i(349));y||(Ss&60)!==0||I0(u,a,l)}return l}function I0(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Oe.updateQueue,a===null?(a=sd(),Oe.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function D0(r,a,l,u){a.value=l,a.getSnapshot=u,k0(a)&&M0(r)}function O0(r,a,l){return l(function(){k0(a)&&M0(r)})}function k0(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Wn(r,l)}catch{return!0}}function M0(r){var a=bs(r,2);a!==null&&On(a,r,2)}function yp(r){var a=Un();if(typeof r=="function"){var l=r;if(r=l(),Ua){ji(!0);try{l()}finally{ji(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:r},a}function P0(r,a,l,u){return r.baseState=l,pp(r,st,typeof u=="function"?u:Cr)}function CR(r,a,l,u,f){if(ud(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};R.T!==null?l(!0):y.isTransition=!1,u(y),l=a.pending,l===null?(y.next=a.pending=y,j0(a,y)):(y.next=l.next,a.pending=l.next=y)}}function j0(r,a){var l=a.action,u=a.payload,f=r.state;if(a.isTransition){var y=R.T,x={};R.T=x;try{var A=l(f,u),D=R.S;D!==null&&D(x,A),L0(r,a,A)}catch(F){_p(r,a,F)}finally{R.T=y}}else try{y=l(f,u),L0(r,a,y)}catch(F){_p(r,a,F)}}function L0(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){V0(r,a,u)},function(u){return _p(r,a,u)}):V0(r,a,l)}function V0(r,a,l){a.status="fulfilled",a.value=l,U0(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,j0(r,l)))}function _p(r,a,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,U0(a),a=a.next;while(a!==u)}r.action=null}function U0(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function F0(r,a){return a}function q0(r,a){if(Qe){var l=ct.formState;if(l!==null){e:{var u=Oe;if(Qe){if(fn){t:{for(var f=fn,y=Wi;f.nodeType!==8;){if(!y){f=null;break t}if(f=Ni(f.nextSibling),f===null){f=null;break t}}y=f.data,f=y==="F!"||y==="F"?f:null}if(f){fn=Ni(f.nextSibling),u=f.data==="F!";break e}}ja(u)}u=!1}u&&(a=l[0])}}return l=Un(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F0,lastRenderedState:a},l.queue=u,l=sE.bind(null,Oe,u),u.dispatch=l,u=yp(!1),y=Tp.bind(null,Oe,!1,u.queue),u=Un(),f={state:a,dispatch:null,action:r,pending:null},u.queue=f,l=CR.bind(null,Oe,f,y,l),f.dispatch=l,u.memoizedState=r,[a,l,!1]}function z0(r){var a=Vt();return B0(a,st,r)}function B0(r,a,l){a=pp(r,a,F0)[0],r=od(Cr)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?Mc(a):a;var u=Vt(),f=u.queue,y=f.dispatch;return l!==u.memoizedState&&(Oe.flags|=2048,Xo(9,NR.bind(null,f,l),{destroy:void 0},null)),[a,y,r]}function NR(r,a){r.action=a}function H0(r){var a=Vt(),l=st;if(l!==null)return B0(a,l,r);Vt(),a=a.memoizedState,l=Vt();var u=l.queue.dispatch;return l.memoizedState=r,[a,u,!1]}function Xo(r,a,l,u){return r={tag:r,create:a,inst:l,deps:u,next:null},a=Oe.updateQueue,a===null&&(a=sd(),Oe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,a.lastEffect=r),r}function G0(){return Vt().memoizedState}function ld(r,a,l,u){var f=Un();Oe.flags|=r,f.memoizedState=Xo(1|a,l,{destroy:void 0},u===void 0?null:u)}function cd(r,a,l,u){var f=Vt();u=u===void 0?null:u;var y=f.memoizedState.inst;st!==null&&u!==null&&cp(u,st.memoizedState.deps)?f.memoizedState=Xo(a,l,y,u):(Oe.flags|=r,f.memoizedState=Xo(1|a,l,y,u))}function Y0(r,a){ld(8390656,8,r,a)}function vp(r,a){cd(2048,8,r,a)}function W0(r,a){return cd(4,2,r,a)}function Q0(r,a){return cd(4,4,r,a)}function $0(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function K0(r,a,l){l=l!=null?l.concat([r]):null,cd(4,4,$0.bind(null,a,r),l)}function Ep(){}function X0(r,a){var l=Vt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&cp(a,u[1])?u[0]:(l.memoizedState=[r,a],r)}function Z0(r,a){var l=Vt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&cp(a,u[1]))return u[0];if(u=r(),Ua){ji(!0);try{r()}finally{ji(!1)}}return l.memoizedState=[u,a],u}function wp(r,a,l){return l===void 0||(Ss&1073741824)!==0?r.memoizedState=a:(r.memoizedState=l,r=ew(),Oe.lanes|=r,Ps|=r,l)}function J0(r,a,l,u){return Wn(l,a)?l:Yo.current!==null?(r=wp(r,l,u),Wn(r,a)||(an=!0),r):(Ss&42)===0?(an=!0,r.memoizedState=l):(r=ew(),Oe.lanes|=r,Ps|=r,a)}function eE(r,a,l,u,f){var y=he.p;he.p=y!==0&&8>y?y:8;var x=R.T,A={};R.T=A,Tp(r,!1,a,l);try{var D=f(),F=R.S;if(F!==null&&F(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=TR(D,u);Pc(r,a,X,Xn(r))}else Pc(r,a,u,Xn(r))}catch(ie){Pc(r,a,{then:function(){},status:"rejected",reason:ie},Xn())}finally{he.p=y,R.T=x}}function RR(){}function bp(r,a,l,u){if(r.tag!==5)throw Error(i(476));var f=tE(r).queue;eE(r,f,a,De,l===null?RR:function(){return nE(r),l(u)})}function tE(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:De},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function nE(r){var a=tE(r).next.queue;Pc(r,a,{},Xn())}function xp(){return wn(tu)}function iE(){return Vt().memoizedState}function rE(){return Vt().memoizedState}function IR(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=Xn();r=Rs(l);var u=Is(a,r,l);u!==null&&(On(u,a,l),Vc(u,a,l)),a={cache:ap()},r.payload=a;return}a=a.return}}function DR(r,a,l){var u=Xn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ud(r)?aE(a,l):(l=Jm(r,a,l,u),l!==null&&(On(l,r,u),oE(l,a,u)))}function sE(r,a,l){var u=Xn();Pc(r,a,l,u)}function Pc(r,a,l,u){var f={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ud(r))aE(a,f);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,A=y(x,l);if(f.hasEagerState=!0,f.eagerState=A,Wn(A,x))return Wh(r,a,f,0),ct===null&&Yh(),!1}catch{}finally{}if(l=Jm(r,a,f,u),l!==null)return On(l,r,u),oE(l,a,u),!0}return!1}function Tp(r,a,l,u){if(u={lane:2,revertLane:fg(),action:u,hasEagerState:!1,eagerState:null,next:null},ud(r)){if(a)throw Error(i(479))}else a=Jm(r,l,u,2),a!==null&&On(a,r,2)}function ud(r){var a=r.alternate;return r===Oe||a!==null&&a===Oe}function aE(r,a){$o=id=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function oE(r,a,l){if((l&4194176)!==0){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,ds(r,l)}}var $i={readContext:wn,use:ad,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot};$i.useCacheRefresh=Ot,$i.useMemoCache=Ot,$i.useHostTransitionStatus=Ot,$i.useFormState=Ot,$i.useActionState=Ot,$i.useOptimistic=Ot;var Fa={readContext:wn,use:ad,useCallback:function(r,a){return Un().memoizedState=[r,a===void 0?null:a],r},useContext:wn,useEffect:Y0,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,ld(4194308,4,$0.bind(null,a,r),l)},useLayoutEffect:function(r,a){return ld(4194308,4,r,a)},useInsertionEffect:function(r,a){ld(4,2,r,a)},useMemo:function(r,a){var l=Un();a=a===void 0?null:a;var u=r();if(Ua){ji(!0);try{r()}finally{ji(!1)}}return l.memoizedState=[u,a],u},useReducer:function(r,a,l){var u=Un();if(l!==void 0){var f=l(a);if(Ua){ji(!0);try{l(a)}finally{ji(!1)}}}else f=a;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=DR.bind(null,Oe,r),[u.memoizedState,r]},useRef:function(r){var a=Un();return r={current:r},a.memoizedState=r},useState:function(r){r=yp(r);var a=r.queue,l=sE.bind(null,Oe,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:Ep,useDeferredValue:function(r,a){var l=Un();return wp(l,r,a)},useTransition:function(){var r=yp(!1);return r=eE.bind(null,Oe,r.queue,!0,!1),Un().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var u=Oe,f=Un();if(Qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),ct===null)throw Error(i(349));(He&60)!==0||I0(u,a,l)}f.memoizedState=l;var y={value:l,getSnapshot:a};return f.queue=y,Y0(O0.bind(null,u,y,r),[r]),u.flags|=2048,Xo(9,D0.bind(null,u,y,l,a),{destroy:void 0},null),l},useId:function(){var r=Un(),a=ct.identifierPrefix;if(Qe){var l=Sr,u=Tr;l=(u&~(1<<32-Nn(u)-1)).toString(32)+l,a=":"+a+"R"+l,l=rd++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=SR++,a=":"+a+"r"+l.toString(32)+":";return r.memoizedState=a},useCacheRefresh:function(){return Un().memoizedState=IR.bind(null,Oe)}};Fa.useMemoCache=mp,Fa.useHostTransitionStatus=xp,Fa.useFormState=q0,Fa.useActionState=q0,Fa.useOptimistic=function(r){var a=Un();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Tp.bind(null,Oe,!0,l),l.dispatch=a,[r,a]};var As={readContext:wn,use:ad,useCallback:X0,useContext:wn,useEffect:vp,useImperativeHandle:K0,useInsertionEffect:W0,useLayoutEffect:Q0,useMemo:Z0,useReducer:od,useRef:G0,useState:function(){return od(Cr)},useDebugValue:Ep,useDeferredValue:function(r,a){var l=Vt();return J0(l,st.memoizedState,r,a)},useTransition:function(){var r=od(Cr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:Mc(r),a]},useSyncExternalStore:R0,useId:iE};As.useCacheRefresh=rE,As.useMemoCache=mp,As.useHostTransitionStatus=xp,As.useFormState=z0,As.useActionState=z0,As.useOptimistic=function(r,a){var l=Vt();return P0(l,st,r,a)};var qa={readContext:wn,use:ad,useCallback:X0,useContext:wn,useEffect:vp,useImperativeHandle:K0,useInsertionEffect:W0,useLayoutEffect:Q0,useMemo:Z0,useReducer:gp,useRef:G0,useState:function(){return gp(Cr)},useDebugValue:Ep,useDeferredValue:function(r,a){var l=Vt();return st===null?wp(l,r,a):J0(l,st.memoizedState,r,a)},useTransition:function(){var r=gp(Cr)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:Mc(r),a]},useSyncExternalStore:R0,useId:iE};qa.useCacheRefresh=rE,qa.useMemoCache=mp,qa.useHostTransitionStatus=xp,qa.useFormState=H0,qa.useActionState=H0,qa.useOptimistic=function(r,a){var l=Vt();return st!==null?P0(l,st,r,a):(l.baseState=r,[r,l.queue.dispatch])};function Sp(r,a,l,u){a=r.memoizedState,l=l(u,a),l=l==null?a:I({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Ap={isMounted:function(r){return(r=r._reactInternals)?pe(r)===r:!1},enqueueSetState:function(r,a,l){r=r._reactInternals;var u=Xn(),f=Rs(u);f.payload=a,l!=null&&(f.callback=l),a=Is(r,f,u),a!==null&&(On(a,r,u),Vc(a,r,u))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var u=Xn(),f=Rs(u);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Is(r,f,u),a!==null&&(On(a,r,u),Vc(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=Xn(),u=Rs(l);u.tag=2,a!=null&&(u.callback=a),a=Is(r,u,l),a!==null&&(On(a,r,l),Vc(a,r,l))}};function lE(r,a,l,u,f,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,x):a.prototype&&a.prototype.isPureReactComponent?!bc(l,u)||!bc(f,y):!0}function cE(r,a,l,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==r&&Ap.enqueueReplaceState(a,a.state,null)}function za(r,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(r=r.defaultProps){l===a&&(l=I({},l));for(var f in r)l[f]===void 0&&(l[f]=r[f])}return l}var hd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function uE(r){hd(r)}function hE(r){console.error(r)}function dE(r){hd(r)}function dd(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function fE(r,a,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Cp(r,a,l){return l=Rs(l),l.tag=3,l.payload={element:null},l.callback=function(){dd(r,a)},l}function mE(r){return r=Rs(r),r.tag=3,r}function pE(r,a,l,u){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var y=u.value;r.payload=function(){return f(y)},r.callback=function(){fE(a,l,u)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){fE(a,l,u),typeof f!="function"&&(js===null?js=new Set([this]):js.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function OR(r,a,l,u,f){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&Lc(a,l,f,!0),l=ui.current,l!==null){switch(l.tag){case 13:return Qi===null?lg():l.alternate===null&&At===0&&(At=3),l.flags&=-257,l.flags|=65536,l.lanes=f,u===ip?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),ug(r,u,f)),!1;case 22:return l.flags|=65536,u===ip?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),ug(r,u,f)),!1}throw Error(i(435,l.tag))}return ug(r,u,f),lg(),!1}if(Qe)return a=ui.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==np&&(r=Error(i(422),{cause:u}),Ac(oi(r,l)))):(u!==np&&(a=Error(i(423),{cause:u}),Ac(oi(a,l))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=oi(u,l),f=Cp(r.stateNode,u,f),zp(r,f),At!==4&&(At=2)),!1;var y=Error(i(520),{cause:u});if(y=oi(y,l),Yc===null?Yc=[y]:Yc.push(y),At!==4&&(At=2),a===null)return!0;u=oi(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=f&-f,l.lanes|=r,r=Cp(l.stateNode,u,r),zp(l,r),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(js===null||!js.has(y))))return l.flags|=65536,f&=-f,l.lanes|=f,f=mE(f),pE(f,r,l,u),zp(l,f),!1}l=l.return}while(l!==null);return!1}var gE=Error(i(461)),an=!1;function mn(r,a,l,u){a.child=r===null?w0(a,null,l,u):La(a,r.child,l,u)}function yE(r,a,l,u,f){l=l.render;var y=a.ref;if("ref"in u){var x={};for(var A in u)A!=="ref"&&(x[A]=u[A])}else x=u;return Ha(a),u=up(r,a,l,x,y,f),A=hp(),r!==null&&!an?(dp(r,a,f),Nr(r,a,f)):(Qe&&A&&ep(a),a.flags|=1,mn(r,a,u,f),a.child)}function _E(r,a,l,u,f){if(r===null){var y=l.type;return typeof y=="function"&&!Kp(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,vE(r,a,y,u,f)):(r=yd(l.type,null,u,a,a.mode,f),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!jp(r,f)){var x=y.memoizedProps;if(l=l.compare,l=l!==null?l:bc,l(x,u)&&r.ref===a.ref)return Nr(r,a,f)}return a.flags|=1,r=Ms(y,u),r.ref=a.ref,r.return=a,a.child=r}function vE(r,a,l,u,f){if(r!==null){var y=r.memoizedProps;if(bc(y,u)&&r.ref===a.ref)if(an=!1,a.pendingProps=u=y,jp(r,f))(r.flags&131072)!==0&&(an=!0);else return a.lanes=r.lanes,Nr(r,a,f)}return Np(r,a,l,u,f)}function EE(r,a,l){var u=a.pendingProps,f=u.children,y=(a.stateNode._pendingVisibility&2)!==0,x=r!==null?r.memoizedState:null;if(jc(r,a),u.mode==="hidden"||y){if((a.flags&128)!==0){if(u=x!==null?x.baseLanes|l:l,r!==null){for(f=a.child=r.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;a.childLanes=y&~u}else a.childLanes=0,a.child=null;return wE(r,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&nd(a,x!==null?x.cachePool:null),x!==null?b0(a,x):rp(),x0(a);else return a.lanes=a.childLanes=536870912,wE(r,a,x!==null?x.baseLanes|l:l,l)}else x!==null?(nd(a,x.cachePool),b0(a,x),Ts(),a.memoizedState=null):(r!==null&&nd(a,null),rp(),Ts());return mn(r,a,f,l),a.child}function wE(r,a,l,u){var f=lp();return f=f===null?null:{parent:$t._currentValue,pool:f},a.memoizedState={baseLanes:l,cachePool:f},r!==null&&nd(a,null),rp(),x0(a),r!==null&&Lc(r,a,u,!0),null}function jc(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=2097664)}}function Np(r,a,l,u,f){return Ha(a),l=up(r,a,l,u,void 0,f),u=hp(),r!==null&&!an?(dp(r,a,f),Nr(r,a,f)):(Qe&&u&&ep(a),a.flags|=1,mn(r,a,l,f),a.child)}function bE(r,a,l,u,f,y){return Ha(a),a.updateQueue=null,l=N0(a,u,l,f),C0(r),u=hp(),r!==null&&!an?(dp(r,a,y),Nr(r,a,y)):(Qe&&u&&ep(a),a.flags|=1,mn(r,a,l,y),a.child)}function xE(r,a,l,u,f){if(Ha(a),a.stateNode===null){var y=zo,x=l.contextType;typeof x=="object"&&x!==null&&(y=wn(x)),y=new l(u,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ap,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=u,y.state=a.memoizedState,y.refs={},Fp(a),x=l.contextType,y.context=typeof x=="object"&&x!==null?wn(x):zo,y.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Sp(a,l,x,u),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Ap.enqueueReplaceState(y,y.state,null),Fc(a,u,y,f),Uc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){y=a.stateNode;var A=a.memoizedProps,D=za(l,A);y.props=D;var F=y.context,X=l.contextType;x=zo,typeof X=="object"&&X!==null&&(x=wn(X));var ie=l.getDerivedStateFromProps;X=typeof ie=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||F!==x)&&cE(a,y,u,x),Ns=!1;var W=a.memoizedState;y.state=W,Fc(a,u,y,f),Uc(),F=a.memoizedState,A||W!==F||Ns?(typeof ie=="function"&&(Sp(a,l,ie,u),F=a.memoizedState),(D=Ns||lE(a,l,D,u,W,F,x))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=F),y.props=u,y.state=F,y.context=x,u=D):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,qp(r,a),x=a.memoizedProps,X=za(l,x),y.props=X,ie=a.pendingProps,W=y.context,F=l.contextType,D=zo,typeof F=="object"&&F!==null&&(D=wn(F)),A=l.getDerivedStateFromProps,(F=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==ie||W!==D)&&cE(a,y,u,D),Ns=!1,W=a.memoizedState,y.state=W,Fc(a,u,y,f),Uc();var K=a.memoizedState;x!==ie||W!==K||Ns||r!==null&&r.dependencies!==null&&fd(r.dependencies)?(typeof A=="function"&&(Sp(a,l,A,u),K=a.memoizedState),(X=Ns||lE(a,l,X,u,W,K,D)||r!==null&&r.dependencies!==null&&fd(r.dependencies))?(F||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,K,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,K,D)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=K),y.props=u,y.state=K,y.context=D,u=X):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&W===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&W===r.memoizedState||(a.flags|=1024),u=!1)}return y=u,jc(r,a),u=(a.flags&128)!==0,y||u?(y=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&u?(a.child=La(a,r.child,null,f),a.child=La(a,null,l,f)):mn(r,a,l,f),a.memoizedState=y.state,r=a.child):r=Nr(r,a,f),r}function TE(r,a,l,u){return Sc(),a.flags|=256,mn(r,a,l,u),a.child}var Rp={dehydrated:null,treeContext:null,retryLane:0};function Ip(r){return{baseLanes:r,cachePool:A0()}}function Dp(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=mi),r}function SE(r,a,l){var u=a.pendingProps,f=!1,y=(a.flags&128)!==0,x;if((x=y)||(x=r!==null&&r.memoizedState===null?!1:(Qt.current&2)!==0),x&&(f=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,r===null){if(Qe){if(f?xs(a):Ts(),Qe){var A=fn,D;if(D=A){e:{for(D=A,A=Wi;D.nodeType!==8;){if(!A){A=null;break e}if(D=Ni(D.nextSibling),D===null){A=null;break e}}A=D}A!==null?(a.memoizedState={dehydrated:A,treeContext:Ma!==null?{id:Tr,overflow:Sr}:null,retryLane:536870912},D=fi(18,null,null,0),D.stateNode=A,D.return=a,a.child=D,Dn=a,fn=null,D=!0):D=!1}D||ja(a)}if(A=a.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?a.lanes=16:a.lanes=536870912,null;Ar(a)}return A=u.children,u=u.fallback,f?(Ts(),f=a.mode,A=kp({mode:"hidden",children:A},f),u=Ya(u,f,l,null),A.return=a,u.return=a,A.sibling=u,a.child=A,f=a.child,f.memoizedState=Ip(l),f.childLanes=Dp(r,x,l),a.memoizedState=Rp,u):(xs(a),Op(a,A))}if(D=r.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(y)a.flags&256?(xs(a),a.flags&=-257,a=Mp(r,a,l)):a.memoizedState!==null?(Ts(),a.child=r.child,a.flags|=128,a=null):(Ts(),f=u.fallback,A=a.mode,u=kp({mode:"visible",children:u.children},A),f=Ya(f,A,l,null),f.flags|=2,u.return=a,f.return=a,u.sibling=f,a.child=u,La(a,r.child,null,l),u=a.child,u.memoizedState=Ip(l),u.childLanes=Dp(r,x,l),a.memoizedState=Rp,a=f);else if(xs(a),A.data==="$!"){if(x=A.nextSibling&&A.nextSibling.dataset,x)var F=x.dgst;x=F,u=Error(i(419)),u.stack="",u.digest=x,Ac({value:u,source:null,stack:null}),a=Mp(r,a,l)}else if(an||Lc(r,a,l,!1),x=(l&r.childLanes)!==0,an||x){if(x=ct,x!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(x.suspendedLanes|l))!==0?0:u,u!==0&&u!==D.retryLane)throw D.retryLane=u,bs(r,u),On(x,r,u),gE}A.data==="$?"||lg(),a=Mp(r,a,l)}else A.data==="$?"?(a.flags|=128,a.child=r.child,a=WR.bind(null,r),A._reactRetry=a,a=null):(r=D.treeContext,fn=Ni(A.nextSibling),Dn=a,Qe=!0,Ai=null,Wi=!1,r!==null&&(li[ci++]=Tr,li[ci++]=Sr,li[ci++]=Ma,Tr=r.id,Sr=r.overflow,Ma=a),a=Op(a,u.children),a.flags|=4096);return a}return f?(Ts(),f=u.fallback,A=a.mode,D=r.child,F=D.sibling,u=Ms(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&31457280,F!==null?f=Ms(F,f):(f=Ya(f,A,l,null),f.flags|=2),f.return=a,u.return=a,u.sibling=f,a.child=u,u=f,f=a.child,A=r.child.memoizedState,A===null?A=Ip(l):(D=A.cachePool,D!==null?(F=$t._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=A0(),A={baseLanes:A.baseLanes|l,cachePool:D}),f.memoizedState=A,f.childLanes=Dp(r,x,l),a.memoizedState=Rp,u):(xs(a),l=r.child,r=l.sibling,l=Ms(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,r!==null&&(x=a.deletions,x===null?(a.deletions=[r],a.flags|=16):x.push(r)),a.child=l,a.memoizedState=null,l)}function Op(r,a){return a=kp({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function kp(r,a){return XE(r,a,0,null)}function Mp(r,a,l){return La(a,r.child,null,l),r=Op(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function AE(r,a,l){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),Vp(r.return,a,l)}function Pp(r,a,l,u,f){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=l,y.tailMode=f)}function CE(r,a,l){var u=a.pendingProps,f=u.revealOrder,y=u.tail;if(mn(r,a,u.children,l),u=Qt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&AE(r,l,a);else if(r.tag===19)AE(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(nt(Qt,u),f){case"forwards":for(l=a.child,f=null;l!==null;)r=l.alternate,r!==null&&td(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),Pp(a,!1,f,l,y);break;case"backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(r=f.alternate,r!==null&&td(r)===null){a.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Pp(a,!0,l,null,y);break;case"together":Pp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Nr(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),Ps|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(Lc(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=Ms(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Ms(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function jp(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&fd(r)))}function kR(r,a,l){switch(a.tag){case 3:as(a,a.stateNode.containerInfo),Cs(a,$t,r.memoizedState.cache),Sc();break;case 27:case 5:tc(a);break;case 4:as(a,a.stateNode.containerInfo);break;case 10:Cs(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(xs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?SE(r,a,l):(xs(a),r=Nr(r,a,l),r!==null?r.sibling:null);xs(a);break;case 19:var f=(r.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(Lc(r,a,l,!1),u=(l&a.childLanes)!==0),f){if(u)return CE(r,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),nt(Qt,Qt.current),u)break;return null;case 22:case 23:return a.lanes=0,EE(r,a,l);case 24:Cs(a,$t,r.memoizedState.cache)}return Nr(r,a,l)}function NE(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)an=!0;else{if(!jp(r,l)&&(a.flags&128)===0)return an=!1,kR(r,a,l);an=(r.flags&131072)!==0}else an=!1,Qe&&(a.flags&1048576)!==0&&d0(a,Kh,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var u=a.elementType,f=u._init;if(u=f(u._payload),a.type=u,typeof u=="function")Kp(u)?(r=za(u,r),a.tag=1,a=xE(null,a,u,r,l)):(a.tag=0,a=Np(null,a,u,r,l));else{if(u!=null){if(f=u.$$typeof,f===S){a.tag=11,a=yE(null,a,u,r,l);break e}else if(f===z){a.tag=14,a=_E(null,a,u,r,l);break e}}throw a=C(u)||u,Error(i(306,a,""))}}return a;case 0:return Np(r,a,a.type,a.pendingProps,l);case 1:return u=a.type,f=za(u,a.pendingProps),xE(r,a,u,f,l);case 3:e:{if(as(a,a.stateNode.containerInfo),r===null)throw Error(i(387));var y=a.pendingProps;f=a.memoizedState,u=f.element,qp(r,a),Fc(a,y,null,l);var x=a.memoizedState;if(y=x.cache,Cs(a,$t,y),y!==f.cache&&Up(a,[$t],l,!0),Uc(),y=x.element,f.isDehydrated)if(f={element:y,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=f,a.memoizedState=f,a.flags&256){a=TE(r,a,y,l);break e}else if(y!==u){u=oi(Error(i(424)),a),Ac(u),a=TE(r,a,y,l);break e}else for(fn=Ni(a.stateNode.containerInfo.firstChild),Dn=a,Qe=!0,Ai=null,Wi=!0,l=w0(a,null,y,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Sc(),y===u){a=Nr(r,a,l);break e}mn(r,a,y,l)}a=a.child}return a;case 26:return jc(r,a),r===null?(l=Dw(a.type,null,a.pendingProps,null))?a.memoizedState=l:Qe||(l=a.type,r=a.pendingProps,u=Rd(Jn.current).createElement(l),u[nn]=a,u[Gt]=r,pn(u,l,r),yt(u),a.stateNode=u):a.memoizedState=Dw(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return tc(a),r===null&&Qe&&(u=a.stateNode=Nw(a.type,a.pendingProps,Jn.current),Dn=a,Wi=!0,fn=Ni(u.firstChild)),u=a.pendingProps.children,r!==null||Qe?mn(r,a,u,l):a.child=La(a,null,u,l),jc(r,a),a.child;case 5:return r===null&&Qe&&((f=u=fn)&&(u=c1(u,a.type,a.pendingProps,Wi),u!==null?(a.stateNode=u,Dn=a,fn=Ni(u.firstChild),Wi=!1,f=!0):f=!1),f||ja(a)),tc(a),f=a.type,y=a.pendingProps,x=r!==null?r.memoizedProps:null,u=y.children,bg(f,y)?u=null:x!==null&&bg(f,x)&&(a.flags|=32),a.memoizedState!==null&&(f=up(r,a,AR,null,null,l),tu._currentValue=f),jc(r,a),mn(r,a,u,l),a.child;case 6:return r===null&&Qe&&((r=l=fn)&&(l=u1(l,a.pendingProps,Wi),l!==null?(a.stateNode=l,Dn=a,fn=null,r=!0):r=!1),r||ja(a)),null;case 13:return SE(r,a,l);case 4:return as(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=La(a,null,u,l):mn(r,a,u,l),a.child;case 11:return yE(r,a,a.type,a.pendingProps,l);case 7:return mn(r,a,a.pendingProps,l),a.child;case 8:return mn(r,a,a.pendingProps.children,l),a.child;case 12:return mn(r,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Cs(a,a.type,u.value),mn(r,a,u.children,l),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,Ha(a),f=wn(f),u=u(f),a.flags|=1,mn(r,a,u,l),a.child;case 14:return _E(r,a,a.type,a.pendingProps,l);case 15:return vE(r,a,a.type,a.pendingProps,l);case 19:return CE(r,a,l);case 22:return EE(r,a,l);case 24:return Ha(a),u=wn($t),r===null?(f=lp(),f===null&&(f=ct,y=ap(),f.pooledCache=y,y.refCount++,y!==null&&(f.pooledCacheLanes|=l),f=y),a.memoizedState={parent:u,cache:f},Fp(a),Cs(a,$t,f)):((r.lanes&l)!==0&&(qp(r,a),Fc(a,null,null,l),Uc()),f=r.memoizedState,y=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Cs(a,$t,u)):(u=y.cache,Cs(a,$t,u),u!==f.cache&&Up(a,[$t],l,!0))),mn(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}var Lp=Ye(null),Ba=null,Rr=null;function Cs(r,a,l){nt(Lp,a._currentValue),a._currentValue=l}function Ir(r){r._currentValue=Lp.current,xt(Lp)}function Vp(r,a,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===l)break;r=r.return}}function Up(r,a,l,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var y=f.dependencies;if(y!==null){var x=f.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=f;for(var D=0;D<a.length;D++)if(A.context===a[D]){y.lanes|=l,A=y.alternate,A!==null&&(A.lanes|=l),Vp(y.return,l,r),u||(x=null);break e}y=A.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=l,y=x.alternate,y!==null&&(y.lanes|=l),Vp(x,l,r),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===r){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Lc(r,a,l,u){r=null;for(var f=a,y=!1;f!==null;){if(!y){if((f.flags&524288)!==0)y=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var A=f.type;Wn(f.pendingProps.value,x.value)||(r!==null?r.push(A):r=[A])}}else if(f===ss.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(tu):r=[tu])}f=f.return}r!==null&&Up(a,r,l,u),a.flags|=262144}function fd(r){for(r=r.firstContext;r!==null;){if(!Wn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ha(r){Ba=r,Rr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function wn(r){return RE(Ba,r)}function md(r,a){return Ba===null&&Ha(r),RE(r,a)}function RE(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Rr===null){if(r===null)throw Error(i(308));Rr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Rr=Rr.next=a;return l}var Ns=!1;function Fp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Rs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Is(r,a,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(vt&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=Qh(r),u0(r,null,l),a}return Wh(r,u,a,l),Qh(r)}function Vc(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,ds(r,l)}}function zp(r,a){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?f=y=x:y=y.next=x,l=l.next}while(l!==null);y===null?f=y=a:y=y.next=a}else f=y=a;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var Bp=!1;function Uc(){if(Bp){var r=Qo;if(r!==null)throw r}}function Fc(r,a,l,u){Bp=!1;var f=r.updateQueue;Ns=!1;var y=f.firstBaseUpdate,x=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,F=D.next;D.next=null,x===null?y=F:x.next=F,x=D;var X=r.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==x&&(A===null?X.firstBaseUpdate=F:A.next=F,X.lastBaseUpdate=D))}if(y!==null){var ie=f.baseState;x=0,X=F=D=null,A=y;do{var W=A.lane&-536870913,K=W!==A.lane;if(K?(He&W)===W:(u&W)===W){W!==0&&W===Wo&&(Bp=!0),X!==null&&(X=X.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ge=r,Ae=A;W=a;var Ct=l;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){ie=ge.call(Ct,ie,W);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,W=typeof ge=="function"?ge.call(Ct,ie,W):ge,W==null)break e;ie=I({},ie,W);break e;case 2:Ns=!0}}W=A.callback,W!==null&&(r.flags|=64,K&&(r.flags|=8192),K=f.callbacks,K===null?f.callbacks=[W]:K.push(W))}else K={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(F=X=K,D=ie):X=X.next=K,x|=W;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;K=A,A=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);X===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=X,y===null&&(f.shared.lanes=0),Ps|=x,r.lanes=x,r.memoizedState=ie}}function IE(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function DE(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)IE(l[r],a)}function qc(r,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&r)===r){u=void 0;var y=l.create,x=l.inst;u=y(),x.destroy=u}l=l.next}while(l!==f)}}catch(A){lt(a,a.return,A)}}function Ds(r,a,l){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var y=f.next;u=y;do{if((u.tag&r)===r){var x=u.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,f=a;var D=l;try{A()}catch(F){lt(f,D,F)}}}u=u.next}while(u!==y)}}catch(F){lt(a,a.return,F)}}function OE(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{DE(a,l)}catch(u){lt(r,r.return,u)}}}function kE(r,a,l){l.props=za(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){lt(r,a,u)}}function Ga(r,a){try{var l=r.ref;if(l!==null){var u=r.stateNode;switch(r.tag){case 26:case 27:case 5:var f=u;break;default:f=u}typeof l=="function"?r.refCleanup=l(f):l.current=f}}catch(y){lt(r,a,y)}}function Qn(r,a){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(f){lt(r,a,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){lt(r,a,f)}else l.current=null}function ME(r){var a=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(f){lt(r,r.return,f)}}function PE(r,a,l){try{var u=r.stateNode;r1(u,r.type,l,a),u[Gt]=a}catch(f){lt(r,r.return,f)}}function jE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function Hp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||jE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gp(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(r,a):l.insertBefore(r,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(r,l)):(a=l,a.appendChild(r)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Nd));else if(u!==4&&u!==27&&(r=r.child,r!==null))for(Gp(r,a,l),r=r.sibling;r!==null;)Gp(r,a,l),r=r.sibling}function pd(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(u!==4&&u!==27&&(r=r.child,r!==null))for(pd(r,a,l),r=r.sibling;r!==null;)pd(r,a,l),r=r.sibling}var Dr=!1,St=!1,Yp=!1,LE=typeof WeakSet=="function"?WeakSet:Set,on=null,VE=!1;function MR(r,a){if(r=r.containerInfo,Eg=Pd,r=t0(r),Qm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var x=0,A=-1,D=-1,F=0,X=0,ie=r,W=null;t:for(;;){for(var K;ie!==l||f!==0&&ie.nodeType!==3||(A=x+f),ie!==y||u!==0&&ie.nodeType!==3||(D=x+u),ie.nodeType===3&&(x+=ie.nodeValue.length),(K=ie.firstChild)!==null;)W=ie,ie=K;for(;;){if(ie===r)break t;if(W===l&&++F===f&&(A=x),W===y&&++X===u&&(D=x),(K=ie.nextSibling)!==null)break;ie=W,W=ie.parentNode}ie=K}l=A===-1||D===-1?null:{start:A,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(wg={focusedElem:r,selectionRange:l},Pd=!1,on=a;on!==null;)if(a=on,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,on=r;else for(;on!==null;){switch(a=on,y=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,l=a,f=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var ge=za(l.type,f,l.elementType===l.type);r=u.getSnapshotBeforeUpdate(ge,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){lt(l,l.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)Sg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Sg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,on=r;break}on=a.return}return ge=VE,VE=!1,ge}function UE(r,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:kr(r,l),u&4&&qc(5,l);break;case 1:if(kr(r,l),u&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(A){lt(l,l.return,A)}else{var f=za(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(f,a,r.__reactInternalSnapshotBeforeUpdate)}catch(A){lt(l,l.return,A)}}u&64&&OE(l),u&512&&Ga(l,l.return);break;case 3:if(kr(r,l),u&64&&(u=l.updateQueue,u!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{DE(u,r)}catch(A){lt(l,l.return,A)}}break;case 26:kr(r,l),u&512&&Ga(l,l.return);break;case 27:case 5:kr(r,l),a===null&&u&4&&ME(l),u&512&&Ga(l,l.return);break;case 12:kr(r,l);break;case 13:kr(r,l),u&4&&zE(r,l);break;case 22:if(f=l.memoizedState!==null||Dr,!f){a=a!==null&&a.memoizedState!==null||St;var y=Dr,x=St;Dr=f,(St=a)&&!x?Os(r,l,(l.subtreeFlags&8772)!==0):kr(r,l),Dr=y,St=x}u&512&&(l.memoizedProps.mode==="manual"?Ga(l,l.return):Qn(l,l.return));break;default:kr(r,l)}}function FE(r){var a=r.alternate;a!==null&&(r.alternate=null,FE(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&wa(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ut=null,$n=!1;function Or(r,a,l){for(l=l.child;l!==null;)qE(r,a,l),l=l.sibling}function qE(r,a,l){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(os,l)}catch{}switch(l.tag){case 26:St||Qn(l,a),Or(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:St||Qn(l,a);var u=Ut,f=$n;for(Ut=l.stateNode,Or(r,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);wa(l),Ut=u,$n=f;break;case 5:St||Qn(l,a);case 6:f=Ut;var y=$n;if(Ut=null,Or(r,a,l),Ut=f,$n=y,Ut!==null)if($n)try{r=Ut,u=l.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)}catch(x){lt(l,a,x)}else try{Ut.removeChild(l.stateNode)}catch(x){lt(l,a,x)}break;case 18:Ut!==null&&($n?(a=Ut,l=l.stateNode,a.nodeType===8?Tg(a.parentNode,l):a.nodeType===1&&Tg(a,l),su(a)):Tg(Ut,l.stateNode));break;case 4:u=Ut,f=$n,Ut=l.stateNode.containerInfo,$n=!0,Or(r,a,l),Ut=u,$n=f;break;case 0:case 11:case 14:case 15:St||Ds(2,l,a),St||Ds(4,l,a),Or(r,a,l);break;case 1:St||(Qn(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&kE(l,a,u)),Or(r,a,l);break;case 21:Or(r,a,l);break;case 22:St||Qn(l,a),St=(u=St)||l.memoizedState!==null,Or(r,a,l),St=u;break;default:Or(r,a,l)}}function zE(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{su(r)}catch(l){lt(a,a.return,l)}}function PR(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new LE),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new LE),a;default:throw Error(i(435,r.tag))}}function Wp(r,a){var l=PR(r);a.forEach(function(u){var f=QR.bind(null,r,u);l.has(u)||(l.add(u),u.then(f,f))})}function hi(r,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u],y=r,x=a,A=x;e:for(;A!==null;){switch(A.tag){case 27:case 5:Ut=A.stateNode,$n=!1;break e;case 3:Ut=A.stateNode.containerInfo,$n=!0;break e;case 4:Ut=A.stateNode.containerInfo,$n=!0;break e}A=A.return}if(Ut===null)throw Error(i(160));qE(y,x,f),Ut=null,$n=!1,y=f.alternate,y!==null&&(y.return=null),f.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)BE(a,r),a=a.sibling}var Ci=null;function BE(r,a){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:hi(a,r),di(r),u&4&&(Ds(3,r,r.return),qc(3,r),Ds(5,r,r.return));break;case 1:hi(a,r),di(r),u&512&&(St||l===null||Qn(l,l.return)),u&64&&Dr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var f=Ci;if(hi(a,r),di(r),u&512&&(St||l===null||Qn(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":y=f.getElementsByTagName("title")[0],(!y||y[ms]||y[nn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=f.createElement(u),f.head.insertBefore(y,f.querySelector("head > title"))),pn(y,u,l),y[nn]=r,yt(y),u=y;break e;case"link":var x=Mw("link","href",f).get(u+(l.href||""));if(x){for(var A=0;A<x.length;A++)if(y=x[A],y.getAttribute("href")===(l.href==null?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(A,1);break t}}y=f.createElement(u),pn(y,u,l),f.head.appendChild(y);break;case"meta":if(x=Mw("meta","content",f).get(u+(l.content||""))){for(A=0;A<x.length;A++)if(y=x[A],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(A,1);break t}}y=f.createElement(u),pn(y,u,l),f.head.appendChild(y);break;default:throw Error(i(468,u))}y[nn]=r,yt(y),u=y}r.stateNode=u}else Pw(f,r.type,r.stateNode);else r.stateNode=kw(f,u,r.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?Pw(f,r.type,r.stateNode):kw(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&PE(r,r.memoizedProps,l.memoizedProps)}break;case 27:if(u&4&&r.alternate===null){f=r.stateNode,y=r.memoizedProps;try{for(var D=f.firstChild;D;){var F=D.nextSibling,X=D.nodeName;D[ms]||X==="HEAD"||X==="BODY"||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=F}for(var ie=r.type,W=f.attributes;W.length;)f.removeAttributeNode(W[0]);pn(f,ie,y),f[nn]=r,f[Gt]=y}catch(ge){lt(r,r.return,ge)}}case 5:if(hi(a,r),di(r),u&512&&(St||l===null||Qn(l,l.return)),r.flags&32){f=r.stateNode;try{ni(f,"")}catch(ge){lt(r,r.return,ge)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,PE(r,f,l!==null?l.memoizedProps:f)),u&1024&&(Yp=!0);break;case 6:if(hi(a,r),di(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(ge){lt(r,r.return,ge)}}break;case 3:if(Od=null,f=Ci,Ci=Id(a.containerInfo),hi(a,r),Ci=f,di(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{su(a.containerInfo)}catch(ge){lt(r,r.return,ge)}Yp&&(Yp=!1,HE(r));break;case 4:u=Ci,Ci=Id(r.stateNode.containerInfo),hi(a,r),di(r),Ci=u;break;case 12:hi(a,r),di(r);break;case 13:hi(a,r),di(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ng=Ln()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Wp(r,u)));break;case 22:if(u&512&&(St||l===null||Qn(l,l.return)),D=r.memoizedState!==null,F=l!==null&&l.memoizedState!==null,X=Dr,ie=St,Dr=X||D,St=ie||F,hi(a,r),St=ie,Dr=X,di(r),a=r.stateNode,a._current=r,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,u&8192&&(a._visibility=D?a._visibility&-2:a._visibility|1,D&&(a=Dr||St,l===null||F||a||Zo(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(l=null,a=r;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){F=l=a;try{if(f=F.stateNode,D)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{x=F.stateNode,A=F.memoizedProps.style;var K=A!=null&&A.hasOwnProperty("display")?A.display:null;x.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ge){lt(F,F.return,ge)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=D?"":F.memoizedProps}catch(ge){lt(F,F.return,ge)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Wp(r,l))));break;case 19:hi(a,r),di(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Wp(r,u)));break;case 21:break;default:hi(a,r),di(r)}}function di(r){var a=r.flags;if(a&2){try{if(r.tag!==27){e:{for(var l=r.return;l!==null;){if(jE(l)){var u=l;break e}l=l.return}throw Error(i(160))}switch(u.tag){case 27:var f=u.stateNode,y=Hp(r);pd(r,y,f);break;case 5:var x=u.stateNode;u.flags&32&&(ni(x,""),u.flags&=-33);var A=Hp(r);pd(r,A,x);break;case 3:case 4:var D=u.stateNode.containerInfo,F=Hp(r);Gp(r,F,D);break;default:throw Error(i(161))}}}catch(X){lt(r,r.return,X)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function HE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;HE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function kr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)UE(r,a.alternate,a),a=a.sibling}function Zo(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Ds(4,a,a.return),Zo(a);break;case 1:Qn(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&kE(a,a.return,l),Zo(a);break;case 26:case 27:case 5:Qn(a,a.return),Zo(a);break;case 22:Qn(a,a.return),a.memoizedState===null&&Zo(a);break;default:Zo(a)}r=r.sibling}}function Os(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=r,y=a,x=y.flags;switch(y.tag){case 0:case 11:case 15:Os(f,y,l),qc(4,y);break;case 1:if(Os(f,y,l),u=y,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){lt(u,u.return,F)}if(u=y,f=u.updateQueue,f!==null){var A=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)IE(D[f],A)}catch(F){lt(u,u.return,F)}}l&&x&64&&OE(y),Ga(y,y.return);break;case 26:case 27:case 5:Os(f,y,l),l&&u===null&&x&4&&ME(y),Ga(y,y.return);break;case 12:Os(f,y,l);break;case 13:Os(f,y,l),l&&x&4&&zE(f,y);break;case 22:y.memoizedState===null&&Os(f,y,l),Ga(y,y.return);break;default:Os(f,y,l)}a=a.sibling}}function Qp(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Dc(l))}function $p(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Dc(r))}function ks(r,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)GE(r,a,l,u),a=a.sibling}function GE(r,a,l,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:ks(r,a,l,u),f&2048&&qc(9,a);break;case 3:ks(r,a,l,u),f&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Dc(r)));break;case 12:if(f&2048){ks(r,a,l,u),r=a.stateNode;try{var y=a.memoizedProps,x=y.id,A=y.onPostCommit;typeof A=="function"&&A(x,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){lt(a,a.return,D)}}else ks(r,a,l,u);break;case 23:break;case 22:y=a.stateNode,a.memoizedState!==null?y._visibility&4?ks(r,a,l,u):zc(r,a):y._visibility&4?ks(r,a,l,u):(y._visibility|=4,Jo(r,a,l,u,(a.subtreeFlags&10256)!==0)),f&2048&&Qp(a.alternate,a);break;case 24:ks(r,a,l,u),f&2048&&$p(a.alternate,a);break;default:ks(r,a,l,u)}}function Jo(r,a,l,u,f){for(f=f&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=r,x=a,A=l,D=u,F=x.flags;switch(x.tag){case 0:case 11:case 15:Jo(y,x,A,D,f),qc(8,x);break;case 23:break;case 22:var X=x.stateNode;x.memoizedState!==null?X._visibility&4?Jo(y,x,A,D,f):zc(y,x):(X._visibility|=4,Jo(y,x,A,D,f)),f&&F&2048&&Qp(x.alternate,x);break;case 24:Jo(y,x,A,D,f),f&&F&2048&&$p(x.alternate,x);break;default:Jo(y,x,A,D,f)}a=a.sibling}}function zc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,u=a,f=u.flags;switch(u.tag){case 22:zc(l,u),f&2048&&Qp(u.alternate,u);break;case 24:zc(l,u),f&2048&&$p(u.alternate,u);break;default:zc(l,u)}a=a.sibling}}var Bc=8192;function el(r){if(r.subtreeFlags&Bc)for(r=r.child;r!==null;)YE(r),r=r.sibling}function YE(r){switch(r.tag){case 26:el(r),r.flags&Bc&&r.memoizedState!==null&&x1(Ci,r.memoizedState,r.memoizedProps);break;case 5:el(r);break;case 3:case 4:var a=Ci;Ci=Id(r.stateNode.containerInfo),el(r),Ci=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=Bc,Bc=16777216,el(r),Bc=a):el(r));break;default:el(r)}}function WE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Hc(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];on=u,$E(u,r)}WE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)QE(r),r=r.sibling}function QE(r){switch(r.tag){case 0:case 11:case 15:Hc(r),r.flags&2048&&Ds(9,r,r.return);break;case 3:Hc(r);break;case 12:Hc(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&4&&(r.return===null||r.return.tag!==13)?(a._visibility&=-5,gd(r)):Hc(r);break;default:Hc(r)}}function gd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];on=u,$E(u,r)}WE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Ds(8,a,a.return),gd(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,gd(a));break;default:gd(a)}r=r.sibling}}function $E(r,a){for(;on!==null;){var l=on;switch(l.tag){case 0:case 11:case 15:Ds(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Dc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,on=u;else e:for(l=r;on!==null;){u=on;var f=u.sibling,y=u.return;if(FE(u),u===l){on=null;break e}if(f!==null){f.return=y,on=f;break e}on=y}}}function jR(r,a,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(r,a,l,u){return new jR(r,a,l,u)}function Kp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ms(r,a){var l=r.alternate;return l===null?(l=fi(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&31457280,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function KE(r,a){r.flags&=31457282;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function yd(r,a,l,u,f,y){var x=0;if(u=r,typeof r=="function")Kp(r)&&(x=1);else if(typeof r=="string")x=w1(r,l,Cn.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case m:return Ya(l.children,f,y,a);case p:x=8,f|=24;break;case v:return r=fi(12,l,a,f|2),r.elementType=v,r.lanes=y,r;case P:return r=fi(13,l,a,f),r.elementType=P,r.lanes=y,r;case L:return r=fi(19,l,a,f),r.elementType=L,r.lanes=y,r;case Q:return XE(l,f,y,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:case T:x=10;break e;case w:x=9;break e;case S:x=11;break e;case z:x=14;break e;case Y:x=16,u=null;break e}x=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return a=fi(x,l,a,f),a.elementType=r,a.type=u,a.lanes=y,a}function Ya(r,a,l,u){return r=fi(7,r,u,a),r.lanes=l,r}function XE(r,a,l,u){r=fi(22,r,u,a),r.elementType=Q,r.lanes=l;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=f._current;if(y===null)throw Error(i(456));if((f._pendingVisibility&2)===0){var x=bs(y,2);x!==null&&(f._pendingVisibility|=2,On(x,y,2))}},attach:function(){var y=f._current;if(y===null)throw Error(i(456));if((f._pendingVisibility&2)!==0){var x=bs(y,2);x!==null&&(f._pendingVisibility&=-3,On(x,y,2))}}};return r.stateNode=f,r}function Xp(r,a,l){return r=fi(6,r,null,a),r.lanes=l,r}function Zp(r,a,l){return a=fi(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function Mr(r){r.flags|=4}function ZE(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!jw(a)){if(a=ui.current,a!==null&&((He&4194176)===He?Qi!==null:(He&62914560)!==He&&(He&536870912)===0||a!==Qi))throw Nc=ip,p0;r.flags|=8192}}function _d(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?us():536870912,r.lanes|=a,nl|=a)}function Gc(r,a){if(!Qe)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function _t(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(a)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&31457280,u|=f.flags&31457280,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=l,a}function LR(r,a,l){var u=a.pendingProps;switch(tp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(a),null;case 1:return _t(a),null;case 3:return l=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ir($t),fr(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Tc(a)?Mr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ai!==null&&(ag(Ai),Ai=null))),_t(a),null;case 26:return l=a.memoizedState,r===null?(Mr(a),l!==null?(_t(a),ZE(a,l)):(_t(a),a.flags&=-16777217)):l?l!==r.memoizedState?(Mr(a),_t(a),ZE(a,l)):(_t(a),a.flags&=-16777217):(r.memoizedProps!==u&&Mr(a),_t(a),a.flags&=-16777217),null;case 27:wo(a),l=Jn.current;var f=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Mr(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return _t(a),null}r=Cn.current,Tc(a)?f0(a):(r=Nw(f,u,l),a.stateNode=r,Mr(a))}return _t(a),null;case 5:if(wo(a),l=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Mr(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return _t(a),null}if(r=Cn.current,Tc(a))f0(a);else{switch(f=Rd(Jn.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(l,{is:u.is}):f.createElement(l)}}r[nn]=a,r[Gt]=u;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=r;e:switch(pn(r,l,u),l){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Mr(a)}}return _t(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&Mr(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(r=Jn.current,Tc(a)){if(r=a.stateNode,l=a.memoizedProps,u=null,f=Dn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[nn]=a,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||bw(r.nodeValue,l)),r||ja(a)}else r=Rd(r).createTextNode(u),r[nn]=a,a.stateNode=r}return _t(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Tc(a),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[nn]=a}else Sc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_t(a),f=!1}else Ai!==null&&(ag(Ai),Ai=null),f=!0;if(!f)return a.flags&256?(Ar(a),a):(Ar(a),null)}if(Ar(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,r=r!==null&&r.memoizedState!==null,l){u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==f&&(u.flags|=2048)}return l!==r&&l&&(a.child.flags|=8192),_d(a,a.updateQueue),_t(a),null;case 4:return fr(),r===null&&yg(a.stateNode.containerInfo),_t(a),null;case 10:return Ir(a.type),_t(a),null;case 19:if(xt(Qt),f=a.memoizedState,f===null)return _t(a),null;if(u=(a.flags&128)!==0,y=f.rendering,y===null)if(u)Gc(f,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=td(r),y!==null){for(a.flags|=128,Gc(f,!1),r=y.updateQueue,a.updateQueue=r,_d(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)KE(l,r),l=l.sibling;return nt(Qt,Qt.current&1|2),a.child}r=r.sibling}f.tail!==null&&Ln()>vd&&(a.flags|=128,u=!0,Gc(f,!1),a.lanes=4194304)}else{if(!u)if(r=td(y),r!==null){if(a.flags|=128,u=!0,r=r.updateQueue,a.updateQueue=r,_d(a,r),Gc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Qe)return _t(a),null}else 2*Ln()-f.renderingStartTime>vd&&l!==536870912&&(a.flags|=128,u=!0,Gc(f,!1),a.lanes=4194304);f.isBackwards?(y.sibling=a.child,a.child=y):(r=f.last,r!==null?r.sibling=y:a.child=y,f.last=y)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Ln(),a.sibling=null,r=Qt.current,nt(Qt,u?r&1|2:r&1),a):(_t(a),null);case 22:case 23:return Ar(a),sp(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(_t(a),a.subtreeFlags&6&&(a.flags|=8192)):_t(a),l=a.updateQueue,l!==null&&_d(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),r!==null&&xt(Va),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ir($t),_t(a),null;case 25:return null}throw Error(i(156,a.tag))}function VR(r,a){switch(tp(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ir($t),fr(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return wo(a),null;case 13:if(Ar(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Sc()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return xt(Qt),null;case 4:return fr(),null;case 10:return Ir(a.type),null;case 22:case 23:return Ar(a),sp(),r!==null&&xt(Va),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Ir($t),null;case 25:return null;default:return null}}function JE(r,a){switch(tp(a),a.tag){case 3:Ir($t),fr();break;case 26:case 27:case 5:wo(a);break;case 4:fr();break;case 13:Ar(a);break;case 19:xt(Qt);break;case 10:Ir(a.type);break;case 22:case 23:Ar(a),sp(),r!==null&&xt(Va);break;case 24:Ir($t)}}var UR={getCacheForType:function(r){var a=wn($t),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l}},FR=typeof WeakMap=="function"?WeakMap:Map,vt=0,ct=null,je=null,He=0,ut=0,Kn=null,Pr=!1,tl=!1,Jp=!1,jr=0,At=0,Ps=0,Wa=0,eg=0,mi=0,nl=0,Yc=null,Ki=null,tg=!1,ng=0,vd=1/0,Ed=null,js=null,wd=!1,Qa=null,Wc=0,ig=0,rg=null,Qc=0,sg=null;function Xn(){if((vt&2)!==0&&He!==0)return He&-He;if(R.T!==null){var r=Wo;return r!==0?r:fg()}return Ch()}function ew(){mi===0&&(mi=(He&536870912)===0||Qe?ac():536870912);var r=ui.current;return r!==null&&(r.flags|=32),mi}function On(r,a,l){(r===ct&&ut===2||r.cancelPendingCommit!==null)&&(il(r,0),Lr(r,He,mi,!1)),Dt(r,l),((vt&2)===0||r!==ct)&&(r===ct&&((vt&2)===0&&(Wa|=l),At===4&&Lr(r,He,mi,!1)),Xi(r))}function tw(r,a,l){if((vt&6)!==0)throw Error(i(327));var u=!l&&(a&60)===0&&(a&r.expiredLanes)===0||cs(r,a),f=u?BR(r,a):cg(r,a,!0),y=u;do{if(f===0){tl&&!u&&Lr(r,a,0,!1);break}else if(f===6)Lr(r,a,0,!Pr);else{if(l=r.current.alternate,y&&!qR(l)){f=cg(r,a,!1),y=!1;continue}if(f===2){if(y=a,r.errorRecoveryDisabledLanes&y)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var A=r;f=Yc;var D=A.current.memoizedState.isDehydrated;if(D&&(il(A,x).flags|=256),x=cg(A,x,!1),x!==2){if(Jp&&!D){A.errorRecoveryDisabledLanes|=y,Wa|=y,f=4;break e}y=Ki,Ki=f,y!==null&&ag(y)}f=x}if(y=!1,f!==2)continue}}if(f===1){il(r,0),Lr(r,a,0,!0);break}e:{switch(u=r,f){case 0:case 1:throw Error(i(345));case 4:if((a&4194176)===a){Lr(u,a,mi,!Pr);break e}break;case 2:Ki=null;break;case 3:case 5:break;default:throw Error(i(329))}if(u.finishedWork=l,u.finishedLanes=a,(a&62914560)===a&&(y=ng+300-Ln(),10<y)){if(Lr(u,a,mi,!Pr),ei(u,0)!==0)break e;u.timeoutHandle=Sw(nw.bind(null,u,l,Ki,Ed,tg,a,mi,Wa,nl,Pr,2,-0,0),y);break e}nw(u,l,Ki,Ed,tg,a,mi,Wa,nl,Pr,0,-0,0)}}break}while(!0);Xi(r)}function ag(r){Ki===null?Ki=r:Ki.push.apply(Ki,r)}function nw(r,a,l,u,f,y,x,A,D,F,X,ie,W){var K=a.subtreeFlags;if((K&8192||(K&16785408)===16785408)&&(eu={stylesheets:null,count:0,unsuspend:b1},YE(a),a=T1(),a!==null)){r.cancelPendingCommit=a(cw.bind(null,r,l,u,f,x,A,D,1,ie,W)),Lr(r,y,x,!F);return}cw(r,l,u,f,x,A,D,X,ie,W)}function qR(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var f=l[u],y=f.getSnapshot;f=f.value;try{if(!Wn(y(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Lr(r,a,l,u){a&=~eg,a&=~Wa,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var f=a;0<f;){var y=31-Nn(f),x=1<<y;u[y]=-1,f&=~x}l!==0&&hs(r,l,a)}function bd(){return(vt&6)===0?($c(0),!1):!0}function og(){if(je!==null){if(ut===0)var r=je.return;else r=je,Rr=Ba=null,fp(r),Go=null,Rc=0,r=je;for(;r!==null;)JE(r.alternate,r),r=r.return;je=null}}function il(r,a){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,a1(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),og(),ct=r,je=l=Ms(r.current,null),He=a,ut=0,Kn=null,Pr=!1,tl=cs(r,a),Jp=!1,nl=mi=eg=Wa=Ps=At=0,Ki=Yc=null,tg=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var f=31-Nn(u),y=1<<f;a|=r[f],u&=~y}return jr=a,Yh(),l}function iw(r,a){Oe=null,R.H=$i,a===Cc?(a=_0(),ut=3):a===p0?(a=_0(),ut=4):ut=a===gE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Kn=a,je===null&&(At=1,dd(r,oi(a,r.current)))}function rw(){var r=R.H;return R.H=$i,r===null?$i:r}function sw(){var r=R.A;return R.A=UR,r}function lg(){At=4,Pr||(He&4194176)!==He&&ui.current!==null||(tl=!0),(Ps&134217727)===0&&(Wa&134217727)===0||ct===null||Lr(ct,He,mi,!1)}function cg(r,a,l){var u=vt;vt|=2;var f=rw(),y=sw();(ct!==r||He!==a)&&(Ed=null,il(r,a)),a=!1;var x=At;e:do try{if(ut!==0&&je!==null){var A=je,D=Kn;switch(ut){case 8:og(),x=6;break e;case 3:case 2:case 6:ui.current===null&&(a=!0);var F=ut;if(ut=0,Kn=null,rl(r,A,D,F),l&&tl){x=0;break e}break;default:F=ut,ut=0,Kn=null,rl(r,A,D,F)}}zR(),x=At;break}catch(X){iw(r,X)}while(!0);return a&&r.shellSuspendCounter++,Rr=Ba=null,vt=u,R.H=f,R.A=y,je===null&&(ct=null,He=0,Yh()),x}function zR(){for(;je!==null;)aw(je)}function BR(r,a){var l=vt;vt|=2;var u=rw(),f=sw();ct!==r||He!==a?(Ed=null,vd=Ln()+500,il(r,a)):tl=cs(r,a);e:do try{if(ut!==0&&je!==null){a=je;var y=Kn;t:switch(ut){case 1:ut=0,Kn=null,rl(r,a,y,1);break;case 2:if(g0(y)){ut=0,Kn=null,ow(a);break}a=function(){ut===2&&ct===r&&(ut=7),Xi(r)},y.then(a,a);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:g0(y)?(ut=0,Kn=null,ow(a)):(ut=0,Kn=null,rl(r,a,y,7));break;case 5:var x=null;switch(je.tag){case 26:x=je.memoizedState;case 5:case 27:var A=je;if(!x||jw(x)){ut=0,Kn=null;var D=A.sibling;if(D!==null)je=D;else{var F=A.return;F!==null?(je=F,xd(F)):je=null}break t}}ut=0,Kn=null,rl(r,a,y,5);break;case 6:ut=0,Kn=null,rl(r,a,y,6);break;case 8:og(),At=6;break e;default:throw Error(i(462))}}HR();break}catch(X){iw(r,X)}while(!0);return Rr=Ba=null,R.H=u,R.A=f,vt=l,je!==null?0:(ct=null,He=0,Yh(),At)}function HR(){for(;je!==null&&!Lm();)aw(je)}function aw(r){var a=NE(r.alternate,r,jr);r.memoizedProps=r.pendingProps,a===null?xd(r):je=a}function ow(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=bE(l,a,a.pendingProps,a.type,void 0,He);break;case 11:a=bE(l,a,a.pendingProps,a.type.render,a.ref,He);break;case 5:fp(a);default:JE(l,a),a=je=KE(a,jr),a=NE(l,a,jr)}r.memoizedProps=r.pendingProps,a===null?xd(r):je=a}function rl(r,a,l,u){Rr=Ba=null,fp(a),Go=null,Rc=0;var f=a.return;try{if(OR(r,f,a,l,He)){At=1,dd(r,oi(l,r.current)),je=null;return}}catch(y){if(f!==null)throw je=f,y;At=1,dd(r,oi(l,r.current)),je=null;return}a.flags&32768?(Qe||u===1?r=!0:tl||(He&536870912)!==0?r=!1:(Pr=r=!0,(u===2||u===3||u===6)&&(u=ui.current,u!==null&&u.tag===13&&(u.flags|=16384))),lw(a,r)):xd(a)}function xd(r){var a=r;do{if((a.flags&32768)!==0){lw(a,Pr);return}r=a.return;var l=LR(a.alternate,a,jr);if(l!==null){je=l;return}if(a=a.sibling,a!==null){je=a;return}je=a=r}while(a!==null);At===0&&(At=5)}function lw(r,a){do{var l=VR(r.alternate,r);if(l!==null){l.flags&=32767,je=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){je=r;return}je=r=l}while(r!==null);At=6,je=null}function cw(r,a,l,u,f,y,x,A,D,F){var X=R.T,ie=he.p;try{he.p=2,R.T=null,GR(r,a,l,u,ie,f,y,x,A,D,F)}finally{R.T=X,he.p=ie}}function GR(r,a,l,u,f,y,x,A){do sl();while(Qa!==null);if((vt&6)!==0)throw Error(i(327));var D=r.finishedWork;if(u=r.finishedLanes,D===null)return null;if(r.finishedWork=null,r.finishedLanes=0,D===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var F=D.lanes|D.childLanes;if(F|=Zm,Sh(r,u,F,y,x,A),r===ct&&(je=ct=null,He=0),(D.subtreeFlags&10256)===0&&(D.flags&10256)===0||wd||(wd=!0,ig=F,rg=l,$R(mr,function(){return sl(),null})),l=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||l?(l=R.T,R.T=null,y=he.p,he.p=2,x=vt,vt|=4,MR(r,D),BE(D,r),pR(wg,r.containerInfo),Pd=!!Eg,wg=Eg=null,r.current=D,UE(r,D.alternate,D),nc(),vt=x,he.p=y,R.T=l):r.current=D,wd?(wd=!1,Qa=r,Wc=u):uw(r,F),F=r.pendingLanes,F===0&&(js=null),rc(D.stateNode),Xi(r),a!==null)for(f=r.onRecoverableError,D=0;D<a.length;D++)F=a[D],f(F.value,{componentStack:F.stack});return(Wc&3)!==0&&sl(),F=r.pendingLanes,(u&4194218)!==0&&(F&42)!==0?r===sg?Qc++:(Qc=0,sg=r):Qc=0,$c(0),null}function uw(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Dc(a)))}function sl(){if(Qa!==null){var r=Qa,a=ig;ig=0;var l=Ah(Wc),u=R.T,f=he.p;try{if(he.p=32>l?32:l,R.T=null,Qa===null)var y=!1;else{l=rg,rg=null;var x=Qa,A=Wc;if(Qa=null,Wc=0,(vt&6)!==0)throw Error(i(331));var D=vt;if(vt|=4,QE(x.current),GE(x,x.current,A,l),vt=D,$c(0,!1),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(os,x)}catch{}y=!0}return y}finally{he.p=f,R.T=u,uw(r,a)}}return!1}function hw(r,a,l){a=oi(l,a),a=Cp(r.stateNode,a,2),r=Is(r,a,2),r!==null&&(Dt(r,2),Xi(r))}function lt(r,a,l){if(r.tag===3)hw(r,r,l);else for(;a!==null;){if(a.tag===3){hw(a,r,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(js===null||!js.has(u))){r=oi(l,r),l=mE(2),u=Is(a,l,2),u!==null&&(pE(l,u,a,r),Dt(u,2),Xi(u));break}}a=a.return}}function ug(r,a,l){var u=r.pingCache;if(u===null){u=r.pingCache=new FR;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(l)||(Jp=!0,f.add(l),r=YR.bind(null,r,a,l),a.then(r,r))}function YR(r,a,l){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ct===r&&(He&l)===l&&(At===4||At===3&&(He&62914560)===He&&300>Ln()-ng?(vt&2)===0&&il(r,0):eg|=l,nl===He&&(nl=0)),Xi(r)}function dw(r,a){a===0&&(a=us()),r=bs(r,a),r!==null&&(Dt(r,a),Xi(r))}function WR(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),dw(r,l)}function QR(r,a){var l=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),dw(r,l)}function $R(r,a){return _a(r,a)}var Td=null,al=null,hg=!1,Sd=!1,dg=!1,$a=0;function Xi(r){r!==al&&r.next===null&&(al===null?Td=al=r:al=al.next=r),Sd=!0,hg||(hg=!0,XR(KR))}function $c(r,a){if(!dg&&Sd){dg=!0;do for(var l=!1,u=Td;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var y=0;else{var x=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-Nn(42|r)+1)-1,y&=f&~(x&~A),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(l=!0,pw(u,y))}else y=He,y=ei(u,u===ct?y:0),(y&3)===0||cs(u,y)||(l=!0,pw(u,y));u=u.next}while(l);dg=!1}}function KR(){Sd=hg=!1;var r=0;$a!==0&&(s1()&&(r=$a),$a=0);for(var a=Ln(),l=null,u=Td;u!==null;){var f=u.next,y=fw(u,a);y===0?(u.next=null,l===null?Td=f:l.next=f,f===null&&(al=l)):(l=u,(r!==0||(y&3)!==0)&&(Sd=!0)),u=f}$c(r)}function fw(r,a){for(var l=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var x=31-Nn(y),A=1<<x,D=f[x];D===-1?((A&l)===0||(A&u)!==0)&&(f[x]=To(A,a)):D<=a&&(r.expiredLanes|=A),y&=~A}if(a=ct,l=He,l=ei(r,r===a?l:0),u=r.callbackNode,l===0||r===a&&ut===2||r.cancelPendingCommit!==null)return u!==null&&u!==null&&xo(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||cs(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(u!==null&&xo(u),Ah(l)){case 2:case 8:l=tn;break;case 32:l=mr;break;case 268435456:l=ic;break;default:l=mr}return u=mw.bind(null,r),l=_a(l,u),r.callbackPriority=a,r.callbackNode=l,a}return u!==null&&u!==null&&xo(u),r.callbackPriority=2,r.callbackNode=null,2}function mw(r,a){var l=r.callbackNode;if(sl()&&r.callbackNode!==l)return null;var u=He;return u=ei(r,r===ct?u:0),u===0?null:(tw(r,u,a),fw(r,Ln()),r.callbackNode!=null&&r.callbackNode===l?mw.bind(null,r):null)}function pw(r,a){if(sl())return null;tw(r,a,!0)}function XR(r){o1(function(){(vt&6)!==0?_a(Ht,r):r()})}function fg(){return $a===0&&($a=ac()),$a}function gw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Fi(""+r)}function yw(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function ZR(r,a,l,u,f){if(a==="submit"&&l&&l.stateNode===f){var y=gw((f[Gt]||null).action),x=u.submitter;x&&(a=(a=x[Gt]||null)?gw(a.formAction):x.getAttribute("formAction"),a!==null&&(y=a,x=null));var A=new Do("action","action",null,u,f);r.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($a!==0){var D=x?yw(f,x):new FormData(f);bp(l,{pending:!0,data:D,method:f.method,action:y},null,D)}}else typeof y=="function"&&(A.preventDefault(),D=x?yw(f,x):new FormData(f),bp(l,{pending:!0,data:D,method:f.method,action:y},y,D))},currentTarget:f}]})}}for(var mg=0;mg<c0.length;mg++){var pg=c0[mg],JR=pg.toLowerCase(),e1=pg[0].toUpperCase()+pg.slice(1);Si(JR,"on"+e1)}Si(r0,"onAnimationEnd"),Si(s0,"onAnimationIteration"),Si(a0,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(yR,"onTransitionRun"),Si(_R,"onTransitionStart"),Si(vR,"onTransitionCancel"),Si(o0,"onTransitionEnd"),Vn("onMouseEnter",["mouseout","mouseover"]),Vn("onMouseLeave",["mouseout","mouseover"]),Vn("onPointerEnter",["pointerout","pointerover"]),Vn("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kc));function _w(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],f=u.event;u=u.listeners;e:{var y=void 0;if(a)for(var x=u.length-1;0<=x;x--){var A=u[x],D=A.instance,F=A.currentTarget;if(A=A.listener,D!==y&&f.isPropagationStopped())break e;y=A,f.currentTarget=F;try{y(f)}catch(X){hd(X)}f.currentTarget=null,y=D}else for(x=0;x<u.length;x++){if(A=u[x],D=A.instance,F=A.currentTarget,A=A.listener,D!==y&&f.isPropagationStopped())break e;y=A,f.currentTarget=F;try{y(f)}catch(X){hd(X)}f.currentTarget=null,y=D}}}}function Fe(r,a){var l=a[Ea];l===void 0&&(l=a[Ea]=new Set);var u=r+"__bubble";l.has(u)||(vw(a,r,2,!1),l.add(u))}function gg(r,a,l){var u=0;a&&(u|=4),vw(l,r,u,a)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function yg(r){if(!r[Ad]){r[Ad]=!0,lc.forEach(function(l){l!=="selectionchange"&&(t1.has(l)||gg(l,!1,r),gg(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Ad]||(a[Ad]=!0,gg("selectionchange",!1,a))}}function vw(r,a,l,u){switch(zw(a)){case 2:var f=C1;break;case 8:f=N1;break;default:f=Ig}l=f.bind(null,a,l,r),f=void 0,!ri||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(a,l,{capture:!0,passive:f}):r.addEventListener(a,l,!0):f!==void 0?r.addEventListener(a,l,{passive:f}):r.addEventListener(a,l,!1)}function _g(r,a,l,u,f){var y=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var A=u.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(x===4)for(x=u.return;x!==null;){var D=x.tag;if((D===3||D===4)&&(D=x.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;x=x.return}for(;A!==null;){if(x=Ti(A),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){u=y=x;continue e}A=A.parentNode}}u=u.return}Dh(function(){var F=y,X=Io(l),ie=[];e:{var W=l0.get(r);if(W!==void 0){var K=Do,ge=r;switch(r){case"keypress":if(zi(l)===0)break e;case"keydown":case"keyup":K=Lo;break;case"focusin":ge="focus",K=Mo;break;case"focusout":ge="blur",K=Mo;break;case"beforeblur":case"afterblur":K=Mo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Uh;break;case r0:case s0:case a0:K=Po;break;case o0:K=qh;break;case"scroll":case"scrollend":K=Oh;break;case"wheel":K=Vo;break;case"copy":case"cut":case"paste":K=jo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ec;break;case"toggle":case"beforetoggle":K=Bh}var Ae=(a&4)!==0,Ct=!Ae&&(r==="scroll"||r==="scrollend"),B=Ae?W!==null?W+"Capture":null:W;Ae=[];for(var U=F,G;U!==null;){var J=U;if(G=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||G===null||B===null||(J=Sa(U,B),J!=null&&Ae.push(Xc(U,J,G))),Ct)break;U=U.return}0<Ae.length&&(W=new K(W,ge,null,l,X),ie.push({event:W,listeners:Ae}))}}if((a&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",W&&l!==ii&&(ge=l.relatedTarget||l.fromElement)&&(Ti(ge)||ge[pr]))break e;if((K||W)&&(W=X.window===X?X:(W=X.ownerDocument)?W.defaultView||W.parentWindow:window,K?(ge=l.relatedTarget||l.toElement,K=F,ge=ge?Ti(ge):null,ge!==null&&(Ct=pe(ge),Ae=ge.tag,ge!==Ct||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):(K=null,ge=F),K!==ge)){if(Ae=si,J="onMouseLeave",B="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=Ec,J="onPointerLeave",B="onPointerEnter",U="pointer"),Ct=K==null?W:ps(K),G=ge==null?W:ps(ge),W=new Ae(J,U+"leave",K,l,X),W.target=Ct,W.relatedTarget=G,J=null,Ti(X)===F&&(Ae=new Ae(B,U+"enter",ge,l,X),Ae.target=G,Ae.relatedTarget=Ct,J=Ae),Ct=J,K&&ge)t:{for(Ae=K,B=ge,U=0,G=Ae;G;G=ol(G))U++;for(G=0,J=B;J;J=ol(J))G++;for(;0<U-G;)Ae=ol(Ae),U--;for(;0<G-U;)B=ol(B),G--;for(;U--;){if(Ae===B||B!==null&&Ae===B.alternate)break t;Ae=ol(Ae),B=ol(B)}Ae=null}else Ae=null;K!==null&&Ew(ie,W,K,Ae,!1),ge!==null&&Ct!==null&&Ew(ie,Ct,ge,Ae,!0)}}e:{if(W=F?ps(F):window,K=W.nodeName&&W.nodeName.toLowerCase(),K==="select"||K==="input"&&W.type==="file")var me=Wv;else if(Wt(W))if(Qv)me=fR;else{me=hR;var ke=uR}else K=W.nodeName,!K||K.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?F&&fc(F.elementType)&&(me=Wv):me=dR;if(me&&(me=me(r,F))){xr(ie,me,l,X);break e}ke&&ke(r,W,F),r==="focusout"&&F&&W.type==="number"&&F.memoizedProps.value!=null&&Ro(W,"number",W.value)}switch(ke=F?ps(F):window,r){case"focusin":(Wt(ke)||ke.contentEditable==="true")&&(Uo=ke,$m=F,xc=null);break;case"focusout":xc=$m=Uo=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,n0(ie,l,X);break;case"selectionchange":if(gR)break;case"keydown":case"keyup":n0(ie,l,X)}var _e;if(Gi)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ze?$(r,l)&&(we="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(b&&l.locale!=="ko"&&(ze||we!=="onCompositionStart"?we==="onCompositionEnd"&&ze&&(_e=pc()):(qi=X,ws="value"in qi?qi.value:qi.textContent,ze=!0)),ke=Cd(F,we),0<ke.length&&(we=new _c(we,r,null,l,X),ie.push({event:we,listeners:ke}),_e?we.data=_e:(_e=oe(l),_e!==null&&(we.data=_e)))),(_e=_?Yt(r,l):Be(r,l))&&(we=Cd(F,"onBeforeInput"),0<we.length&&(ke=new _c("onBeforeInput","beforeinput",null,l,X),ie.push({event:ke,listeners:we}),ke.data=_e)),ZR(ie,r,F,l,X)}_w(ie,a)})}function Xc(r,a,l){return{instance:r,listener:a,currentTarget:l}}function Cd(r,a){for(var l=a+"Capture",u=[];r!==null;){var f=r,y=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||y===null||(f=Sa(r,l),f!=null&&u.unshift(Xc(r,f,y)),f=Sa(r,a),f!=null&&u.push(Xc(r,f,y))),r=r.return}return u}function ol(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ew(r,a,l,u,f){for(var y=a._reactName,x=[];l!==null&&l!==u;){var A=l,D=A.alternate,F=A.stateNode;if(A=A.tag,D!==null&&D===u)break;A!==5&&A!==26&&A!==27||F===null||(D=F,f?(F=Sa(l,y),F!=null&&x.unshift(Xc(l,F,D))):f||(F=Sa(l,y),F!=null&&x.push(Xc(l,F,D)))),l=l.return}x.length!==0&&r.push({event:a,listeners:x})}var n1=/\r\n?/g,i1=/\u0000|\uFFFD/g;function ww(r){return(typeof r=="string"?r:""+r).replace(n1,`
`).replace(i1,"")}function bw(r,a){return a=ww(a),ww(r)===a}function Nd(){}function at(r,a,l,u,f,y){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||ni(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&ni(r,""+u);break;case"className":_s(r,"class",u);break;case"tabIndex":_s(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":_s(r,l,u);break;case"style":Ih(r,u,y);break;case"data":if(a!=="object"){_s(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Fi(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&at(r,a,"name",f.name,f,null),at(r,a,"formEncType",f.formEncType,f,null),at(r,a,"formMethod",f.formMethod,f,null),at(r,a,"formTarget",f.formTarget,f,null)):(at(r,a,"encType",f.encType,f,null),at(r,a,"method",f.method,f,null),at(r,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=Fi(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Nd);break;case"onScroll":u!=null&&Fe("scroll",r);break;case"onScrollEnd":u!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=Fi(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),ys(r,"popover",u);break;case"xlinkActuate":ti(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ti(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ti(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ti(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ti(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ti(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ti(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ti(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ti(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ys(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=zm.get(l)||l,ys(r,l,u))}}function vg(r,a,l,u,f,y){switch(l){case"style":Ih(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?ni(r,u):(typeof u=="number"||typeof u=="bigint")&&ni(r,""+u);break;case"onScroll":u!=null&&Fe("scroll",r);break;case"onScrollEnd":u!=null&&Fe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Nd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),y=r[Gt]||null,y=y!=null?y[l]:null,typeof y=="function"&&r.removeEventListener(a,y,f),typeof u=="function")){typeof y!="function"&&y!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,u,f);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):ys(r,l,u)}}}function pn(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var u=!1,f=!1,y;for(y in l)if(l.hasOwnProperty(y)){var x=l[y];if(x!=null)switch(y){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:at(r,a,y,x,l,null)}}f&&at(r,a,"srcSet",l.srcSet,l,null),u&&at(r,a,"src",l.src,l,null);return;case"input":Fe("invalid",r);var A=y=x=f=null,D=null,F=null;for(u in l)if(l.hasOwnProperty(u)){var X=l[u];if(X!=null)switch(u){case"name":f=X;break;case"type":x=X;break;case"checked":D=X;break;case"defaultChecked":F=X;break;case"value":y=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,a));break;default:at(r,a,u,X,l,null)}}xa(r,y,A,D,F,x,f,!1),ba(r);return;case"select":Fe("invalid",r),u=x=y=null;for(f in l)if(l.hasOwnProperty(f)&&(A=l[f],A!=null))switch(f){case"value":y=A;break;case"defaultValue":x=A;break;case"multiple":u=A;default:at(r,a,f,A,l,null)}a=y,l=x,r.multiple=!!u,a!=null?We(r,!!u,a,!1):l!=null&&We(r,!!u,l,!0);return;case"textarea":Fe("invalid",r),y=f=u=null;for(x in l)if(l.hasOwnProperty(x)&&(A=l[x],A!=null))switch(x){case"value":u=A;break;case"defaultValue":f=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:at(r,a,x,A,l,null)}Es(r,u,f,y),ba(r);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(u=l[D],u!=null))switch(D){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:at(r,a,D,u,l,null)}return;case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(u=0;u<Kc.length;u++)Fe(Kc[u],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:at(r,a,F,u,l,null)}return;default:if(fc(a)){for(X in l)l.hasOwnProperty(X)&&(u=l[X],u!==void 0&&vg(r,a,X,u,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(u=l[A],u!=null&&at(r,a,A,u,l,null))}function r1(r,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,y=null,x=null,A=null,D=null,F=null,X=null;for(K in l){var ie=l[K];if(l.hasOwnProperty(K)&&ie!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=ie;default:u.hasOwnProperty(K)||at(r,a,K,null,u,ie)}}for(var W in u){var K=u[W];if(ie=l[W],u.hasOwnProperty(W)&&(K!=null||ie!=null))switch(W){case"type":y=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":X=K;break;case"value":x=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:K!==ie&&at(r,a,W,K,u,ie)}}vs(r,x,A,D,F,X,y,f);return;case"select":K=x=A=W=null;for(y in l)if(D=l[y],l.hasOwnProperty(y)&&D!=null)switch(y){case"value":break;case"multiple":K=D;default:u.hasOwnProperty(y)||at(r,a,y,null,u,D)}for(f in u)if(y=u[f],D=l[f],u.hasOwnProperty(f)&&(y!=null||D!=null))switch(f){case"value":W=y;break;case"defaultValue":A=y;break;case"multiple":x=y;default:y!==D&&at(r,a,f,y,u,D)}a=A,l=x,u=K,W!=null?We(r,!!l,W,!1):!!u!=!!l&&(a!=null?We(r,!!l,a,!0):We(r,!!l,l?[]:"",!1));return;case"textarea":K=W=null;for(A in l)if(f=l[A],l.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:at(r,a,A,null,u,f)}for(x in u)if(f=u[x],y=l[x],u.hasOwnProperty(x)&&(f!=null||y!=null))switch(x){case"value":W=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==y&&at(r,a,x,f,u,y)}Ta(r,W,K);return;case"option":for(var ge in l)if(W=l[ge],l.hasOwnProperty(ge)&&W!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":r.selected=!1;break;default:at(r,a,ge,null,u,W)}for(D in u)if(W=u[D],K=l[D],u.hasOwnProperty(D)&&W!==K&&(W!=null||K!=null))switch(D){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:at(r,a,D,W,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)W=l[Ae],l.hasOwnProperty(Ae)&&W!=null&&!u.hasOwnProperty(Ae)&&at(r,a,Ae,null,u,W);for(F in u)if(W=u[F],K=l[F],u.hasOwnProperty(F)&&W!==K&&(W!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:at(r,a,F,W,u,K)}return;default:if(fc(a)){for(var Ct in l)W=l[Ct],l.hasOwnProperty(Ct)&&W!==void 0&&!u.hasOwnProperty(Ct)&&vg(r,a,Ct,void 0,u,W);for(X in u)W=u[X],K=l[X],!u.hasOwnProperty(X)||W===K||W===void 0&&K===void 0||vg(r,a,X,W,u,K);return}}for(var B in l)W=l[B],l.hasOwnProperty(B)&&W!=null&&!u.hasOwnProperty(B)&&at(r,a,B,null,u,W);for(ie in u)W=u[ie],K=l[ie],!u.hasOwnProperty(ie)||W===K||W==null&&K==null||at(r,a,ie,W,u,K)}var Eg=null,wg=null;function Rd(r){return r.nodeType===9?r:r.ownerDocument}function xw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tw(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function bg(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var xg=null;function s1(){var r=window.event;return r&&r.type==="popstate"?r===xg?!1:(xg=r,!0):(xg=null,!1)}var Sw=typeof setTimeout=="function"?setTimeout:void 0,a1=typeof clearTimeout=="function"?clearTimeout:void 0,Aw=typeof Promise=="function"?Promise:void 0,o1=typeof queueMicrotask=="function"?queueMicrotask:typeof Aw<"u"?function(r){return Aw.resolve(null).then(r).catch(l1)}:Sw;function l1(r){setTimeout(function(){throw r})}function Tg(r,a){var l=a,u=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(u===0){r.removeChild(f),su(a);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=f}while(l);su(a)}function Sg(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Sg(l),wa(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function c1(r,a,l,u){for(;r.nodeType===1;){var f=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[ms])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==f.rel||r.getAttribute("href")!==(f.href==null?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Ni(r.nextSibling),r===null)break}return null}function u1(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Ni(r.nextSibling),r===null))return null;return r}function Ni(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}function Cw(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}function Nw(r,a,l){switch(a=Rd(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var pi=new Map,Rw=new Set;function Id(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Vr=he.d;he.d={f:h1,r:d1,D:f1,C:m1,L:p1,m:g1,X:_1,S:y1,M:v1};function h1(){var r=Vr.f(),a=bd();return r||a}function d1(r){var a=gr(r);a!==null&&a.tag===5&&a.type==="form"?nE(a):Vr.r(r)}var ll=typeof document>"u"?null:document;function Iw(r,a,l){var u=ll;if(u&&typeof a=="string"&&a){var f=Tt(a);f='link[rel="'+r+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),Rw.has(f)||(Rw.add(f),r={rel:r,crossOrigin:l,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),pn(a,"link",r),yt(a),u.head.appendChild(a)))}}function f1(r){Vr.D(r),Iw("dns-prefetch",r,null)}function m1(r,a){Vr.C(r,a),Iw("preconnect",r,a)}function p1(r,a,l){Vr.L(r,a,l);var u=ll;if(u&&r&&a){var f='link[rel="preload"][as="'+Tt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Tt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Tt(l.imageSizes)+'"]')):f+='[href="'+Tt(r)+'"]';var y=f;switch(a){case"style":y=cl(r);break;case"script":y=ul(r)}pi.has(y)||(r=I({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),pi.set(y,r),u.querySelector(f)!==null||a==="style"&&u.querySelector(Zc(y))||a==="script"&&u.querySelector(Jc(y))||(a=u.createElement("link"),pn(a,"link",r),yt(a),u.head.appendChild(a)))}}function g1(r,a){Vr.m(r,a);var l=ll;if(l&&r){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Tt(u)+'"][href="'+Tt(r)+'"]',y=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ul(r)}if(!pi.has(y)&&(r=I({rel:"modulepreload",href:r},a),pi.set(y,r),l.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Jc(y)))return}u=l.createElement("link"),pn(u,"link",r),yt(u),l.head.appendChild(u)}}}function y1(r,a,l){Vr.S(r,a,l);var u=ll;if(u&&r){var f=gs(u).hoistableStyles,y=cl(r);a=a||"default";var x=f.get(y);if(!x){var A={loading:0,preload:null};if(x=u.querySelector(Zc(y)))A.loading=5;else{r=I({rel:"stylesheet",href:r,"data-precedence":a},l),(l=pi.get(y))&&Ag(r,l);var D=x=u.createElement("link");yt(D),pn(D,"link",r),D._p=new Promise(function(F,X){D.onload=F,D.onerror=X}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Dd(x,a,u)}x={type:"stylesheet",instance:x,count:1,state:A},f.set(y,x)}}}function _1(r,a){Vr.X(r,a);var l=ll;if(l&&r){var u=gs(l).hoistableScripts,f=ul(r),y=u.get(f);y||(y=l.querySelector(Jc(f)),y||(r=I({src:r,async:!0},a),(a=pi.get(f))&&Cg(r,a),y=l.createElement("script"),yt(y),pn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(f,y))}}function v1(r,a){Vr.M(r,a);var l=ll;if(l&&r){var u=gs(l).hoistableScripts,f=ul(r),y=u.get(f);y||(y=l.querySelector(Jc(f)),y||(r=I({src:r,async:!0,type:"module"},a),(a=pi.get(f))&&Cg(r,a),y=l.createElement("script"),yt(y),pn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(f,y))}}function Dw(r,a,l,u){var f=(f=Jn.current)?Id(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=cl(l.href),l=gs(f).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=cl(l.href);var y=gs(f).hoistableStyles,x=y.get(r);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,x),(y=f.querySelector(Zc(r)))&&!y._p&&(x.instance=y,x.state.loading=5),pi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},pi.set(r,l),y||E1(f,r,l,x.state))),a&&u===null)throw Error(i(528,""));return x}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ul(l),l=gs(f).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function cl(r){return'href="'+Tt(r)+'"'}function Zc(r){return'link[rel="stylesheet"]['+r+"]"}function Ow(r){return I({},r,{"data-precedence":r.precedence,precedence:null})}function E1(r,a,l,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),pn(a,"link",l),yt(a),r.head.appendChild(a))}function ul(r){return'[src="'+Tt(r)+'"]'}function Jc(r){return"script[async]"+r}function kw(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+Tt(l.href)+'"]');if(u)return a.instance=u,yt(u),u;var f=I({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),yt(u),pn(u,"style",f),Dd(u,l.precedence,r),a.instance=u;case"stylesheet":f=cl(l.href);var y=r.querySelector(Zc(f));if(y)return a.state.loading|=4,a.instance=y,yt(y),y;u=Ow(l),(f=pi.get(f))&&Ag(u,f),y=(r.ownerDocument||r).createElement("link"),yt(y);var x=y;return x._p=new Promise(function(A,D){x.onload=A,x.onerror=D}),pn(y,"link",u),a.state.loading|=4,Dd(y,l.precedence,r),a.instance=y;case"script":return y=ul(l.src),(f=r.querySelector(Jc(y)))?(a.instance=f,yt(f),f):(u=l,(f=pi.get(y))&&(u=I({},l),Cg(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),yt(f),pn(f,"link",u),r.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Dd(u,l.precedence,r));return a.instance}function Dd(r,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,y=f,x=0;x<u.length;x++){var A=u[x];if(A.dataset.precedence===a)y=A;else if(y!==f)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function Ag(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Cg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Od=null;function Mw(r,a,l){if(Od===null){var u=new Map,f=Od=new Map;f.set(l,u)}else f=Od,u=f.get(l),u||(u=new Map,f.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),f=0;f<l.length;f++){var y=l[f];if(!(y[ms]||y[nn]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(a)||"";x=r+x;var A=u.get(x);A?A.push(y):u.set(x,[y])}}return u}function Pw(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function w1(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function jw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var eu=null;function b1(){}function x1(r,a,l){if(eu===null)throw Error(i(475));var u=eu;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=cl(l.href),y=r.querySelector(Zc(f));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=kd.bind(u),r.then(u,u)),a.state.loading|=4,a.instance=y,yt(y);return}y=r.ownerDocument||r,l=Ow(l),(f=pi.get(f))&&Ag(l,f),y=y.createElement("link"),yt(y);var x=y;x._p=new Promise(function(A,D){x.onload=A,x.onerror=D}),pn(y,"link",l),a.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=kd.bind(u),r.addEventListener("load",a),r.addEventListener("error",a))}}function T1(){if(eu===null)throw Error(i(475));var r=eu;return r.stylesheets&&r.count===0&&Ng(r,r.stylesheets),0<r.count?function(a){var l=setTimeout(function(){if(r.stylesheets&&Ng(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(l)}}:null}function kd(){if(this.count--,this.count===0){if(this.stylesheets)Ng(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Md=null;function Ng(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Md=new Map,a.forEach(S1,r),Md=null,kd.call(r))}function S1(r,a){if(!(a.state.loading&4)){var l=Md.get(r);if(l)var u=l.get(null);else{l=new Map,Md.set(r,l);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<f.length;y++){var x=f[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),u=x)}u&&l.set(null,u)}f=a.instance,x=f.getAttribute("data-precedence"),y=l.get(x)||u,y===u&&l.set(null,f),l.set(x,f),this.count++,u=kd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),y?y.parentNode.insertBefore(f,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),a.state.loading|=4}}var tu={$$typeof:T,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function A1(r,a,l,u,f,y,x,A){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=So(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.hiddenUpdates=So(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Lw(r,a,l,u,f,y,x,A,D,F,X,ie){return r=new A1(r,a,l,x,A,D,F,ie),a=1,y===!0&&(a|=24),y=fi(3,null,null,a),r.current=y,y.stateNode=r,a=ap(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:a},Fp(y),r}function Vw(r){return r?(r=zo,r):zo}function Uw(r,a,l,u,f,y){f=Vw(f),u.context===null?u.context=f:u.pendingContext=f,u=Rs(a),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Is(r,u,a),l!==null&&(On(l,r,a),Vc(l,r,a))}function Fw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Rg(r,a){Fw(r,a),(r=r.alternate)&&Fw(r,a)}function qw(r){if(r.tag===13){var a=bs(r,67108864);a!==null&&On(a,r,67108864),Rg(r,67108864)}}var Pd=!0;function C1(r,a,l,u){var f=R.T;R.T=null;var y=he.p;try{he.p=2,Ig(r,a,l,u)}finally{he.p=y,R.T=f}}function N1(r,a,l,u){var f=R.T;R.T=null;var y=he.p;try{he.p=8,Ig(r,a,l,u)}finally{he.p=y,R.T=f}}function Ig(r,a,l,u){if(Pd){var f=Dg(u);if(f===null)_g(r,a,u,jd,l),Bw(r,u);else if(I1(f,r,a,l,u))u.stopPropagation();else if(Bw(r,u),a&4&&-1<R1.indexOf(r)){for(;f!==null;){var y=gr(f);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=xi(y.pendingLanes);if(x!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var D=1<<31-Nn(x);A.entanglements[1]|=D,x&=~D}Xi(y),(vt&6)===0&&(vd=Ln()+500,$c(0))}}break;case 13:A=bs(y,2),A!==null&&On(A,y,2),bd(),Rg(y,2)}if(y=Dg(u),y===null&&_g(r,a,u,jd,l),y===f)break;f=y}f!==null&&u.stopPropagation()}else _g(r,a,u,null,l)}}function Dg(r){return r=Io(r),Og(r)}var jd=null;function Og(r){if(jd=null,r=Ti(r),r!==null){var a=pe(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=Je(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return jd=r,null}function zw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wh()){case Ht:return 2;case tn:return 8;case mr:case bh:return 32;case ic:return 268435456;default:return 32}default:return 32}}var kg=!1,Ls=null,Vs=null,Us=null,nu=new Map,iu=new Map,Fs=[],R1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bw(r,a){switch(r){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":nu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":iu.delete(a.pointerId)}}function ru(r,a,l,u,f,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[f]},a!==null&&(a=gr(a),a!==null&&qw(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),r)}function I1(r,a,l,u,f){switch(a){case"focusin":return Ls=ru(Ls,r,a,l,u,f),!0;case"dragenter":return Vs=ru(Vs,r,a,l,u,f),!0;case"mouseover":return Us=ru(Us,r,a,l,u,f),!0;case"pointerover":var y=f.pointerId;return nu.set(y,ru(nu.get(y)||null,r,a,l,u,f)),!0;case"gotpointercapture":return y=f.pointerId,iu.set(y,ru(iu.get(y)||null,r,a,l,u,f)),!0}return!1}function Hw(r){var a=Ti(r.target);if(a!==null){var l=pe(a);if(l!==null){if(a=l.tag,a===13){if(a=Je(l),a!==null){r.blockedOn=a,fs(r.priority,function(){if(l.tag===13){var u=Xn(),f=bs(l,u);f!==null&&On(f,l,u),Rg(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ld(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Dg(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);ii=u,l.target.dispatchEvent(u),ii=null}else return a=gr(l),a!==null&&qw(a),r.blockedOn=l,!1;a.shift()}return!0}function Gw(r,a,l){Ld(r)&&l.delete(a)}function D1(){kg=!1,Ls!==null&&Ld(Ls)&&(Ls=null),Vs!==null&&Ld(Vs)&&(Vs=null),Us!==null&&Ld(Us)&&(Us=null),nu.forEach(Gw),iu.forEach(Gw)}function Vd(r,a){r.blockedOn===a&&(r.blockedOn=null,kg||(kg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,D1)))}var Ud=null;function Yw(r){Ud!==r&&(Ud=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ud===r&&(Ud=null);for(var a=0;a<r.length;a+=3){var l=r[a],u=r[a+1],f=r[a+2];if(typeof u!="function"){if(Og(u||l)===null)continue;break}var y=gr(l);y!==null&&(r.splice(a,3),a-=3,bp(y,{pending:!0,data:f,method:l.method,action:u},u,f))}}))}function su(r){function a(D){return Vd(D,r)}Ls!==null&&Vd(Ls,r),Vs!==null&&Vd(Vs,r),Us!==null&&Vd(Us,r),nu.forEach(a),iu.forEach(a);for(var l=0;l<Fs.length;l++){var u=Fs[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Fs.length&&(l=Fs[0],l.blockedOn===null);)Hw(l),l.blockedOn===null&&Fs.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var f=l[u],y=l[u+1],x=f[Gt]||null;if(typeof y=="function")x||Yw(l);else if(x){var A=null;if(y&&y.hasAttribute("formAction")){if(f=y,x=y[Gt]||null)A=x.formAction;else if(Og(f)!==null)continue}else A=x.action;typeof A=="function"?l[u+1]=A:(l.splice(u,3),u-=3),Yw(l)}}}function Mg(r){this._internalRoot=r}Fd.prototype.render=Mg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=Xn();Uw(l,u,r,a,null,null)},Fd.prototype.unmount=Mg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;r.tag===0&&sl(),Uw(r.current,2,null,r,null,null),bd(),a[pr]=null}};function Fd(r){this._internalRoot=r}Fd.prototype.unstable_scheduleHydration=function(r){if(r){var a=Ch();r={blockedOn:null,target:r,priority:a};for(var l=0;l<Fs.length&&a!==0&&a<Fs[l].priority;l++);Fs.splice(l,0,r),l===0&&Hw(r)}};var Ww=e.version;if(Ww!=="19.0.0")throw Error(i(527,Ww,"19.0.0"));he.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=se(a),r=r!==null?ye(r):null,r=r===null?null:r.stateNode,r};var O1={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:Ti,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{os=qd.inject(O1),En=qd}catch{}}return ou.createRoot=function(r,a){if(!s(r))throw Error(i(299));var l=!1,u="",f=uE,y=hE,x=dE,A=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks)),a=Lw(r,1,!1,null,null,l,u,f,y,x,A,null),r[pr]=a.current,yg(r.nodeType===8?r.parentNode:r),new Mg(a)},ou.hydrateRoot=function(r,a,l){if(!s(r))throw Error(i(299));var u=!1,f="",y=uE,x=hE,A=dE,D=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),a=Lw(r,1,!0,a,l??null,u,f,y,x,A,D,F),a.context=Vw(null),l=a.current,u=Xn(),f=Rs(u),f.callback=null,Is(l,f,u),a.current.lanes=u,Dt(a,u),Xi(a),r[pr]=a.current,yg(r),new Fd(a)},ou.version="19.0.0",ou}var rb;function G1(){if(rb)return Lg.exports;rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lg.exports=H1(),Lg.exports}var Y1=G1(),lu={},sb;function W1(){if(sb)return lu;sb=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.parse=c,lu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,T){const S=new o,P=w.length;if(P<2)return S;const L=(T==null?void 0:T.decode)||v;let z=0;do{const Y=w.indexOf("=",z);if(Y===-1)break;const Q=w.indexOf(";",z),te=Q===-1?P:Q;if(Y>te){z=w.lastIndexOf(";",Y-1)+1;continue}const re=d(w,z,Y),ne=m(w,Y,re),k=w.slice(re,ne);if(S[k]===void 0){let C=d(w,Y+1,te),R=m(w,te,C);const I=L(w.slice(C,R));S[k]=I}z=te+1}while(z<P);return S}function d(w,T,S){do{const P=w.charCodeAt(T);if(P!==32&&P!==9)return T}while(++T<S);return S}function m(w,T,S){for(;T>S;){const P=w.charCodeAt(--T);if(P!==32&&P!==9)return T+1}return S}function p(w,T,S){const P=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const L=P(T);if(!e.test(L))throw new TypeError(`argument val is invalid: ${T}`);let z=w+"="+L;if(!S)return z;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);z+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);z+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);z+="; Path="+S.path}if(S.expires){if(!E(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);z+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(z+="; HttpOnly"),S.secure&&(z+="; Secure"),S.partitioned&&(z+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return z}function v(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function E(w){return s.call(w)==="[object Date]"}return lu}W1();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ab="popstate";function Q1(n={}){function e(i,s){let{pathname:o,search:c,hash:d}=i.location;return cy("",{pathname:o,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Mu(s)}return K1(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _i(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $1(){return Math.random().toString(36).substring(2,10)}function ob(n,e){return{usr:n.state,key:n.key,idx:e}}function cy(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ql(e):e,state:t,key:e&&e.key||i||$1()}}function Mu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ql(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function K1(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,d="POP",m=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let L=v(),z=L==null?null:L-p;p=L,m&&m({action:d,location:P.location,delta:z})}function w(L,z){d="PUSH";let Y=cy(P.location,L,z);p=v()+1;let Q=ob(Y,p),te=P.createHref(Y);try{c.pushState(Q,"",te)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;s.location.assign(te)}o&&m&&m({action:d,location:P.location,delta:1})}function T(L,z){d="REPLACE";let Y=cy(P.location,L,z);p=v();let Q=ob(Y,p),te=P.createHref(Y);c.replaceState(Q,"",te),o&&m&&m({action:d,location:P.location,delta:0})}function S(L){let z=s.location.origin!=="null"?s.location.origin:s.location.href,Y=typeof L=="string"?L:Mu(L);return Y=Y.replace(/ $/,"%20"),gt(z,`No window.location.(origin|href) available to create URL for href: ${Y}`),new URL(Y,z)}let P={get action(){return d},get location(){return n(s,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(ab,E),m=L,()=>{s.removeEventListener(ab,E),m=null}},createHref(L){return e(s,L)},createURL:S,encodeLocation(L){let z=S(L);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:w,replace:T,go(L){return c.go(L)}};return P}function MT(n,e,t="/"){return X1(n,e,t,!1)}function X1(n,e,t,i){let s=typeof e=="string"?ql(e):e,o=$r(s.pathname||"/",t);if(o==null)return null;let c=PT(n);Z1(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=cI(o);d=oI(c[m],p,i)}return d}function PT(n,e=[],t=[],i=""){let s=(o,c,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};m.relativePath.startsWith("/")&&(gt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=Gr([i,m.relativePath]),v=t.concat(m);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),PT(o.children,e,v,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:sI(p,o.index),routesMeta:v})};return n.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))s(o,c);else for(let m of jT(o.path))s(o,c,m)}),e}function jT(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let c=jT(i.join("/")),d=[];return d.push(...c.map(m=>m===""?o:[o,m].join("/"))),s&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function Z1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:aI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var J1=/^:[\w-]+$/,eI=3,tI=2,nI=1,iI=10,rI=-2,lb=n=>n==="*";function sI(n,e){let t=n.split("/"),i=t.length;return t.some(lb)&&(i+=rI),e&&(i+=tI),t.filter(s=>!lb(s)).reduce((s,o)=>s+(J1.test(o)?eI:o===""?nI:iI),i)}function aI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function oI(n,e,t=!1){let{routesMeta:i}=n,s={},o="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,v=o==="/"?e:e.slice(o.length)||"/",E=df({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},v),w=m.route;if(!E&&p&&t&&!i[i.length-1].route.index&&(E=df({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Gr([o,E.pathname]),pathnameBase:fI(Gr([o,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(o=Gr([o,E.pathnameBase]))}return c}function df(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=lI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((p,{paramName:v,isOptional:E},w)=>{if(v==="*"){let S=d[w]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const T=d[w];return E&&!T?p[v]=void 0:p[v]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:n}}function lI(n,e=!1,t=!0){_i(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function cI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _i(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function $r(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function uI(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?ql(n):n;return{pathname:t?t.startsWith("/")?t:hI(t,e):e,search:mI(i),hash:pI(s)}}function hI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function qg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function t_(n){let e=dI(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function n_(n,e,t,i=!1){let s;typeof n=="string"?s=ql(n):(s={...n},gt(!s.pathname||!s.pathname.includes("?"),qg("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),qg("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),qg("#","search","hash",s)));let o=n===""||s.pathname==="",c=o?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),E-=1;s.pathname=w.join("/")}d=E>=0?e[E]:"/"}let m=uI(s,d),p=c&&c!=="/"&&c.endsWith("/"),v=(o||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||v)&&(m.pathname+="/"),m}var Gr=n=>n.join("/").replace(/\/\/+/g,"/"),fI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var LT=["POST","PUT","PATCH","DELETE"];new Set(LT);var yI=["GET",...LT];new Set(yI);var zl=M.createContext(null);zl.displayName="DataRouter";var $f=M.createContext(null);$f.displayName="DataRouterState";var VT=M.createContext({isTransitioning:!1});VT.displayName="ViewTransition";var _I=M.createContext(new Map);_I.displayName="Fetchers";var vI=M.createContext(null);vI.displayName="Await";var Pi=M.createContext(null);Pi.displayName="Navigation";var th=M.createContext(null);th.displayName="Location";var wi=M.createContext({outlet:null,matches:[],isDataRoute:!1});wi.displayName="Route";var i_=M.createContext(null);i_.displayName="RouteError";function EI(n,{relative:e}={}){gt(Bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=M.useContext(Pi),{hash:s,pathname:o,search:c}=nh(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:Gr([t,o])),i.createHref({pathname:d,search:c,hash:s})}function Bl(){return M.useContext(th)!=null}function cr(){return gt(Bl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(th).location}var UT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FT(n){M.useContext(Pi).static||M.useLayoutEffect(n)}function jn(){let{isDataRoute:n}=M.useContext(wi);return n?PI():wI()}function wI(){gt(Bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(zl),{basename:e,navigator:t}=M.useContext(Pi),{matches:i}=M.useContext(wi),{pathname:s}=cr(),o=JSON.stringify(t_(i)),c=M.useRef(!1);return FT(()=>{c.current=!0}),M.useCallback((m,p={})=>{if(_i(c.current,UT),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=n_(m,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Gr([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,o,s,n])}var bI=M.createContext(null);function xI(n){let e=M.useContext(wi).outlet;return e&&M.createElement(bI.Provider,{value:n},e)}function fo(){let{matches:n}=M.useContext(wi),e=n[n.length-1];return e?e.params:{}}function nh(n,{relative:e}={}){let{matches:t}=M.useContext(wi),{pathname:i}=cr(),s=JSON.stringify(t_(t));return M.useMemo(()=>n_(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function TI(n,e){return qT(n,e)}function qT(n,e,t,i){var Y;gt(Bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=M.useContext(Pi),{matches:c}=M.useContext(wi),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let Q=E&&E.path||"";zT(p,!E||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let w=cr(),T;if(e){let Q=typeof e=="string"?ql(e):e;gt(v==="/"||((Y=Q.pathname)==null?void 0:Y.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),T=Q}else T=w;let S=T.pathname||"/",P=S;if(v!=="/"){let Q=v.replace(/^\//,"").split("/");P="/"+S.replace(/^\//,"").split("/").slice(Q.length).join("/")}let L=!o&&t&&t.matches&&t.matches.length>0?t.matches:MT(n,{pathname:P});_i(E||L!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),_i(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=RI(L&&L.map(Q=>Object.assign({},Q,{params:Object.assign({},m,Q.params),pathname:Gr([v,s.encodeLocation?s.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?v:Gr([v,s.encodeLocation?s.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),c,t,i);return e&&z?M.createElement(th.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},z):z}function SI(){let n=MI(),e=gI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,c)}var AI=M.createElement(SI,null),CI=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?M.createElement(wi.Provider,{value:this.props.routeContext},M.createElement(i_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NI({routeContext:n,match:e,children:t}){let i=M.useContext(zl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(wi.Provider,{value:n},t)}function RI(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let m=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);gt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<s.length;m++){let p=s[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:v,errors:E}=t,w=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||w){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((m,p,v)=>{let E,w=!1,T=null,S=null;t&&(E=o&&p.route.id?o[p.route.id]:void 0,T=p.route.errorElement||AI,c&&(d<0&&v===0?(zT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):d===v&&(w=!0,S=p.route.hydrateFallbackElement||null)));let P=e.concat(s.slice(0,v+1)),L=()=>{let z;return E?z=T:w?z=S:p.route.Component?z=M.createElement(p.route.Component,null):p.route.element?z=p.route.element:z=m,M.createElement(NI,{match:p,routeContext:{outlet:m,matches:P,isDataRoute:t!=null},children:z})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?M.createElement(CI,{location:t.location,revalidation:t.revalidation,component:T,error:E,children:L(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):L()},null)}function r_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function II(n){let e=M.useContext(zl);return gt(e,r_(n)),e}function DI(n){let e=M.useContext($f);return gt(e,r_(n)),e}function OI(n){let e=M.useContext(wi);return gt(e,r_(n)),e}function s_(n){let e=OI(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function kI(){return s_("useRouteId")}function MI(){var i;let n=M.useContext(i_),e=DI("useRouteError"),t=s_("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function PI(){let{router:n}=II("useNavigate"),e=s_("useNavigate"),t=M.useRef(!1);return FT(()=>{t.current=!0}),M.useCallback(async(s,o={})=>{_i(t.current,UT),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var cb={};function zT(n,e,t){!e&&!cb[n]&&(cb[n]=!0,_i(!1,t))}M.memo(jI);function jI({routes:n,future:e,state:t}){return qT(n,void 0,t,e)}function BT({to:n,replace:e,state:t,relative:i}){gt(Bl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=M.useContext(Pi);_i(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(wi),{pathname:c}=cr(),d=jn(),m=n_(n,t_(o),c,i==="path"),p=JSON.stringify(m);return M.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:i})},[d,p,i,e,t]),null}function HT(n){return xI(n.context)}function mt(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LI({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:o=!1}){gt(!Bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof t=="string"&&(t=ql(t));let{pathname:m="/",search:p="",hash:v="",state:E=null,key:w="default"}=t,T=M.useMemo(()=>{let S=$r(m,c);return S==null?null:{location:{pathname:S,search:p,hash:v,state:E,key:w},navigationType:i}},[c,m,p,v,E,w,i]);return _i(T!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:M.createElement(Pi.Provider,{value:d},M.createElement(th.Provider,{children:e,value:T}))}function VI({children:n,location:e}){return TI(uy(n),e)}function uy(n,e=[]){let t=[];return M.Children.forEach(n,(i,s)=>{if(!M.isValidElement(i))return;let o=[...e,s];if(i.type===M.Fragment){t.push.apply(t,uy(i.props.children,o));return}gt(i.type===mt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=uy(i.props.children,o)),t.push(c)}),t}var Zd="get",Jd="application/x-www-form-urlencoded";function Kf(n){return n!=null&&typeof n.tagName=="string"}function UI(n){return Kf(n)&&n.tagName.toLowerCase()==="button"}function FI(n){return Kf(n)&&n.tagName.toLowerCase()==="form"}function qI(n){return Kf(n)&&n.tagName.toLowerCase()==="input"}function zI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BI(n,e){return n.button===0&&(!e||e==="_self")&&!zI(n)}function hy(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(s=>[t,s]):[[t,i]])},[]))}function HI(n,e){let t=hy(n);return e&&e.forEach((i,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}var zd=null;function GI(){if(zd===null)try{new FormData(document.createElement("form"),0),zd=!1}catch{zd=!0}return zd}var YI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zg(n){return n!=null&&!YI.has(n)?(_i(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jd}"`),null):n}function WI(n,e){let t,i,s,o,c;if(FI(n)){let d=n.getAttribute("action");i=d?$r(d,e):null,t=n.getAttribute("method")||Zd,s=zg(n.getAttribute("enctype"))||Jd,o=new FormData(n)}else if(UI(n)||qI(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?$r(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Zd,s=zg(n.getAttribute("formenctype"))||zg(d.getAttribute("enctype"))||Jd,o=new FormData(d,n),!GI()){let{name:p,type:v,value:E}=n;if(v==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,E)}}else{if(Kf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zd,i=null,s=Jd,c=n}return o&&s==="text/plain"&&(c=o,o=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:o,body:c}}function a_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function QI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $I(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function KI(n,e,t){let i=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await QI(o,t);return c.links?c.links():[]}return[]}));return eD(i.flat(1).filter($I).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ub(n,e,t,i,s,o){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var v;return t[p].pathname!==m.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):o==="data"?e.filter((m,p)=>{var E;let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function XI(n,e,{includeHydrateFallback:t}={}){return ZI(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function ZI(n){return[...new Set(n)]}function JI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function eD(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let o=JSON.stringify(JI(s));return t.has(o)||(t.add(o),i.push({key:o,link:s})),i},[])}function tD(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&$r(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function GT(){let n=M.useContext(zl);return a_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function nD(){let n=M.useContext($f);return a_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var o_=M.createContext(void 0);o_.displayName="FrameworkContext";function YT(){let n=M.useContext(o_);return a_(n,"You must render this element inside a <HydratedRouter> element"),n}function iD(n,e){let t=M.useContext(o_),[i,s]=M.useState(!1),[o,c]=M.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:v,onTouchStart:E}=e,w=M.useRef(null);M.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let P=z=>{z.forEach(Y=>{c(Y.isIntersecting)})},L=new IntersectionObserver(P,{threshold:.5});return w.current&&L.observe(w.current),()=>{L.disconnect()}}},[n]),M.useEffect(()=>{if(i){let P=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(P)}}},[i]);let T=()=>{s(!0)},S=()=>{s(!1),c(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:cu(d,T),onBlur:cu(m,S),onMouseEnter:cu(p,T),onMouseLeave:cu(v,S),onTouchStart:cu(E,T)}]:[!1,w,{}]}function cu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function rD({page:n,...e}){let{router:t}=GT(),i=M.useMemo(()=>MT(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?M.createElement(aD,{page:n,matches:i,...e}):null}function sD(n){let{manifest:e,routeModules:t}=YT(),[i,s]=M.useState([]);return M.useEffect(()=>{let o=!1;return KI(n,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[n,e,t]),i}function aD({page:n,matches:e,...t}){let i=cr(),{manifest:s,routeModules:o}=YT(),{basename:c}=GT(),{loaderData:d,matches:m}=nD(),p=M.useMemo(()=>ub(n,e,m,s,i,"data"),[n,e,m,s,i]),v=M.useMemo(()=>ub(n,e,m,s,i,"assets"),[n,e,m,s,i]),E=M.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,P=!1;if(e.forEach(z=>{var Q;let Y=s.routes[z.route.id];!Y||!Y.hasLoader||(!p.some(te=>te.route.id===z.route.id)&&z.route.id in d&&((Q=o[z.route.id])!=null&&Q.shouldRevalidate)||Y.hasClientLoader?P=!0:S.add(z.route.id))}),S.size===0)return[];let L=tD(n,c);return P&&S.size>0&&L.searchParams.set("_routes",e.filter(z=>S.has(z.route.id)).map(z=>z.route.id).join(",")),[L.pathname+L.search]},[c,d,i,s,p,e,n,o]),w=M.useMemo(()=>XI(v,s),[v,s]),T=sD(v);return M.createElement(M.Fragment,null,E.map(S=>M.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),w.map(S=>M.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),T.map(({key:S,link:P})=>M.createElement("link",{key:S,...P})))}function oD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var WT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WT&&(window.__reactRouterVersion="7.3.0")}catch{}function lD({basename:n,children:e,window:t}){let i=M.useRef();i.current==null&&(i.current=Q1({window:t,v5Compat:!0}));let s=i.current,[o,c]=M.useState({action:s.action,location:s.location}),d=M.useCallback(m=>{M.startTransition(()=>c(m))},[c]);return M.useLayoutEffect(()=>s.listen(d),[s,d]),M.createElement(LI,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var QT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ne=M.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:o,replace:c,state:d,target:m,to:p,preventScrollReset:v,viewTransition:E,...w},T){let{basename:S}=M.useContext(Pi),P=typeof p=="string"&&QT.test(p),L,z=!1;if(typeof p=="string"&&P&&(L=p,WT))try{let R=new URL(window.location.href),I=p.startsWith("//")?new URL(R.protocol+p):new URL(p),j=$r(I.pathname,S);I.origin===R.origin&&j!=null?p=j+I.search+I.hash:z=!0}catch{_i(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=EI(p,{relative:s}),[Q,te,re]=iD(i,w),ne=dD(p,{replace:c,state:d,target:m,preventScrollReset:v,relative:s,viewTransition:E});function k(R){e&&e(R),R.defaultPrevented||ne(R)}let C=M.createElement("a",{...w,...re,href:L||Y,onClick:z||o?e:k,ref:oD(T,te),target:m,"data-discover":!P&&t==="render"?"true":void 0});return Q&&!P?M.createElement(M.Fragment,null,C,M.createElement(rD,{page:Y})):C});Ne.displayName="Link";var cD=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:d,children:m,...p},v){let E=nh(c,{relative:p.relative}),w=cr(),T=M.useContext($f),{navigator:S,basename:P}=M.useContext(Pi),L=T!=null&&_D(E)&&d===!0,z=S.encodeLocation?S.encodeLocation(E).pathname:E.pathname,Y=w.pathname,Q=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),Q=Q?Q.toLowerCase():null,z=z.toLowerCase()),Q&&P&&(Q=$r(Q,P)||Q);const te=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let re=Y===z||!s&&Y.startsWith(z)&&Y.charAt(te)==="/",ne=Q!=null&&(Q===z||!s&&Q.startsWith(z)&&Q.charAt(z.length)==="/"),k={isActive:re,isPending:ne,isTransitioning:L},C=re?e:void 0,R;typeof i=="function"?R=i(k):R=[i,re?"active":null,ne?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(k):o;return M.createElement(Ne,{...p,"aria-current":C,className:R,ref:v,style:I,to:c,viewTransition:d},typeof m=="function"?m(k):m)});cD.displayName="NavLink";var uD=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:o,method:c=Zd,action:d,onSubmit:m,relative:p,preventScrollReset:v,viewTransition:E,...w},T)=>{let S=gD(),P=yD(d,{relative:p}),L=c.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&QT.test(d),Y=Q=>{if(m&&m(Q),Q.defaultPrevented)return;Q.preventDefault();let te=Q.nativeEvent.submitter,re=(te==null?void 0:te.getAttribute("formmethod"))||c;S(te||Q.currentTarget,{fetcherKey:e,method:re,navigate:t,replace:s,state:o,relative:p,preventScrollReset:v,viewTransition:E})};return M.createElement("form",{ref:T,method:L,action:P,onSubmit:i?m:Y,...w,"data-discover":!z&&n==="render"?"true":void 0})});uD.displayName="Form";function hD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $T(n){let e=M.useContext(zl);return gt(e,hD(n)),e}function dD(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:c}={}){let d=jn(),m=cr(),p=nh(n,{relative:o});return M.useCallback(v=>{if(BI(v,e)){v.preventDefault();let E=t!==void 0?t:Mu(m)===Mu(p);d(n,{replace:E,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[m,d,p,t,i,e,n,s,o,c])}function fD(n){_i(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(hy(n)),t=M.useRef(!1),i=cr(),s=M.useMemo(()=>HI(i.search,t.current?null:e.current),[i.search]),o=jn(),c=M.useCallback((d,m)=>{const p=hy(typeof d=="function"?d(s):d);t.current=!0,o("?"+p,m)},[o,s]);return[s,c]}var mD=0,pD=()=>`__${String(++mD)}__`;function gD(){let{router:n}=$T("useSubmit"),{basename:e}=M.useContext(Pi),t=kI();return M.useCallback(async(i,s={})=>{let{action:o,method:c,encType:d,formData:m,body:p}=WI(i,e);if(s.navigate===!1){let v=s.fetcherKey||pD();await n.fetch(v,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:m,body:p,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:m,body:p,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function yD(n,{relative:e}={}){let{basename:t}=M.useContext(Pi),i=M.useContext(wi);gt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...nh(n||".",{relative:e})},c=cr();if(n==null){o.search=c.search;let d=new URLSearchParams(o.search),m=d.getAll("index");if(m.some(v=>v==="")){d.delete("index"),m.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();o.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Gr([t,o.pathname])),Mu(o)}function _D(n,e={}){let t=M.useContext(VT);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=$T("useViewTransitionState"),s=nh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=$r(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=$r(t.nextLocation.pathname,i)||t.nextLocation.pathname;return df(s.pathname,c)!=null||df(s.pathname,o)!=null}new TextEncoder;const vD=()=>{};var hb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae=function(n,e){if(!n)throw Hl(e)},Hl=function(n){return new Error("Firebase Database ("+KT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ED=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],c=n[t++],d=n[t++],m=((s&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],c=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},l_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,d=c?n[s+1]:0,m=s+2<n.length,p=m?n[s+2]:0,v=o>>2,E=(o&3)<<4|d>>4;let w=(d&15)<<2|p>>6,T=p&63;m||(T=64,c||(w=64)),i.push(t[v],t[E],t[w],t[T])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ED(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||d==null||p==null||E==null)throw new wD;const w=o<<2|d>>4;if(i.push(w),p!==64){const T=d<<4&240|p>>2;if(i.push(T),E!==64){const S=p<<6&192|E;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZT=function(n){const e=XT(n);return l_.encodeByteArray(e,!0)},ff=function(n){return ZT(n).replace(/\./g,"")},mf=function(n){try{return l_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(n){return JT(void 0,n)}function JT(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!xD(t)||(n[t]=JT(n[t],e[t]));return n}function xD(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=()=>TD().__FIREBASE_DEFAULTS__,AD=()=>{if(typeof process>"u"||typeof hb>"u")return;const n=hb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mf(n[1]);return e&&JSON.parse(e)},Xf=()=>{try{return vD()||SD()||AD()||CD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eS=n=>{var e,t;return(t=(e=Xf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tS=n=>{const e=eS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},nS=()=>{var n;return(n=Xf())===null||n===void 0?void 0:n.config},iS=n=>{var e;return(e=Xf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ff(JSON.stringify(t)),ff(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function ND(){var n;const e=(n=Xf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ID(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DD(){const n=An();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OD(){return KT.NODE_ADMIN===!0}function kD(){return!ND()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MD(){try{return typeof indexedDB=="object"}catch{return!1}}function PD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="FirebaseError";class ns extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=jD,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rh.prototype.create)}}class rh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?LD(o,i):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ns(s,d,i)}}function LD(n,e){return n.replace(VD,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const VD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){return JSON.parse(n)}function Xt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=function(n){let e={},t={},i={},s="";try{const o=n.split(".");e=Pu(mf(o[0])||""),t=Pu(mf(o[1])||""),s=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}},UD=function(n){const e=aS(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},FD=function(n){const e=aS(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Tl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function dy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pf(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function na(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],c=e[s];if(db(o)&&db(c)){if(!na(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function db(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function _u(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)i[E]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let E=0;E<16;E++)i[E]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let E=16;E<80;E++){const w=i[E-3]^i[E-8]^i[E-14]^i[E-16];i[E]=(w<<1|w>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],c=this.chain_[2],d=this.chain_[3],m=this.chain_[4],p,v;for(let E=0;E<80;E++){E<40?E<20?(p=d^o&(c^d),v=1518500249):(p=o^c^d,v=1859775393):E<60?(p=o&c|d&(o|c),v=2400959708):(p=o^c^d,v=3395469782);const w=(s<<5|s>>>27)+p+m+v+i[E]&4294967295;m=d,d=c,c=(o<<30|o>>>2)&4294967295,o=s,s=w}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let s=0;const o=this.buf_;let c=this.inbuf_;for(;s<t;){if(c===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[c]=e.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(o),c=0;break}}else for(;s<t;)if(o[c]=e[s],++c,++s,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[s]>>o&255,++i;return e}}function zD(n,e){const t=new BD(n,e);return t.subscribe.bind(t)}class BD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");HD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Bg),s.error===void 0&&(s.error=Bg),s.complete===void 0&&(s.complete=Bg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bg(){}function Zf(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const o=s-55296;i++,ae(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;s=65536+(o<<10)+c}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Jf=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(n){return n&&n._delegate?n._delegate:n}class ia{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ih;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QD(e))try{this.getOrInitializeService({instanceIdentifier:Ka})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ka){return this.instances.has(e)}getOptions(e=Ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);i===d&&c.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ka){return this.component?this.component.multipleInstances?e:Ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WD(n){return n===Ka?void 0:n}function QD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new YD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const KD={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},XD=Le.INFO,ZD={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},JD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=ZD[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class em{constructor(e){this.name=e,this._logLevel=XD,this._logHandler=JD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const e2=(n,e)=>e.some(t=>n instanceof t);let fb,mb;function t2(){return fb||(fb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n2(){return mb||(mb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oS=new WeakMap,fy=new WeakMap,lS=new WeakMap,Hg=new WeakMap,u_=new WeakMap;function i2(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t($s(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&oS.set(t,n)}).catch(()=>{}),u_.set(e,n),e}function r2(n){if(fy.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});fy.set(n,e)}let my={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||lS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function s2(n){my=n(my)}function a2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Gg(this),e,...t);return lS.set(i,e.sort?e.sort():[e]),$s(i)}:n2().includes(n)?function(...e){return n.apply(Gg(this),e),$s(oS.get(this))}:function(...e){return $s(n.apply(Gg(this),e))}}function o2(n){return typeof n=="function"?a2(n):(n instanceof IDBTransaction&&r2(n),e2(n,t2())?new Proxy(n,my):n)}function $s(n){if(n instanceof IDBRequest)return i2(n);if(Hg.has(n))return Hg.get(n);const e=o2(n);return e!==n&&(Hg.set(n,e),u_.set(e,n)),e}const Gg=n=>u_.get(n);function l2(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(n,e),d=$s(c);return i&&c.addEventListener("upgradeneeded",m=>{i($s(c.result),m.oldVersion,m.newVersion,$s(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const c2=["get","getKey","getAll","getAllKeys","count"],u2=["put","add","delete","clear"],Yg=new Map;function pb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=u2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||c2.includes(t)))return;const o=async function(c,...d){const m=this.transaction(c,s?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),s&&m.done]))[0]};return Yg.set(e,o),o}s2(n=>({...n,get:(e,t,i)=>pb(e,t)||n.get(e,t,i),has:(e,t)=>!!pb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function d2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const py="@firebase/app",gb="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new em("@firebase/app"),f2="@firebase/app-compat",m2="@firebase/analytics-compat",p2="@firebase/analytics",g2="@firebase/app-check-compat",y2="@firebase/app-check",_2="@firebase/auth",v2="@firebase/auth-compat",E2="@firebase/database",w2="@firebase/data-connect",b2="@firebase/database-compat",x2="@firebase/functions",T2="@firebase/functions-compat",S2="@firebase/installations",A2="@firebase/installations-compat",C2="@firebase/messaging",N2="@firebase/messaging-compat",R2="@firebase/performance",I2="@firebase/performance-compat",D2="@firebase/remote-config",O2="@firebase/remote-config-compat",k2="@firebase/storage",M2="@firebase/storage-compat",P2="@firebase/firestore",j2="@firebase/vertexai",L2="@firebase/firestore-compat",V2="firebase",U2="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="[DEFAULT]",F2={[py]:"fire-core",[f2]:"fire-core-compat",[p2]:"fire-analytics",[m2]:"fire-analytics-compat",[y2]:"fire-app-check",[g2]:"fire-app-check-compat",[_2]:"fire-auth",[v2]:"fire-auth-compat",[E2]:"fire-rtdb",[w2]:"fire-data-connect",[b2]:"fire-rtdb-compat",[x2]:"fire-fn",[T2]:"fire-fn-compat",[S2]:"fire-iid",[A2]:"fire-iid-compat",[C2]:"fire-fcm",[N2]:"fire-fcm-compat",[R2]:"fire-perf",[I2]:"fire-perf-compat",[D2]:"fire-rc",[O2]:"fire-rc-compat",[k2]:"fire-gcs",[M2]:"fire-gcs-compat",[P2]:"fire-fst",[L2]:"fire-fst-compat",[j2]:"fire-vertex","fire-js":"fire-js",[V2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,q2=new Map,yy=new Map;function yb(n,e){try{n.container.addComponent(e)}catch(t){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ro(n){const e=n.name;if(yy.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;yy.set(e,n);for(const t of gf.values())yb(t,n);for(const t of q2.values())yb(t,n);return!0}function tm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new rh("app","Firebase",z2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=U2;function cS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:gy,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Ks.create("bad-app-name",{appName:String(s)});if(t||(t=nS()),!t)throw Ks.create("no-options");const o=gf.get(s);if(o){if(na(t,o.options)&&na(i,o.config))return o;throw Ks.create("duplicate-app",{appName:s})}const c=new $D(s);for(const m of yy.values())c.addComponent(m);const d=new B2(t,i,c);return gf.set(s,d),d}function h_(n=gy){const e=gf.get(n);if(!e&&n===gy&&nS())return cS();if(!e)throw Ks.create("no-app",{appName:n});return e}function ir(n,e,t){var i;let s=(i=F2[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(d.join(" "));return}ro(new ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="firebase-heartbeat-database",G2=1,ju="firebase-heartbeat-store";let Wg=null;function uS(){return Wg||(Wg=l2(H2,G2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ks.create("idb-open",{originalErrorMessage:n.message})})),Wg}async function Y2(n){try{const t=(await uS()).transaction(ju),i=await t.objectStore(ju).get(hS(n));return await t.done,i}catch(e){if(e instanceof ns)Kr.warn(e.message);else{const t=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kr.warn(t.message)}}}async function _b(n,e){try{const i=(await uS()).transaction(ju,"readwrite");await i.objectStore(ju).put(e,hS(n)),await i.done}catch(t){if(t instanceof ns)Kr.warn(t.message);else{const i=Ks.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Kr.warn(i.message)}}}function hS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=1024,Q2=30;class $2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new X2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Q2){const c=Z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Kr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=vb(),{heartbeatsToSend:i,unsentEntries:s}=K2(this._heartbeatsCache.heartbeats),o=ff(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Kr.warn(t),""}}}function vb(){return new Date().toISOString().substring(0,10)}function K2(n,e=W2){const t=[];let i=n.slice();for(const s of n){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),Eb(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Eb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class X2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MD()?PD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Y2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return _b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return _b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Eb(n){return ff(JSON.stringify({version:2,heartbeats:n})).length}function Z2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(n){ro(new ia("platform-logger",e=>new h2(e),"PRIVATE")),ro(new ia("heartbeat",e=>new $2(e),"PRIVATE")),ir(py,gb,n),ir(py,gb,"esm2017"),ir("fire-js","")}J2("");function d_(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function dS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eO=dS,fS=new rh("auth","Firebase",dS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new em("@firebase/auth");function tO(n,...e){yf.logLevel<=Le.WARN&&yf.warn(`Auth (${mo}): ${n}`,...e)}function ef(n,...e){yf.logLevel<=Le.ERROR&&yf.error(`Auth (${mo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n,...e){throw m_(n,...e)}function Di(n,...e){return m_(n,...e)}function f_(n,e,t){const i=Object.assign(Object.assign({},eO()),{[e]:t});return new rh("auth","Firebase",i).create(e,{appName:n.name})}function Yr(n){return f_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nO(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&vi(n,"argument-error"),f_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function m_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return fS.create(n,...e)}function be(n,e,...t){if(!n)throw m_(e,...t)}function qr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ef(e),new Error(e)}function Xr(n,e){n||qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function iO(){return wb()==="http:"||wb()==="https:"}function wb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iO()||ID()||"connection"in navigator)?navigator.onLine:!0}function sO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xr(t>e,"Short delay should be less than long delay!"),this.isMobile=c_()||sS()}get(){return rO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n,e){Xr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new sh(3e4,6e4);function fa(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function is(n,e,t,i,s={}){return pS(n,s,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const d=Gl(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},o);return RD()||(p.referrerPolicy="no-referrer"),mS.fetch()(gS(n,n.config.apiHost,t,d),p)})}async function pS(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},aO),e);try{const s=new cO(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Bd(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bd(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Bd(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Bd(n,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw f_(n,v,p);vi(n,v)}}catch(s){if(s instanceof ns)throw s;vi(n,"network-request-failed",{message:String(s)})}}async function ah(n,e,t,i,s={}){const o=await is(n,e,t,i,s);return"mfaPendingCredential"in o&&vi(n,"multi-factor-auth-required",{_serverResponse:o}),o}function gS(n,e,t,i){const s=`${e}${t}?${i}`;return n.config.emulator?p_(n.config,s):`${n.config.apiScheme}://${s}`}function lO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),oO.get())})}}function Bd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Di(n,e,i);return s.customData._tokenResponse=t,s}function bb(n){return n!==void 0&&n.enterprise!==void 0}class uO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hO(n,e){return is(n,"GET","/v2/recaptchaConfig",fa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(n,e){return is(n,"POST","/v1/accounts:delete",e)}async function yS(n,e){return is(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fO(n,e=!1){const t=ft(n),i=await t.getIdToken(e),s=g_(i);be(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:xu(Qg(s.auth_time)),issuedAtTime:xu(Qg(s.iat)),expirationTime:xu(Qg(s.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Qg(n){return Number(n)*1e3}function g_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ef("JWT malformed, contained fewer than 3 sections"),null;try{const s=mf(t);return s?JSON.parse(s):(ef("Failed to decode base64 JWT payload"),null)}catch(s){return ef("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xb(n){const e=g_(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ns&&mO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function mO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(n){var e;const t=n.auth,i=await n.getIdToken(),s=await Sl(n,yS(t,{idToken:i}));be(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?_S(o.providerUserInfo):[],d=yO(n.providerData,c),m=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(d!=null&&d.length),v=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new vy(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function gO(n){const e=ft(n);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yO(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function _S(n){return n.map(e=>{var{providerId:t}=e,i=d_(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(n,e){const t=await pS(n,{},async()=>{const i=Gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=gS(n,s,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",mS.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vO(n,e){return is(n,"POST","/v2/accounts:revokeToken",fa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=xb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:o}=await _O(e,t);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:o}=t,c=new _l;return i&&(be(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(be(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(be(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,o=d_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Sl(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fO(this,e)}reload(){return gO(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await _f(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await Sl(this,dO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,o,c,d,m,p,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,T=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,P=(d=t.tenantId)!==null&&d!==void 0?d:void 0,L=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,z=(p=t.createdAt)!==null&&p!==void 0?p:void 0,Y=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Q,emailVerified:te,isAnonymous:re,providerData:ne,stsTokenManager:k}=t;be(Q&&k,e,"internal-error");const C=_l.fromJSON(this.name,k);be(typeof Q=="string",e,"internal-error"),zs(E,e.name),zs(w,e.name),be(typeof te=="boolean",e,"internal-error"),be(typeof re=="boolean",e,"internal-error"),zs(T,e.name),zs(S,e.name),zs(P,e.name),zs(L,e.name),zs(z,e.name),zs(Y,e.name);const R=new zr({uid:Q,auth:e,email:w,emailVerified:te,displayName:E,isAnonymous:re,photoURL:S,phoneNumber:T,tenantId:P,stsTokenManager:C,createdAt:z,lastLoginAt:Y});return ne&&Array.isArray(ne)&&(R.providerData=ne.map(I=>Object.assign({},I))),L&&(R._redirectEventId=L),R}static async _fromIdTokenResponse(e,t,i=!1){const s=new _l;s.updateFromServerResponse(t);const o=new zr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await _f(o),o}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];be(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?_S(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),d=new _l;d.updateFromIdToken(i);const m=new zr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new Map;function Br(n){Xr(n instanceof Function,"Expected a class definition");let e=Tb.get(n);return e?(Xr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Tb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vS.type="NONE";const Sb=vS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(n,e,t){return`firebase:${n}:${e}:${t}`}class vl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=tf(this.userKey,s.apiKey,o),this.fullPersistenceKey=tf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new vl(Br(Sb),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Br(Sb);const c=tf(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(c);if(v){const E=zr._fromJSON(e,v);p!==o&&(d=E),o=p;break}}catch{}const m=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new vl(o,e,i):(o=m[0],d&&await o._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(c)}catch{}})),new vl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ES(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SS(e))return"Blackberry";if(AS(e))return"Webos";if(wS(e))return"Safari";if((e.includes("chrome/")||bS(e))&&!e.includes("edge/"))return"Chrome";if(TS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ES(n=An()){return/firefox\//i.test(n)}function wS(n=An()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bS(n=An()){return/crios\//i.test(n)}function xS(n=An()){return/iemobile/i.test(n)}function TS(n=An()){return/android/i.test(n)}function SS(n=An()){return/blackberry/i.test(n)}function AS(n=An()){return/webos/i.test(n)}function y_(n=An()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function EO(n=An()){var e;return y_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wO(){return DD()&&document.documentMode===10}function CS(n=An()){return y_(n)||TS(n)||AS(n)||SS(n)||/windows phone/i.test(n)||xS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n,e=[]){let t;switch(n){case"Browser":t=Ab(An());break;case"Worker":t=`${Ab(An())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((c,d)=>{try{const m=e(o);c(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(n,e={}){return is(n,"GET","/v2/passwordPolicy",fa(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=6;class SO{constructor(e){var t,i,s,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:TO,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,o,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(s=m.containsLowercaseLetter)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsUppercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cb(this),this.idTokenSubscription=new Cb(this),this.beforeStateQueue=new bO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await vl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yS(this,{idToken:e}),i=await zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(Yr(this));const t=e?ft(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xO(this),t=new SO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await vO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Br(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[Br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&tO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ma(n){return ft(n)}class Cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=zD(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CO(n){nm=n}function RS(n){return nm.loadJS(n)}function NO(){return nm.recaptchaEnterpriseScript}function RO(){return nm.gapiScript}function IO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class DO{constructor(){this.enterprise=new OO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class OO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kO="recaptcha-enterprise",IS="NO_RECAPTCHA";class MO{constructor(e){this.type=kO,this.auth=ma(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{hO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new uO(m);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,c(p.siteKey)}}).catch(m=>{d(m)})})}function s(o,c,d){const m=window.grecaptcha;bb(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(p=>{c(p)}).catch(()=>{c(IS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(d=>{if(!t&&bb(window.grecaptcha))s(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=NO();m.length!==0&&(m+=d),RS(m).then(()=>{s(d,o,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function Nb(n,e,t,i=!1,s=!1){const o=new MO(n);let c;if(s)c=IS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ey(n,e,t,i,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Nb(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Nb(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(n,e){const t=tm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(na(o,e??{}))return s;vi(s,"already-initialized")}return t.initialize({options:e})}function jO(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Br);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function LO(n,e,t){const i=ma(n);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=DS(e),{host:c,port:d}=VO(e),m=d===null?"":`:${d}`,p={url:`${o}//${c}${m}/`},v=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(na(p,i.config.emulator)&&na(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,UO()}function DS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VO(n){const e=DS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Rb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:Rb(c)}}}function Rb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function UO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,t){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}async function FO(n,e){return is(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(n,e){return ah(n,"POST","/v1/accounts:signInWithPassword",fa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",fa(n,e))}async function BO(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",fa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends __{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Lu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Lu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ey(e,t,"signInWithPassword",qO);case"emailLink":return zO(e,{email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ey(e,i,"signUpPassword",FO);case"emailLink":return BO(e,{idToken:t,email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(n,e){return ah(n,"POST","/v1/accounts:signInWithIdp",fa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="http://localhost";class so extends __{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,o=d_(t,["providerId","signInMethod"]);if(!i||!s)return null;const c=new so(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return El(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,El(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,El(e,t)}buildRequest(){const e={requestUri:HO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YO(n){const e=yu(_u(n)).link,t=e?yu(_u(e)).deep_link_id:null,i=yu(_u(n)).deep_link_id;return(i?yu(_u(i)).link:null)||i||t||e||n}class v_{constructor(e){var t,i,s,o,c,d;const m=yu(_u(e)),p=(t=m.apiKey)!==null&&t!==void 0?t:null,v=(i=m.oobCode)!==null&&i!==void 0?i:null,E=GO((s=m.mode)!==null&&s!==void 0?s:null);be(p&&v&&E,"argument-error"),this.apiKey=p,this.operation=E,this.code=v,this.continueUrl=(o=m.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=m.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=YO(e);try{return new v_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.providerId=Yl.PROVIDER_ID}static credential(e,t){return Lu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=v_.parseLink(t);return be(i,"argument-error"),Lu._fromEmailAndCode(e,i.code,i.tenantId)}}Yl.PROVIDER_ID="password";Yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends E_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends oh{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends oh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Fr.credential(t,i)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends oh{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends oh{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ys.credential(t,i)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(n,e){return ah(n,"POST","/v1/accounts:signUp",fa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const o=await zr._fromIdTokenResponse(e,i,s),c=Ib(i);return new ao({user:o,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Ib(i);return new ao({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Ib(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends ns{constructor(e,t,i,s){var o;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new vf(e,t,i,s)}}function OS(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(n,o,e,i):o})}async function QO(n,e,t=!1){const i=await Sl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ao._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(n,e,t=!1){const{auth:i}=n;if(qn(i.app))return Promise.reject(Yr(i));const s="reauthenticate";try{const o=await Sl(n,OS(i,s,e,n),t);be(o.idToken,i,"internal-error");const c=g_(o.idToken);be(c,i,"internal-error");const{sub:d}=c;return be(n.uid===d,i,"user-mismatch"),ao._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&vi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(n,e,t=!1){if(qn(n.app))return Promise.reject(Yr(n));const i="signIn",s=await OS(n,i,e),o=await ao._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(o.user),o}async function KO(n,e){return kS(ma(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(n){const e=ma(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XO(n,e,t){if(qn(n.app))return Promise.reject(Yr(n));const i=ma(n),c=await Ey(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WO).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&MS(n),m}),d=await ao._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function ZO(n,e,t){return qn(n.app)?Promise.reject(Yr(n)):KO(ft(n),Yl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&MS(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(n,e){return is(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=ft(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Sl(i,JO(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function ek(n,e,t,i){return ft(n).onIdTokenChanged(e,t,i)}function tk(n,e,t){return ft(n).beforeAuthStateChanged(e,t)}function nk(n,e,t,i){return ft(n).onAuthStateChanged(e,t,i)}function ik(n){return ft(n).signOut()}const Ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=1e3,sk=10;class LS extends jS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);wO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sk):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LS.type="LOCAL";const ak=LS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends jS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VS.type="SESSION";const US=VS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new im(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(c).map(async p=>p(t.origin,o)),m=await ok(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((d,m)=>{const p=w_("",20);s.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(E){const w=E;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(w.data.response);break;default:clearTimeout(v),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function ck(n){rr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function uk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function dk(){return FS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firebaseLocalStorageDb",fk=1,wf="firebaseLocalStorage",zS="fbase_key";class lh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rm(n,e){return n.transaction([wf],e?"readwrite":"readonly").objectStore(wf)}function mk(){const n=indexedDB.deleteDatabase(qS);return new lh(n).toPromise()}function wy(){const n=indexedDB.open(qS,fk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(wf,{keyPath:zS})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(wf)?e(i):(i.close(),await mk(),e(await wy()))})})}async function Db(n,e,t){const i=rm(n,!0).put({[zS]:e,value:t});return new lh(i).toPromise()}async function pk(n,e){const t=rm(n,!1).get(e),i=await new lh(t).toPromise();return i===void 0?null:i.value}function Ob(n,e){const t=rm(n,!0).delete(e);return new lh(t).toPromise()}const gk=800,yk=3;class BS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>yk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=im._getInstance(dk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await uk(),!this.activeServiceWorker)return;this.sender=new lk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wy();return await Db(e,Ef,"1"),await Ob(e,Ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Db(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>pk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ob(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=rm(s,!1).getAll();return new lh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BS.type="LOCAL";const _k=BS;new sh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(n,e){return e?Br(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_ extends __{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,t){return El(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vk(n){return kS(n.auth,new b_(n),n.bypassAuthState)}function Ek(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),$O(t,new b_(n),n.bypassAuthState)}async function wk(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),QO(t,new b_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vk;case"linkViaPopup":case"linkViaRedirect":return wk;case"reauthViaPopup":case"reauthViaRedirect":return Ek;default:vi(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new sh(2e3,1e4);async function xk(n,e,t){if(qn(n.app))return Promise.reject(Di(n,"operation-not-supported-in-this-environment"));const i=ma(n);nO(n,e,E_);const s=HS(i,t);return new eo(i,"signInViaPopup",e,s).executeNotNull()}class eo extends GS{constructor(e,t,i,s,o){super(e,t,s,o),this.provider=i,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=w_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bk.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="pendingRedirect",nf=new Map;class Sk extends GS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=nf.get(this.auth._key());if(!e){try{const i=await Ak(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ak(n,e){const t=Rk(e),i=Nk(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function Ck(n,e){nf.set(n._key(),e)}function Nk(n){return Br(n._redirectPersistence)}function Rk(n){return tf(Tk,n.config.apiKey,n.name)}async function Ik(n,e,t=!1){if(qn(n.app))return Promise.reject(Yr(n));const i=ma(n),s=HS(i,e),c=await new Sk(i,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=10*60*1e3;class Ok{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!YS(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dk&&this.cachedEventUids.clear(),this.cachedEventUids.has(kb(e))}saveEventToCache(e){this.cachedEventUids.add(kb(e)),this.lastProcessedEventTime=Date.now()}}function kb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(n,e={}){return is(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jk=/^https?/;async function Lk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Mk(n);for(const t of e)try{if(Vk(t))return}catch{}vi(n,"unauthorized-domain")}function Vk(n){const e=_y(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!jk.test(t))return!1;if(Pk.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new sh(3e4,6e4);function Mb(){const n=rr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Fk(n){return new Promise((e,t)=>{var i,s,o;function c(){Mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mb(),t(Di(n,"network-request-failed"))},timeout:Uk.get()})}if(!((s=(i=rr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=rr().gapi)===null||o===void 0)&&o.load)c();else{const d=IO("iframefcb");return rr()[d]=()=>{gapi.load?c():t(Di(n,"network-request-failed"))},RS(`${RO()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw rf=null,e})}let rf=null;function qk(n){return rf=rf||Fk(n),rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new sh(5e3,15e3),Bk="__/auth/iframe",Hk="emulator/auth/iframe",Gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wk(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?p_(e,Hk):`https://${n.config.authDomain}/${Bk}`,i={apiKey:e.apiKey,appName:n.name,v:mo},s=Yk.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Gl(i).slice(1)}`}async function Qk(n){const e=await qk(n),t=rr().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:Wk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gk,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=Di(n,"network-request-failed"),d=rr().setTimeout(()=>{o(c)},zk.get());function m(){rr().clearTimeout(d),s(i)}i.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Kk=500,Xk=600,Zk="_blank",Jk="http://localhost";class Pb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eM(n,e,t,i=Kk,s=Xk){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},$k),{width:i.toString(),height:s.toString(),top:o,left:c}),p=An().toLowerCase();t&&(d=bS(p)?Zk:t),ES(p)&&(e=e||Jk,m.scrollbars="yes");const v=Object.entries(m).reduce((w,[T,S])=>`${w}${T}=${S},`,"");if(EO(p)&&d!=="_self")return tM(e||"",d),new Pb(null);const E=window.open(e||"",d,v);be(E,n,"popup-blocked");try{E.focus()}catch{}return new Pb(E)}function tM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="__/auth/handler",iM="emulator/auth/handler",rM=encodeURIComponent("fac");async function jb(n,e,t,i,s,o){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:mo,eventId:s};if(e instanceof E_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",dy(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof oh){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),p=m?`#${rM}=${encodeURIComponent(m)}`:"";return`${sM(n)}?${Gl(d).slice(1)}${p}`}function sM({config:n}){return n.emulator?p_(n,iM):`https://${n.authDomain}/${nM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class aM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=US,this._completeRedirectFn=Ik,this._overrideRedirectResult=Ck}async _openPopup(e,t,i,s){var o;Xr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await jb(e,t,i,_y(),s);return eM(e,c,w_())}async _openRedirect(e,t,i,s){await this._originValidation(e);const o=await jb(e,t,i,_y(),s);return ck(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Xr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Qk(e),i=new Ok(e);return t.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($g,{type:$g},s=>{var o;const c=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[$g];c!==void 0&&t(!!c),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CS()||wS()||y_()}}const oM=aM;var Lb="@firebase/auth",Vb="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uM(n){ro(new ia("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NS(n)},p=new AO(i,s,o,m);return jO(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ro(new ia("auth-internal",e=>{const t=ma(e.getProvider("auth").getImmediate());return(i=>new lM(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(Lb,Vb,cM(n)),ir(Lb,Vb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=5*60,dM=iS("authIdTokenMaxAge")||hM;let Ub=null;const fM=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>dM)return;const s=t==null?void 0:t.token;Ub!==s&&(Ub=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function mM(n=h_()){const e=tm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=PO(n,{popupRedirectResolver:oM,persistence:[_k,ak,US]}),i=iS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=fM(o.toString());tk(t,c,()=>c(t.currentUser)),ek(t,d=>c(d))}}const s=eS("auth");return s&&LO(t,`http://${s}`),t}function pM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}CO({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=Di("internal-error");o.customData=s,t(o)},i.type="text/javascript",i.charset="UTF-8",pM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uM("Browser");var Fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,WS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,C){function R(){}R.prototype=C.prototype,k.D=C.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(I,j,q){for(var O=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)O[rt-2]=arguments[rt];return C.prototype[j].apply(I,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,C,R){R||(R=0);var I=Array(16);if(typeof C=="string")for(var j=0;16>j;++j)I[j]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(j=0;16>j;++j)I[j]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=k.g[0],R=k.g[1],j=k.g[2];var q=k.g[3],O=C+(q^R&(j^q))+I[0]+3614090360&4294967295;C=R+(O<<7&4294967295|O>>>25),O=q+(j^C&(R^j))+I[1]+3905402710&4294967295,q=C+(O<<12&4294967295|O>>>20),O=j+(R^q&(C^R))+I[2]+606105819&4294967295,j=q+(O<<17&4294967295|O>>>15),O=R+(C^j&(q^C))+I[3]+3250441966&4294967295,R=j+(O<<22&4294967295|O>>>10),O=C+(q^R&(j^q))+I[4]+4118548399&4294967295,C=R+(O<<7&4294967295|O>>>25),O=q+(j^C&(R^j))+I[5]+1200080426&4294967295,q=C+(O<<12&4294967295|O>>>20),O=j+(R^q&(C^R))+I[6]+2821735955&4294967295,j=q+(O<<17&4294967295|O>>>15),O=R+(C^j&(q^C))+I[7]+4249261313&4294967295,R=j+(O<<22&4294967295|O>>>10),O=C+(q^R&(j^q))+I[8]+1770035416&4294967295,C=R+(O<<7&4294967295|O>>>25),O=q+(j^C&(R^j))+I[9]+2336552879&4294967295,q=C+(O<<12&4294967295|O>>>20),O=j+(R^q&(C^R))+I[10]+4294925233&4294967295,j=q+(O<<17&4294967295|O>>>15),O=R+(C^j&(q^C))+I[11]+2304563134&4294967295,R=j+(O<<22&4294967295|O>>>10),O=C+(q^R&(j^q))+I[12]+1804603682&4294967295,C=R+(O<<7&4294967295|O>>>25),O=q+(j^C&(R^j))+I[13]+4254626195&4294967295,q=C+(O<<12&4294967295|O>>>20),O=j+(R^q&(C^R))+I[14]+2792965006&4294967295,j=q+(O<<17&4294967295|O>>>15),O=R+(C^j&(q^C))+I[15]+1236535329&4294967295,R=j+(O<<22&4294967295|O>>>10),O=C+(j^q&(R^j))+I[1]+4129170786&4294967295,C=R+(O<<5&4294967295|O>>>27),O=q+(R^j&(C^R))+I[6]+3225465664&4294967295,q=C+(O<<9&4294967295|O>>>23),O=j+(C^R&(q^C))+I[11]+643717713&4294967295,j=q+(O<<14&4294967295|O>>>18),O=R+(q^C&(j^q))+I[0]+3921069994&4294967295,R=j+(O<<20&4294967295|O>>>12),O=C+(j^q&(R^j))+I[5]+3593408605&4294967295,C=R+(O<<5&4294967295|O>>>27),O=q+(R^j&(C^R))+I[10]+38016083&4294967295,q=C+(O<<9&4294967295|O>>>23),O=j+(C^R&(q^C))+I[15]+3634488961&4294967295,j=q+(O<<14&4294967295|O>>>18),O=R+(q^C&(j^q))+I[4]+3889429448&4294967295,R=j+(O<<20&4294967295|O>>>12),O=C+(j^q&(R^j))+I[9]+568446438&4294967295,C=R+(O<<5&4294967295|O>>>27),O=q+(R^j&(C^R))+I[14]+3275163606&4294967295,q=C+(O<<9&4294967295|O>>>23),O=j+(C^R&(q^C))+I[3]+4107603335&4294967295,j=q+(O<<14&4294967295|O>>>18),O=R+(q^C&(j^q))+I[8]+1163531501&4294967295,R=j+(O<<20&4294967295|O>>>12),O=C+(j^q&(R^j))+I[13]+2850285829&4294967295,C=R+(O<<5&4294967295|O>>>27),O=q+(R^j&(C^R))+I[2]+4243563512&4294967295,q=C+(O<<9&4294967295|O>>>23),O=j+(C^R&(q^C))+I[7]+1735328473&4294967295,j=q+(O<<14&4294967295|O>>>18),O=R+(q^C&(j^q))+I[12]+2368359562&4294967295,R=j+(O<<20&4294967295|O>>>12),O=C+(R^j^q)+I[5]+4294588738&4294967295,C=R+(O<<4&4294967295|O>>>28),O=q+(C^R^j)+I[8]+2272392833&4294967295,q=C+(O<<11&4294967295|O>>>21),O=j+(q^C^R)+I[11]+1839030562&4294967295,j=q+(O<<16&4294967295|O>>>16),O=R+(j^q^C)+I[14]+4259657740&4294967295,R=j+(O<<23&4294967295|O>>>9),O=C+(R^j^q)+I[1]+2763975236&4294967295,C=R+(O<<4&4294967295|O>>>28),O=q+(C^R^j)+I[4]+1272893353&4294967295,q=C+(O<<11&4294967295|O>>>21),O=j+(q^C^R)+I[7]+4139469664&4294967295,j=q+(O<<16&4294967295|O>>>16),O=R+(j^q^C)+I[10]+3200236656&4294967295,R=j+(O<<23&4294967295|O>>>9),O=C+(R^j^q)+I[13]+681279174&4294967295,C=R+(O<<4&4294967295|O>>>28),O=q+(C^R^j)+I[0]+3936430074&4294967295,q=C+(O<<11&4294967295|O>>>21),O=j+(q^C^R)+I[3]+3572445317&4294967295,j=q+(O<<16&4294967295|O>>>16),O=R+(j^q^C)+I[6]+76029189&4294967295,R=j+(O<<23&4294967295|O>>>9),O=C+(R^j^q)+I[9]+3654602809&4294967295,C=R+(O<<4&4294967295|O>>>28),O=q+(C^R^j)+I[12]+3873151461&4294967295,q=C+(O<<11&4294967295|O>>>21),O=j+(q^C^R)+I[15]+530742520&4294967295,j=q+(O<<16&4294967295|O>>>16),O=R+(j^q^C)+I[2]+3299628645&4294967295,R=j+(O<<23&4294967295|O>>>9),O=C+(j^(R|~q))+I[0]+4096336452&4294967295,C=R+(O<<6&4294967295|O>>>26),O=q+(R^(C|~j))+I[7]+1126891415&4294967295,q=C+(O<<10&4294967295|O>>>22),O=j+(C^(q|~R))+I[14]+2878612391&4294967295,j=q+(O<<15&4294967295|O>>>17),O=R+(q^(j|~C))+I[5]+4237533241&4294967295,R=j+(O<<21&4294967295|O>>>11),O=C+(j^(R|~q))+I[12]+1700485571&4294967295,C=R+(O<<6&4294967295|O>>>26),O=q+(R^(C|~j))+I[3]+2399980690&4294967295,q=C+(O<<10&4294967295|O>>>22),O=j+(C^(q|~R))+I[10]+4293915773&4294967295,j=q+(O<<15&4294967295|O>>>17),O=R+(q^(j|~C))+I[1]+2240044497&4294967295,R=j+(O<<21&4294967295|O>>>11),O=C+(j^(R|~q))+I[8]+1873313359&4294967295,C=R+(O<<6&4294967295|O>>>26),O=q+(R^(C|~j))+I[15]+4264355552&4294967295,q=C+(O<<10&4294967295|O>>>22),O=j+(C^(q|~R))+I[6]+2734768916&4294967295,j=q+(O<<15&4294967295|O>>>17),O=R+(q^(j|~C))+I[13]+1309151649&4294967295,R=j+(O<<21&4294967295|O>>>11),O=C+(j^(R|~q))+I[4]+4149444226&4294967295,C=R+(O<<6&4294967295|O>>>26),O=q+(R^(C|~j))+I[11]+3174756917&4294967295,q=C+(O<<10&4294967295|O>>>22),O=j+(C^(q|~R))+I[2]+718787259&4294967295,j=q+(O<<15&4294967295|O>>>17),O=R+(q^(j|~C))+I[9]+3951481745&4294967295,k.g[0]=k.g[0]+C&4294967295,k.g[1]=k.g[1]+(j+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+j&4294967295,k.g[3]=k.g[3]+q&4294967295}i.prototype.u=function(k,C){C===void 0&&(C=k.length);for(var R=C-this.blockSize,I=this.B,j=this.h,q=0;q<C;){if(j==0)for(;q<=R;)s(this,k,q),q+=this.blockSize;if(typeof k=="string"){for(;q<C;)if(I[j++]=k.charCodeAt(q++),j==this.blockSize){s(this,I),j=0;break}}else for(;q<C;)if(I[j++]=k[q++],j==this.blockSize){s(this,I),j=0;break}}this.h=j,this.o+=C},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var C=1;C<k.length-8;++C)k[C]=0;var R=8*this.o;for(C=k.length-8;C<k.length;++C)k[C]=R&255,R/=256;for(this.u(k),k=Array(16),C=R=0;4>C;++C)for(var I=0;32>I;I+=8)k[R++]=this.g[C]>>>I&255;return k};function o(k,C){var R=d;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=C(k)}function c(k,C){this.h=C;for(var R=[],I=!0,j=k.length-1;0<=j;j--){var q=k[j]|0;I&&q==C||(R[j]=q,I=!1)}this.g=R}var d={};function m(k){return-128<=k&&128>k?o(k,function(C){return new c([C|0],0>C?-1:0)}):new c([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return L(p(-k));for(var C=[],R=1,I=0;k>=R;I++)C[I]=k/R|0,R*=4294967296;return new c(C,0)}function v(k,C){if(k.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(k.charAt(0)=="-")return L(v(k.substring(1),C));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(C,8)),I=E,j=0;j<k.length;j+=8){var q=Math.min(8,k.length-j),O=parseInt(k.substring(j,j+q),C);8>q?(q=p(Math.pow(C,q)),I=I.j(q).add(p(O))):(I=I.j(R),I=I.add(p(O)))}return I}var E=m(0),w=m(1),T=m(16777216);n=c.prototype,n.m=function(){if(P(this))return-L(this).m();for(var k=0,C=1,R=0;R<this.g.length;R++){var I=this.i(R);k+=(0<=I?I:4294967296+I)*C,C*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S(this))return"0";if(P(this))return"-"+L(this).toString(k);for(var C=p(Math.pow(k,6)),R=this,I="";;){var j=te(R,C).g;R=z(R,j.j(C));var q=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=j,S(R))return q+I;for(;6>q.length;)q="0"+q;I=q+I}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function S(k){if(k.h!=0)return!1;for(var C=0;C<k.g.length;C++)if(k.g[C]!=0)return!1;return!0}function P(k){return k.h==-1}n.l=function(k){return k=z(this,k),P(k)?-1:S(k)?0:1};function L(k){for(var C=k.g.length,R=[],I=0;I<C;I++)R[I]=~k.g[I];return new c(R,~k.h).add(w)}n.abs=function(){return P(this)?L(this):this},n.add=function(k){for(var C=Math.max(this.g.length,k.g.length),R=[],I=0,j=0;j<=C;j++){var q=I+(this.i(j)&65535)+(k.i(j)&65535),O=(q>>>16)+(this.i(j)>>>16)+(k.i(j)>>>16);I=O>>>16,q&=65535,O&=65535,R[j]=O<<16|q}return new c(R,R[R.length-1]&-2147483648?-1:0)};function z(k,C){return k.add(L(C))}n.j=function(k){if(S(this)||S(k))return E;if(P(this))return P(k)?L(this).j(L(k)):L(L(this).j(k));if(P(k))return L(this.j(L(k)));if(0>this.l(T)&&0>k.l(T))return p(this.m()*k.m());for(var C=this.g.length+k.g.length,R=[],I=0;I<2*C;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(var j=0;j<k.g.length;j++){var q=this.i(I)>>>16,O=this.i(I)&65535,rt=k.i(j)>>>16,bt=k.i(j)&65535;R[2*I+2*j]+=O*bt,Y(R,2*I+2*j),R[2*I+2*j+1]+=q*bt,Y(R,2*I+2*j+1),R[2*I+2*j+1]+=O*rt,Y(R,2*I+2*j+1),R[2*I+2*j+2]+=q*rt,Y(R,2*I+2*j+2)}for(I=0;I<C;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=C;I<2*C;I++)R[I]=0;return new c(R,0)};function Y(k,C){for(;(k[C]&65535)!=k[C];)k[C+1]+=k[C]>>>16,k[C]&=65535,C++}function Q(k,C){this.g=k,this.h=C}function te(k,C){if(S(C))throw Error("division by zero");if(S(k))return new Q(E,E);if(P(k))return C=te(L(k),C),new Q(L(C.g),L(C.h));if(P(C))return C=te(k,L(C)),new Q(L(C.g),C.h);if(30<k.g.length){if(P(k)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var R=w,I=C;0>=I.l(k);)R=re(R),I=re(I);var j=ne(R,1),q=ne(I,1);for(I=ne(I,2),R=ne(R,2);!S(I);){var O=q.add(I);0>=O.l(k)&&(j=j.add(R),q=O),I=ne(I,1),R=ne(R,1)}return C=z(k,j.j(C)),new Q(j,C)}for(j=E;0<=k.l(C);){for(R=Math.max(1,Math.floor(k.m()/C.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),q=p(R),O=q.j(C);P(O)||0<O.l(k);)R-=I,q=p(R),O=q.j(C);S(q)&&(q=w),j=j.add(q),k=z(k,O)}return new Q(j,k)}n.A=function(k){return te(this,k).h},n.and=function(k){for(var C=Math.max(this.g.length,k.g.length),R=[],I=0;I<C;I++)R[I]=this.i(I)&k.i(I);return new c(R,this.h&k.h)},n.or=function(k){for(var C=Math.max(this.g.length,k.g.length),R=[],I=0;I<C;I++)R[I]=this.i(I)|k.i(I);return new c(R,this.h|k.h)},n.xor=function(k){for(var C=Math.max(this.g.length,k.g.length),R=[],I=0;I<C;I++)R[I]=this.i(I)^k.i(I);return new c(R,this.h^k.h)};function re(k){for(var C=k.g.length+1,R=[],I=0;I<C;I++)R[I]=k.i(I)<<1|k.i(I-1)>>>31;return new c(R,k.h)}function ne(k,C){var R=C>>5;C%=32;for(var I=k.g.length-R,j=[],q=0;q<I;q++)j[q]=0<C?k.i(q+R)>>>C|k.i(q+R+1)<<32-C:k.i(q+R);return new c(j,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,WS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Xs=c}).apply(typeof Fb<"u"?Fb:typeof self<"u"?self:typeof window<"u"?window:{});var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QS,vu,$S,sf,by,KS,XS,ZS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,b){return h==Array.prototype||h==Object.prototype||(h[_]=b.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hd=="object"&&Hd];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function s(h,_){if(_)e:{var b=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var H=h[N];if(!(H in b))break e;b=b[H]}h=h[h.length-1],N=b[h],_=_(N),_!=N&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var b=0,N=!1,H={next:function(){if(!N&&b<h.length){var $=b++;return{value:_($,h[$]),done:!1}}return N=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(h){return h||function(){return o(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,b){return h.call.apply(h.bind,arguments)}function E(h,_,b){if(!h)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,N),h.apply(_,H)}}return function(){return h.apply(_,arguments)}}function w(h,_,b){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,w.apply(null,arguments)}function T(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function S(h,_){function b(){}b.prototype=_.prototype,h.aa=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(N,H,$){for(var oe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)oe[ze-2]=arguments[ze];return _.prototype[H].apply(N,oe)}}function P(h){const _=h.length;if(0<_){const b=Array(_);for(let N=0;N<_;N++)b[N]=h[N];return b}return[]}function L(h,_){for(let b=1;b<arguments.length;b++){const N=arguments[b];if(m(N)){const H=h.length||0,$=N.length||0;h.length=H+$;for(let oe=0;oe<$;oe++)h[H+oe]=N[oe]}else h.push(N)}}class z{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Y(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function te(h){return te[" "](h),h}te[" "]=function(){};var re=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ne(h,_,b){for(const N in h)_.call(b,h[N],N,h)}function k(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function C(h){const _={};for(const b in h)_[b]=h[b];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,_){let b,N;for(let H=1;H<arguments.length;H++){N=arguments[H];for(b in N)h[b]=N[b];for(let $=0;$<R.length;$++)b=R[$],Object.prototype.hasOwnProperty.call(N,b)&&(h[b]=N[b])}}function j(h){var _=1;h=h.split(":");const b=[];for(;0<_&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function q(h){d.setTimeout(()=>{throw h},0)}function O(){var h=Je;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class rt{constructor(){this.h=this.g=null}add(_,b){const N=bt.get();N.set(_,b),this.h?this.h.next=N:this.g=N,this.h=N}}var bt=new z(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,pe=!1,Je=new rt,V=()=>{const h=d.Promise.resolve(void 0);Ee=()=>{h.then(se)}};var se=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(b){q(b)}var _=bt;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}pe=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};d.addEventListener("test",b,_),d.removeEventListener("test",b,_)}catch{}return h}();function De(h,_){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(re){e:{try{te(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement);this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&De.aa.h.call(this)}}S(De,ue);var Re={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function xt(h,_,b,N,H){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!N,this.ha=H,this.key=++Ye,this.da=this.fa=!1}function nt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Cn(h){this.src=h,this.g={},this.h=0}Cn.prototype.add=function(h,_,b,N,H){var $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);var oe=Jn(h,_,N,H);return-1<oe?(_=h[oe],b||(_.fa=!1)):(_=new xt(_,this.src,$,!!N,H),_.fa=b,h.push(_)),_};function dr(h,_){var b=_.type;if(b in h.g){var N=h.g[b],H=Array.prototype.indexOf.call(N,_,void 0),$;($=0<=H)&&Array.prototype.splice.call(N,H,1),$&&(nt(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Jn(h,_,b,N){for(var H=0;H<h.length;++H){var $=h[H];if(!$.da&&$.listener==_&&$.capture==!!b&&$.ha==N)return H}return-1}var ss="closure_lm_"+(1e6*Math.random()|0),as={};function fr(h,_,b,N,H){if(Array.isArray(_)){for(var $=0;$<_.length;$++)fr(h,_[$],b,N,H);return null}return b=wh(b),h&&h[jt]?h.K(_,b,p(N)?!!N.capture:!1,H):tc(h,_,b,!1,N,H)}function tc(h,_,b,N,H,$){if(!_)throw Error("Invalid event type");var oe=p(H)?!!H.capture:!!H,ze=nc(h);if(ze||(h[ss]=ze=new Cn(h)),b=ze.add(_,b,N,oe,$),b.proxy)return b;if(N=wo(),b.proxy=N,N.src=h,N.listener=b,h.addEventListener)he||(H=oe),H===void 0&&(H=!1),h.addEventListener(_.toString(),N,H);else if(h.attachEvent)h.attachEvent(xo(_.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function wo(){function h(b){return _.call(h.src,h.listener,b)}const _=Lm;return h}function bo(h,_,b,N,H){if(Array.isArray(_))for(var $=0;$<_.length;$++)bo(h,_[$],b,N,H);else N=p(N)?!!N.capture:!!N,b=wh(b),h&&h[jt]?(h=h.i,_=String(_).toString(),_ in h.g&&($=h.g[_],b=Jn($,b,N,H),-1<b&&(nt($[b]),Array.prototype.splice.call($,b,1),$.length==0&&(delete h.g[_],h.h--)))):h&&(h=nc(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Jn(_,b,N,H)),(b=-1<h?_[h]:null)&&_a(b))}function _a(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[jt])dr(_.i,h);else{var b=h.type,N=h.proxy;_.removeEventListener?_.removeEventListener(b,N,h.capture):_.detachEvent?_.detachEvent(xo(b),N):_.addListener&&_.removeListener&&_.removeListener(N),(b=nc(_))?(dr(b,h),b.h==0&&(b.src=null,_[ss]=null)):nt(h)}}}function xo(h){return h in as?as[h]:as[h]="on"+h}function Lm(h,_){if(h.da)h=!0;else{_=new De(_,this);var b=h.listener,N=h.ha||h.src;h.fa&&_a(h),h=b.call(N,_)}return h}function nc(h){return h=h[ss],h instanceof Cn?h:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function wh(h){return typeof h=="function"?h:(h[Ln]||(h[Ln]=function(_){return h.handleEvent(_)}),h[Ln])}function Ht(){ye.call(this),this.i=new Cn(this),this.M=this,this.F=null}S(Ht,ye),Ht.prototype[jt]=!0,Ht.prototype.removeEventListener=function(h,_,b,N){bo(this,h,_,b,N)};function tn(h,_){var b,N=h.F;if(N)for(b=[];N;N=N.F)b.push(N);if(h=h.M,N=_.type||_,typeof _=="string")_=new ue(_,h);else if(_ instanceof ue)_.target=_.target||h;else{var H=_;_=new ue(N,h),I(_,H)}if(H=!0,b)for(var $=b.length-1;0<=$;$--){var oe=_.g=b[$];H=mr(oe,N,!0,_)&&H}if(oe=_.g=h,H=mr(oe,N,!0,_)&&H,H=mr(oe,N,!1,_)&&H,b)for($=0;$<b.length;$++)oe=_.g=b[$],H=mr(oe,N,!1,_)&&H}Ht.prototype.N=function(){if(Ht.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var b=h.g[_],N=0;N<b.length;N++)nt(b[N]);delete h.g[_],h.h--}}this.F=null},Ht.prototype.K=function(h,_,b,N){return this.i.add(String(h),_,!1,b,N)},Ht.prototype.L=function(h,_,b,N){return this.i.add(String(h),_,!0,b,N)};function mr(h,_,b,N){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,$=0;$<_.length;++$){var oe=_[$];if(oe&&!oe.da&&oe.capture==b){var ze=oe.listener,Yt=oe.ha||oe.src;oe.fa&&dr(h.i,oe),H=ze.call(Yt,N)!==!1&&H}}return H&&!N.defaultPrevented}function bh(h,_,b){if(typeof h=="function")b&&(h=w(h,b));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function ic(h){h.g=bh(()=>{h.g=null,h.i&&(h.i=!1,ic(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Vm extends ye{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ic(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(h){ye.call(this),this.h=h,this.g={}}S(va,ye);var os=[];function En(h){ne(h.g,function(_,b){this.g.hasOwnProperty(b)&&_a(_)},h),h.g={}}va.prototype.N=function(){va.aa.N.call(this),En(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rc=d.JSON.stringify,ji=d.JSON.parse,Nn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function sc(){}sc.prototype.h=null;function xh(h){return h.h||(h.h=h.i())}function Th(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ls(){ue.call(this,"d")}S(ls,ue);function xi(){ue.call(this,"c")}S(xi,ue);var ei={},cs=null;function To(){return cs=cs||new Ht}ei.La="serverreachability";function ac(h){ue.call(this,ei.La,h)}S(ac,ue);function us(h){const _=To();tn(_,new ac(_))}ei.STAT_EVENT="statevent";function So(h,_){ue.call(this,ei.STAT_EVENT,h),this.stat=_}S(So,ue);function Dt(h){const _=To();tn(_,new So(_,h))}ei.Ma="timingevent";function Sh(h,_){ue.call(this,ei.Ma,h),this.size=_}S(Sh,ue);function hs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function ds(){this.g=!0}ds.prototype.xa=function(){this.g=!1};function Ah(h,_,b,N,H,$){h.info(function(){if(h.g)if($)for(var oe="",ze=$.split("&"),Yt=0;Yt<ze.length;Yt++){var Be=ze[Yt].split("=");if(1<Be.length){var sn=Be[0];Be=Be[1];var Wt=sn.split("_");oe=2<=Wt.length&&Wt[1]=="type"?oe+(sn+"="+Be+"&"):oe+(sn+"=redacted&")}}else oe=null;else oe=$;return"XMLHTTP REQ ("+N+") [attempt "+H+"]: "+_+`
`+b+`
`+oe})}function Ch(h,_,b,N,H,$,oe){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+H+"]: "+_+`
`+b+`
`+$+" "+oe})}function fs(h,_,b,N){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+nn(h,b)+(N?" "+N:"")})}function Vi(h,_){h.info(function(){return"TIMEOUT: "+_})}ds.prototype.info=function(){};function nn(h,_){if(!h.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var N=b[h];if(!(2>N.length)){var H=N[1];if(Array.isArray(H)&&!(1>H.length)){var $=H[0];if($!="noop"&&$!="stop"&&$!="close")for(var oe=1;oe<H.length;oe++)H[oe]=""}}}}return rc(b)}catch{return _}}var Gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ea;function Ao(){}S(Ao,sc),Ao.prototype.g=function(){return new XMLHttpRequest},Ao.prototype.i=function(){return{}},Ea=new Ao;function Ui(h,_,b,N){this.j=h,this.i=_,this.l=b,this.R=N||1,this.U=new va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oc}function oc(){this.i=null,this.g="",this.h=!1}var ms={},wa={};function Ti(h,_,b){h.L=1,h.v=Ta(Tt(_)),h.m=b,h.P=!0,gr(h,null)}function gr(h,_){h.F=Date.now(),yt(h),h.A=Tt(h.v);var b=h.A,N=h.R;Array.isArray(N)||(N=[String(N)]),vr(b.i,"t",N),h.C=0,b=h.j.J,h.h=new oc,h.g=qh(h.j,b?_:null,!h.m),0<h.O&&(h.M=new Vm(w(h.Y,h,h.g),h.O)),_=h.U,b=h.g,N=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(os[0]=H.toString()),H=os);for(var $=0;$<H.length;$++){var oe=fr(b,H[$],N||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.H?C(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),us(),Ah(h.i,h.u,h.A,h.l,h.R,h.m)}Ui.prototype.ca=function(h){h=h.target;const _=this.M;_&&si(h)==3?_.j():this.Y(h)},Ui.prototype.Y=function(h){try{if(h==this.g)e:{const Wt=si(this.g);var _=this.g.Ba();const xr=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||kh(this.g)))){this.J||Wt!=4||_==7||(_==8||0>=xr?us(3):us(2)),Co(this);var b=this.g.Z();this.X=b;t:if(ps(this)){var N=kh(this.g);h="";var H=N.length,$=si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),Gn(this);var oe="";break t}this.h.i=new d.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,h+=this.h.i.decode(N[_],{stream:!($&&_==H-1)});N.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=b==200,Ch(this.i,this.u,this.A,this.l,this.R,Wt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Yt=this.g;if((ze=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ze)){var Be=ze;break t}}Be=null}if(b=Be)fs(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yn(this,b);else{this.o=!1,this.s=3,Dt(12),Vn(this),Gn(this);break e}}if(this.P){b=!0;let dn;for(;!this.J&&this.C<oe.length;)if(dn=gs(this,oe),dn==wa){Wt==4&&(this.s=4,Dt(14),b=!1),fs(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==ms){this.s=4,Dt(15),fs(this.i,this.l,oe,"[Invalid Chunk]"),b=!1;break}else fs(this.i,this.l,dn,null),Yn(this,dn);if(ps(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||oe.length!=0||this.h.h||(this.s=1,Dt(16),b=!1),this.o=this.o&&b,!b)fs(this.i,this.l,oe,"[Invalid Chunked Response]"),Vn(this),Gn(this);else if(0<oe.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Da(sn),sn.M=!0,Dt(11))}}else fs(this.i,this.l,oe,null),Yn(this,oe);Wt==4&&Vn(this),this.o&&!this.J&&(Wt==4?Vh(this.j,this):(this.o=!1,yt(this)))}else Hm(this.g),b==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),Vn(this),Gn(this)}}}catch{}finally{}};function ps(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function gs(h,_){var b=h.C,N=_.indexOf(`
`,b);return N==-1?wa:(b=Number(_.substring(b,N)),isNaN(b)?ms:(N+=1,N+b>_.length?wa:(_=_.slice(N,N+b),h.C=N+b,_)))}Ui.prototype.cancel=function(){this.J=!0,Vn(this)};function yt(h){h.S=Date.now()+h.I,lc(h,h.I)}function lc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=hs(w(h.ba,h),_)}function Co(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Ui.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Vi(this.i,this.A),this.L!=2&&(us(),Dt(17)),Vn(this),this.s=2,Gn(this)):lc(this,this.S-h)};function Gn(h){h.j.G==0||h.J||Vh(h.j,h)}function Vn(h){Co(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,En(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Yn(h,_){try{var b=h.j;if(b.G!=0&&(b.g==h||ys(b.h,h))){if(!h.K&&ys(b.h,h)&&b.G==3){try{var N=b.Da.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var H=N;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)Lo(b),Po(b);else break e;vc(b),Dt(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=hs(w(b.Za,b),6e3));if(1>=Nh(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else br(b,11)}else if((h.K||b.g==h)&&Lo(b),!Y(_))for(H=b.Da.g.parse(_),_=0;_<H.length;_++){let Be=H[_];if(b.T=Be[0],Be=Be[1],b.G==2)if(Be[0]=="c"){b.K=Be[1],b.ia=Be[2];const sn=Be[3];sn!=null&&(b.la=sn,b.j.info("VER="+b.la));const Wt=Be[4];Wt!=null&&(b.Aa=Wt,b.j.info("SVER="+b.Aa));const xr=Be[5];xr!=null&&typeof xr=="number"&&0<xr&&(N=1.5*xr,b.L=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const dn=h.g;if(dn){const Yi=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var $=N.h;$.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(_s($,$.h),$.h=null))}if(N.D){const wc=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;wc&&(N.ya=wc,We(N.I,N.D,wc))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),N=b;var oe=h;if(N.qa=Fh(N,N.J?N.ia:null,N.W),oe.K){ti(N.h,oe);var ze=oe,Yt=N.L;Yt&&(ze.I=Yt),ze.B&&(Co(ze),yt(ze)),N.g=oe}else jh(N);0<b.i.length&&jo(b)}else Be[0]!="stop"&&Be[0]!="close"||br(b,7);else b.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?br(b,7):yc(b):Be[0]!="noop"&&b.l&&b.l.ta(Be),b.v=0)}}us(4)}catch{}}var Um=class{constructor(h,_){this.g=h,this.map=_}};function cc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nh(h){return h.h?1:h.g?h.g.size:0}function ys(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function _s(h,_){h.g?h.g.add(_):h.h=_}function ti(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}cc.prototype.cancel=function(){if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.D);return _}return P(h.i)}function Rh(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],b=h.length,N=0;N<b;N++)_.push(h[N]);return _}_=[],b=0;for(N in h)_[b++]=h[N];return _}function Fm(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var b=0;b<h;b++)_.push(b);return _}_=[],b=0;for(const N in h)_[b++]=N;return _}}}function ba(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var b=Fm(h),N=Rh(h),H=N.length,$=0;$<H;$++)_.call(void 0,N[$],b&&b[$],h)}var hc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function No(h,_){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var N=h[b].indexOf("="),H=null;if(0<=N){var $=h[b].substring(0,N);H=h[b].substring(N+1)}else $=h[b];_($,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function yr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof yr){this.h=h.h,vs(this,h.j),this.o=h.o,this.g=h.g,xa(this,h.s),this.l=h.l;var _=h.i,b=new Fi;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),Ro(this,b),this.m=h.m}else h&&(_=String(h).match(hc))?(this.h=!1,vs(this,_[1]||"",!0),this.o=Es(_[2]||""),this.g=Es(_[3]||"",!0),xa(this,_[4]),this.l=Es(_[5]||"",!0),Ro(this,_[6]||"",!0),this.m=Es(_[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}yr.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ni(_,dc,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ni(_,dc,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(ni(b,b.charAt(0)=="/"?fc:Ih,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",ni(b,Bm)),h.join("")};function Tt(h){return new yr(h)}function vs(h,_,b){h.j=b?Es(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function xa(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Ro(h,_,b){_ instanceof Fi?(h.i=_,mc(h.i,h.h)):(b||(_=ni(_,zm)),h.i=new Fi(_,h.h))}function We(h,_,b){h.i.set(_,b)}function Ta(h){return We(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Es(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ni(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,qm),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var dc=/[#\/\?@]/g,Ih=/[#\?:]/g,fc=/[#\?]/g,zm=/[#\?@]/g,Bm=/#/g;function Fi(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ii(h){h.g||(h.g=new Map,h.h=0,h.i&&No(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=Fi.prototype,n.add=function(h,_){ii(this),this.i=null,h=Er(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function Io(h,_){ii(h),_=Er(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function _r(h,_){return ii(h),_=Er(h,_),h.g.has(_)}n.forEach=function(h,_){ii(this),this.g.forEach(function(b,N){b.forEach(function(H){h.call(_,H,N,this)},this)},this)},n.na=function(){ii(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let N=0;N<_.length;N++){const H=h[N];for(let $=0;$<H.length;$++)b.push(_[N])}return b},n.V=function(h){ii(this);let _=[];if(typeof h=="string")_r(this,h)&&(_=_.concat(this.g.get(Er(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)_=_.concat(h[b])}return _},n.set=function(h,_){return ii(this),this.i=null,h=Er(this,h),_r(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function vr(h,_,b){Io(h,_),0<b.length&&(h.i=null,h.g.set(Er(h,_),P(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var N=_[b];const $=encodeURIComponent(String(N)),oe=this.V(N);for(N=0;N<oe.length;N++){var H=$;oe[N]!==""&&(H+="="+encodeURIComponent(String(oe[N]))),h.push(H)}}return this.i=h.join("&")};function Er(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function mc(h,_){_&&!h.j&&(ii(h),h.i=null,h.g.forEach(function(b,N){var H=N.toLowerCase();N!=H&&(Io(this,N),vr(this,H,b))},h)),h.j=_}function Dh(h,_){const b=new ds;if(d.Image){const N=new Image;N.onload=T(ri,b,"TestLoadImage: loaded",!0,_,N),N.onerror=T(ri,b,"TestLoadImage: error",!1,_,N),N.onabort=T(ri,b,"TestLoadImage: abort",!1,_,N),N.ontimeout=T(ri,b,"TestLoadImage: timeout",!1,_,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else _(!1)}function Sa(h,_){const b=new ds,N=new AbortController,H=setTimeout(()=>{N.abort(),ri(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:N.signal}).then($=>{clearTimeout(H),$.ok?ri(b,"TestPingServer: ok",!0,_):ri(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),ri(b,"TestPingServer: error",!1,_)})}function ri(h,_,b,N,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),N(b)}catch{}}function Aa(){this.g=new Nn}function qi(h,_,b){const N=b||"";try{ba(h,function(H,$){let oe=H;p(H)&&(oe=rc(H)),_.push(N+$+"="+encodeURIComponent(oe))})}catch(H){throw _.push(N+"type="+encodeURIComponent("_badmap")),H}}function ws(h){this.l=h.Ub||null,this.j=h.eb||!1}S(ws,sc),ws.prototype.g=function(){return new wr(this.l,this.j)},ws.prototype.i=function(h){return function(){return h}}({});function wr(h,_){Ht.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(wr,Ht),n=wr.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Bi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function pc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?zi(this):Bi(this),this.readyState==3&&pc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,zi(this))},n.Qa=function(h){this.g&&(this.response=h,zi(this))},n.ga=function(){this.g&&zi(this)};function zi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Bi(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function Bi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function gc(h){let _="";return ne(h,function(b,N){_+=N,_+=":",_+=b,_+=`\r
`}),_}function rn(h,_,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=gc(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):We(h,_,b))}function et(h){Ht.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(et,Ht);var Do=/^https?$/i,Ca=["POST","PUT"];n=et.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ea.g(),this.v=this.o?xh(this.o):xh(Ea),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch($){Oh(this,$);return}if(h=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var H in N)b.set(H,N[H]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const $ of N.keys())b.set($,N.get($));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ca,_,void 0))||N||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of b)this.g.setRequestHeader($,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Na(this),this.u=!0,this.g.send(h),this.u=!1}catch($){Oh(this,$)}};function Oh(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Oo(h),Hi(h)}function Oo(h){h.A||(h.A=!0,tn(h,"complete"),tn(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,tn(this,"complete"),tn(this,"abort"),Hi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ko(this):this.bb())},n.bb=function(){ko(this)};function ko(h){if(h.h&&typeof c<"u"&&(!h.v[1]||si(h)!=4||h.Z()!=2)){if(h.u&&si(h)==4)bh(h.Ea,0,h);else if(tn(h,"readystatechange"),si(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var N;if(N=oe===0){var H=String(h.D).match(hc)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),N=!Do.test(H?H.toLowerCase():"")}b=N}if(b)tn(h,"complete"),tn(h,"success");else{h.m=6;try{var $=2<si(h)?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.Z()+"]",Oo(h)}}finally{Hi(h)}}}}function Hi(h,_){if(h.g){Na(h);const b=h.g,N=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||tn(h,"ready");try{b.onreadystatechange=N}catch{}}}function Na(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function si(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),ji(_)}};function kh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Hm(h){const _={};h=(h.g&&2<=si(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(Y(h[N]))continue;var b=j(h[N]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=_[H]||[];_[H]=$,$.push(b)}k(_,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ra(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function Mo(h){this.Aa=0,this.i=[],this.j=new ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ra("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ra("baseRetryDelayMs",5e3,h),this.cb=Ra("retryDelaySeedMs",1e4,h),this.Wa=Ra("forwardChannelMaxRetries",2,h),this.wa=Ra("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new cc(h&&h.concurrentRequestLimit),this.Da=new Aa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Mo.prototype,n.la=8,n.G=1,n.connect=function(h,_,b,N){Dt(0),this.W=h,this.H=_||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.I=Fh(this,null,this.W),jo(this)};function yc(h){if(Mh(h),h.G==3){var _=h.U++,b=Tt(h.I);if(We(b,"SID",h.K),We(b,"RID",_),We(b,"TYPE","terminate"),Ia(h,b),_=new Ui(h,h.j,_),_.L=2,_.v=Ta(Tt(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&d.Image&&(new Image().src=_.v,b=!0),b||(_.g=qh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),yt(_)}Uh(h)}function Po(h){h.g&&(Da(h),h.g.cancel(),h.g=null)}function Mh(h){Po(h),h.u&&(d.clearTimeout(h.u),h.u=null),Lo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function jo(h){if(!uc(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ee||V(),pe||(Ee(),pe=!0),Je.add(_,h),h.B=0}}function Gm(h,_){return Nh(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=hs(w(h.Ga,h,_),Ec(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new Ui(this,this.j,h);let $=this.o;if(this.S&&($?($=C($),I($,this.S)):$=this.S),this.m!==null||this.O||(H.H=$,$=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(_+=N,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Ph(this,H,_),b=Tt(this.I),We(b,"RID",h),We(b,"CVER",22),this.D&&We(b,"X-HTTP-Session-Id",this.D),Ia(this,b),$&&(this.O?_="headers="+encodeURIComponent(String(gc($)))+"&"+_:this.m&&rn(b,this.m,$)),_s(this.h,H),this.Ua&&We(b,"TYPE","init"),this.P?(We(b,"$req",_),We(b,"SID","null"),H.T=!0,Ti(H,b,null)):Ti(H,b,_),this.G=2}}else this.G==3&&(h?_c(this,h):this.i.length==0||uc(this.h)||_c(this))};function _c(h,_){var b;_?b=_.l:b=h.U++;const N=Tt(h.I);We(N,"SID",h.K),We(N,"RID",b),We(N,"AID",h.T),Ia(h,N),h.m&&h.o&&rn(N,h.m,h.o),b=new Ui(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Ph(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),_s(h.h,b),Ti(b,N,_)}function Ia(h,_){h.H&&ne(h.H,function(b,N){We(_,N,b)}),h.l&&ba({},function(b,N){We(_,N,b)})}function Ph(h,_,b){b=Math.min(h.i.length,b);var N=h.l?w(h.l.Na,h.l,h):null;e:{var H=h.i;let $=-1;for(;;){const oe=["count="+b];$==-1?0<b?($=H[0].g,oe.push("ofs="+$)):$=0:oe.push("ofs="+$);let ze=!0;for(let Yt=0;Yt<b;Yt++){let Be=H[Yt].g;const sn=H[Yt].map;if(Be-=$,0>Be)$=Math.max(0,H[Yt].g-100),ze=!1;else try{qi(sn,oe,"req"+Be+"_")}catch{N&&N(sn)}}if(ze){N=oe.join("&");break e}}}return h=h.i.splice(0,b),_.D=h,N}function jh(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ee||V(),pe||(Ee(),pe=!0),Je.add(_,h),h.v=0}}function vc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=hs(w(h.Fa,h),Ec(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Lh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=hs(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Po(this),Lh(this))};function Da(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Lh(h){h.g=new Ui(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Tt(h.qa);We(_,"RID","rpc"),We(_,"SID",h.K),We(_,"AID",h.T),We(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&We(_,"TO",h.ja),We(_,"TYPE","xmlhttp"),Ia(h,_),h.m&&h.o&&rn(_,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Ta(Tt(_)),b.m=null,b.P=!0,gr(b,h)}n.Za=function(){this.C!=null&&(this.C=null,Po(this),vc(this),Dt(19))};function Lo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Vh(h,_){var b=null;if(h.g==_){Lo(h),Da(h),h.g=null;var N=2}else if(ys(h.h,_))b=_.D,ti(h.h,_),N=1;else return;if(h.G!=0){if(_.o)if(N==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var H=h.B;N=To(),tn(N,new Sh(N,b)),jo(h)}else jh(h);else if(H=_.s,H==3||H==0&&0<_.X||!(N==1&&Gm(h,_)||N==2&&vc(h)))switch(b&&0<b.length&&(_=h.h,_.i=_.i.concat(b)),H){case 1:br(h,5);break;case 4:br(h,10);break;case 3:br(h,6);break;default:br(h,2)}}}function Ec(h,_){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*_}function br(h,_){if(h.j.info("Error code "+_),_==2){var b=w(h.fb,h),N=h.Xa;const H=!N;N=new yr(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||vs(N,"https"),Ta(N),H?Dh(N.toString(),b):Sa(N.toString(),b)}else Dt(2);h.G=0,h.l&&h.l.sa(_),Uh(h),Mh(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Uh(h){if(h.G=0,h.ka=[],h.l){const _=Rn(h.h);(_.length!=0||h.i.length!=0)&&(L(h.ka,_),L(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function Fh(h,_,b){var N=b instanceof yr?Tt(b):new yr(b);if(N.g!="")_&&(N.g=_+"."+N.g),xa(N,N.s);else{var H=d.location;N=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var $=new yr(null);N&&vs($,N),_&&($.g=_),H&&xa($,H),b&&($.l=b),N=$}return b=h.D,_=h.ya,b&&_&&We(N,b,_),We(N,"VER",h.la),Ia(h,N),N}function qh(h,_,b){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new et(new ws({eb:b})):new et(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}n=zh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vo(){}Vo.prototype.g=function(h,_){return new In(h,_)};function In(h,_){Ht.call(this),this.g=new Mo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!Y(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Y(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Gi(this)}S(In,Ht),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){yc(this.g)},In.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=rc(h),h=b);_.i.push(new Um(_.Ya++,h)),_.G==3&&jo(_)},In.prototype.N=function(){this.g.l=null,delete this.j,yc(this.g),delete this.g,In.aa.N.call(this)};function Bh(h){ls.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}S(Bh,ls);function Hh(){xi.call(this),this.status=1}S(Hh,xi);function Gi(h){this.g=h}S(Gi,zh),Gi.prototype.ua=function(){tn(this.g,"a")},Gi.prototype.ta=function(h){tn(this.g,new Bh(h))},Gi.prototype.sa=function(h){tn(this.g,new Hh)},Gi.prototype.ra=function(){tn(this.g,"b")},Vo.prototype.createWebChannel=Vo.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,ZS=function(){return new Vo},XS=function(){return To()},KS=ei,by={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gt.NO_ERROR=0,Gt.TIMEOUT=8,Gt.HTTP_ERROR=6,sf=Gt,pr.COMPLETE="complete",$S=pr,Th.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",Ht.prototype.listen=Ht.prototype.K,vu=Th,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,QS=et}).apply(typeof Hd<"u"?Hd:typeof self<"u"?self:typeof window<"u"?window:{});const qb="@firebase/firestore",zb="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new em("@firebase/firestore");function fl(){return oo.logLevel}function fe(n,...e){if(oo.logLevel<=Le.DEBUG){const t=e.map(x_);oo.debug(`Firestore (${Wl}): ${n}`,...t)}}function Zr(n,...e){if(oo.logLevel<=Le.ERROR){const t=e.map(x_);oo.error(`Firestore (${Wl}): ${n}`,...t)}}function Al(n,...e){if(oo.logLevel<=Le.WARN){const t=e.map(x_);oo.warn(`Firestore (${Wl}): ${n}`,...t)}}function x_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: `+n;throw Zr(e),new Error(e)}function tt(n,e){n||Te()}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tn.UNAUTHENTICATED))}shutdown(){}}class yM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _M{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0);let i=this.i;const s=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let o=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wr,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await s(this.currentUser)})},d=m=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt(typeof i.accessToken=="string"),new JS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new Tn(e)}}class vM{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class EM{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new vM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wM{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,qn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0);const i=o=>{o.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.R;return this.R=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Bb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt(typeof t.token=="string"),this.R=t.token,new Bb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=bM(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<t&&(i+=e.charAt(s[o]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function Cl(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=-62135596800,Gb=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Gb);return new Jt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hb)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gb}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Hb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Jt(0,0))}static max(){return new Se(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="__name__";class Zi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(),i===void 0?i=e.length-t:i>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zi?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const o=Zi.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Zi.isNumericId(e),s=Zi.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Zi.extractNumericId(e).compare(Zi.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class pt extends Zi{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new pt(t)}static emptyPath(){return new pt([])}}const xM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Zi{construct(e,t,i){return new yn(e,t,i)}static isValidIdentifier(e){return xM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yb}static keyField(){return new yn([Yb])}static fromServerFormat(e){const t=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ce(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ce(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(i+=d,s++):(o(),s++)}if(o(),c)throw new ce(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(t)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(pt.fromString(e))}static fromName(e){return new ve(pt.fromString(e).popFirst(5))}static empty(){return new ve(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=-1;function TM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(i===1e9?new Jt(t+1,0):new Jt(t,i));return new ra(s,ve.empty(),e)}function SM(n){return new ra(n.readTime,n.key,Vu)}class ra{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ra(Se.min(),ve.empty(),Vu)}static max(){return new ra(Se.max(),ve.empty(),Vu)}}function AM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==CM)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,i)=>{t(e)})}static reject(e){return new ee((t,i)=>{i(e)})}static waitFor(e){return new ee((t,i)=>{let s=0,o=0,c=!1;e.forEach(d=>{++s,d.next(()=>{++o,c&&o===s&&t()},m=>i(m))}),c=!0,o===s&&t()})}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next(s=>s?ee.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,o)=>{i.push(t.call(this,s,o))}),this.waitFor(i)}static mapArray(e,t){return new ee((i,s)=>{const o=e.length,c=new Array(o);let d=0;for(let m=0;m<o;m++){const p=m;t(e[p]).next(v=>{c[p]=v,++d,d===o&&i(c)},v=>s(v))}})}static doWhile(e,t){return new ee((i,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):i()};o()})}}function RM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $l(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}sm.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=-1;function am(n){return n==null}function bf(n){return n===0&&1/n==-1/0}function IM(n){return typeof n=="number"&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="";function DM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wb(e)),e=OM(n.get(t),e);return Wb(e)}function OM(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case tA:t+="";break;default:t+=o}}return t}function Wb(n){return n+tA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class xy{constructor(e,t){this.comparator=e,this.root=t||Zs.EMPTY}insert(e,t){return new xy(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zs.BLACK,null,null))}remove(e){return new xy(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gd(this.root,e,this.comparator,!0)}},Gd=class{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zs=class Ur{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??Ur.RED,this.left=s??Ur.EMPTY,this.right=o??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,o){return new Ur(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ur.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}};Zs.EMPTY=null,Zs.RED=!0,Zs.BLACK=!1;Zs.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,i,s,o){return this}insert(e,t,i){return new Zs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $b(this.data.getIterator())}getIteratorFrom(e){return new $b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class $b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new en(yn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iA("Invalid base64 string: "+o):o}}(e);return new _n(t)}static fromUint8Array(e){const t=function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o}(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const kM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(n){if(tt(!!n),typeof n=="string"){let e=0;const t=kM.exec(n);if(tt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function aa(n){return typeof n=="string"?_n.fromBase64String(n):_n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="server_timestamp",sA="__type__",aA="__previous_value__",oA="__local_write_time__";function S_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sA])===null||t===void 0?void 0:t.stringValue)===rA}function om(n){const e=n.mapValue.fields[aA];return S_(e)?om(e):e}function Uu(n){const e=sa(n.mapValue.fields[oA].timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,t,i,s,o,c,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const xf="(default)";class Fu{constructor(e,t){this.projectId=e,this.database=t||xf}static empty(){return new Fu("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="__type__",PM="__max__",Yd={mapValue:{}},cA="__vector__",Tf="value";function oa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?S_(n)?4:LM(n)?9007199254740991:jM(n)?10:11:Te()}function lr(n,e){if(n===e)return!0;const t=oa(n);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uu(n).isEqual(Uu(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=sa(s.timestampValue),d=sa(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return aa(s.bytesValue).isEqual(aa(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return kt(s.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return kt(s.integerValue)===kt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=kt(s.doubleValue),d=kt(o.doubleValue);return c===d?bf(c)===bf(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Cl(n.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return function(s,o){const c=s.mapValue.fields||{},d=o.mapValue.fields||{};if(Qb(c)!==Qb(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!lr(c[m],d[m])))return!1;return!0}(n,e);default:return Te()}}function qu(n,e){return(n.values||[]).find(t=>lr(t,e))!==void 0}function Nl(n,e){if(n===e)return 0;const t=oa(n),i=oa(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return function(o,c){const d=kt(o.integerValue||o.doubleValue),m=kt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Kb(n.timestampValue,e.timestampValue);case 4:return Kb(Uu(n),Uu(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return function(o,c){const d=aa(o),m=aa(c);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const v=qe(d[p],m[p]);if(v!==0)return v}return qe(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const d=qe(kt(o.latitude),kt(c.latitude));return d!==0?d:qe(kt(o.longitude),kt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Xb(n.arrayValue,e.arrayValue);case 10:return function(o,c){var d,m,p,v;const E=o.fields||{},w=c.fields||{},T=(d=E[Tf])===null||d===void 0?void 0:d.arrayValue,S=(m=w[Tf])===null||m===void 0?void 0:m.arrayValue,P=qe(((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0,((v=S==null?void 0:S.values)===null||v===void 0?void 0:v.length)||0);return P!==0?P:Xb(T,S)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Yd.mapValue&&c===Yd.mapValue)return 0;if(o===Yd.mapValue)return 1;if(c===Yd.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const w=qe(m[E],v[E]);if(w!==0)return w;const T=Nl(d[m[E]],p[v[E]]);if(T!==0)return T}return qe(m.length,v.length)}(n.mapValue,e.mapValue);default:throw Te()}}function Kb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=sa(n),i=sa(e),s=qe(t.seconds,i.seconds);return s!==0?s:qe(t.nanos,i.nanos)}function Xb(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const o=Nl(t[s],i[s]);if(o)return o}return qe(t.length,i.length)}function Rl(n){return Ty(n)}function Ty(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=sa(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return aa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const o of t.values||[])s?s=!1:i+=",",i+=Ty(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${Ty(t.fields[c])}`;return s+"}"}(n.mapValue):Te()}function af(n){switch(oa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=om(n);return e?16+af(e):16;case 5:return 2*n.stringValue.length;case 6:return aa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+af(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return pa(i.fields,(o,c)=>{s+=o.length+af(c)}),s}(n.mapValue);default:throw Te()}}function Zb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sy(n){return!!n&&"integerValue"in n}function A_(n){return!!n&&"arrayValue"in n}function Jb(n){return!!n&&"nullValue"in n}function ex(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function of(n){return!!n&&"mapValue"in n}function jM(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[lA])===null||t===void 0?void 0:t.stringValue)===cA}function Tu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pa(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Tu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(t)}setAll(e){let t=yn.emptyPath(),i={},s=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,s),i={},s=[],t=d.popLast()}c?i[d.lastSegment()]=Tu(c):s.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,s)}delete(e){const t=this.field(e.popLast());of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];of(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){pa(t,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new zn(Tu(this.value))}}function uA(n){const e=[];return pa(n.fields,(t,i)=>{const s=new yn([t]);if(of(i)){const o=uA(i.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)}),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,t,i,s,o,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Sn(e,0,Se.min(),Se.min(),Se.min(),zn.empty(),0)}static newFoundDocument(e,t,i,s){return new Sn(e,1,t,Se.min(),i,s,0)}static newNoDocument(e,t){return new Sn(e,2,t,Se.min(),Se.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,Se.min(),Se.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t){this.position=e,this.inclusive=t}}function tx(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],c=n.position[s];if(o.field.isKeyField()?i=ve.comparator(ve.fromName(c.referenceValue),t.key):i=Nl(c,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function nx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function VM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{}class qt extends hA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new FM(e,t,i):t==="array-contains"?new BM(e,i):t==="in"?new HM(e,i):t==="not-in"?new GM(e,i):t==="array-contains-any"?new YM(e,i):new qt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new qM(e,i):new zM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nl(t,this.value)):t!==null&&oa(this.value)===oa(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends hA{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ki(e,t)}matches(e){return dA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function dA(n){return n.op==="and"}function fA(n){return UM(n)&&dA(n)}function UM(n){for(const e of n.filters)if(e instanceof ki)return!1;return!0}function Ay(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+Rl(n.value);if(fA(n))return n.filters.map(e=>Ay(e)).join(",");{const e=n.filters.map(t=>Ay(t)).join(",");return`${n.op}(${e})`}}function mA(n,e){return n instanceof qt?function(i,s){return s instanceof qt&&i.op===s.op&&i.field.isEqual(s.field)&&lr(i.value,s.value)}(n,e):n instanceof ki?function(i,s){return s instanceof ki&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,c,d)=>o&&mA(c,s.filters[d]),!0):!1}(n,e):void Te()}function pA(n){return n instanceof qt?function(t){return`${t.field.canonicalString()} ${t.op} ${Rl(t.value)}`}(n):n instanceof ki?function(t){return t.op.toString()+" {"+t.getFilters().map(pA).join(" ,")+"}"}(n):"Filter"}class FM extends qt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class qM extends qt{constructor(e,t){super(e,"in",t),this.keys=gA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zM extends qt{constructor(e,t){super(e,"not-in",t),this.keys=gA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ve.fromName(i.referenceValue))}class BM extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return A_(t)&&qu(t.arrayValue,this.value)}}class HM extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qu(this.value.arrayValue,t)}}class GM extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!qu(this.value.arrayValue,t)}}class YM extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!A_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>qu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,t=null,i=[],s=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=d,this.le=null}}function ix(n,e=null,t=[],i=[],s=null,o=null,c=null){return new WM(n,e,t,i,s,o,c)}function C_(n){const e=Ce(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Ay(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),am(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Rl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Rl(i)).join(",")),e.le=t}return e.le}function N_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nx(n.startAt,e.startAt)&&nx(n.endAt,e.endAt)}function Cy(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t=null,i=[],s=[],o=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function QM(n,e,t,i,s,o,c,d){return new Kl(n,e,t,i,s,o,c,d)}function R_(n){return new Kl(n)}function rx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yA(n){return n.collectionGroup!==null}function Su(n){const e=Ce(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new en(yn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new zu(o,i))}),t.has(yn.keyField().canonicalString())||e.he.push(new zu(yn.keyField(),i))}return e.he}function sr(n){const e=Ce(n);return e.Pe||(e.Pe=$M(e,Su(n))),e.Pe}function $M(n,e){if(n.limitType==="F")return ix(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new zu(s.field,o)});const t=n.endAt?new Sf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Sf(n.startAt.position,n.startAt.inclusive):null;return ix(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ny(n,e){const t=n.filters.concat([e]);return new Kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Af(n,e,t){return new Kl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lm(n,e){return N_(sr(n),sr(e))&&n.limitType===e.limitType}function _A(n){return`${C_(sr(n))}|lt:${n.limitType}`}function ml(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>pA(s)).join(", ")}]`),am(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>Rl(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>Rl(s)).join(",")),`Target(${i})`}(sr(n))}; limitType=${n.limitType})`}function cm(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ve.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of Su(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(c,d,m){const p=tx(c,d,m);return c.inclusive?p<=0:p<0}(i.startAt,Su(i),s)||i.endAt&&!function(c,d,m){const p=tx(c,d,m);return c.inclusive?p>=0:p>0}(i.endAt,Su(i),s))}(n,e)}function KM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vA(n){return(e,t)=>{let i=!1;for(const s of Su(n)){const o=XM(s,e,t);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function XM(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):function(o,c,d){const m=c.data.field(o),p=d.data.field(o);return m!==null&&p!==null?Nl(m,p):Te()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,(t,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return nA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=new zt(ve.comparator);function Jr(){return ZM}const EA=new zt(ve.comparator);function Eu(...n){let e=EA;for(const t of n)e=e.insert(t.key,t);return e}function wA(n){let e=EA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function to(){return Au()}function bA(){return Au()}function Au(){return new po(n=>n.toString(),(n,e)=>n.isEqual(e))}const JM=new zt(ve.comparator),eP=new en(ve.comparator);function Ue(...n){let e=eP;for(const t of n)e=e.add(t);return e}const tP=new en(qe);function nP(){return tP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function xA(n){return{integerValue:""+n}}function iP(n,e){return IM(e)?xA(e):I_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this._=void 0}}function rP(n,e,t){return n instanceof Bu?function(s,o){const c={fields:{[sA]:{stringValue:rA},[oA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&S_(o)&&(o=om(o)),o&&(c.fields[aA]=o),{mapValue:c}}(t,e):n instanceof Hu?SA(n,e):n instanceof Gu?AA(n,e):function(s,o){const c=TA(s,o),d=sx(c)+sx(s.Ie);return Sy(c)&&Sy(s.Ie)?xA(d):I_(s.serializer,d)}(n,e)}function sP(n,e,t){return n instanceof Hu?SA(n,e):n instanceof Gu?AA(n,e):t}function TA(n,e){return n instanceof Cf?function(i){return Sy(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Bu extends um{}class Hu extends um{constructor(e){super(),this.elements=e}}function SA(n,e){const t=CA(e);for(const i of n.elements)t.some(s=>lr(s,i))||t.push(i);return{arrayValue:{values:t}}}class Gu extends um{constructor(e){super(),this.elements=e}}function AA(n,e){let t=CA(e);for(const i of n.elements)t=t.filter(s=>!lr(s,i));return{arrayValue:{values:t}}}class Cf extends um{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function sx(n){return kt(n.integerValue||n.doubleValue)}function CA(n){return A_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t){this.field=e,this.transform=t}}function oP(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Hu&&s instanceof Hu||i instanceof Gu&&s instanceof Gu?Cl(i.elements,s.elements,lr):i instanceof Cf&&s instanceof Cf?lr(i.Ie,s.Ie):i instanceof Bu&&s instanceof Bu}(n.transform,e.transform)}class lP{constructor(e,t){this.version=e,this.transformResults=t}}class yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yi}static exists(e){return new yi(void 0,e)}static updateTime(e){return new yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class hm{}function NA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new D_(n.key,yi.none()):new ch(n.key,n.data,yi.none());{const t=n.data,i=zn.empty();let s=new en(yn.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new ga(n.key,i,new Zn(s.toArray()),yi.none())}}function cP(n,e,t){n instanceof ch?function(s,o,c){const d=s.value.clone(),m=ox(s.fieldTransforms,o,c.transformResults);d.setAll(m),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ga?function(s,o,c){if(!lf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const d=ox(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(RA(s)),m.setAll(d),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Cu(n,e,t,i){return n instanceof ch?function(o,c,d,m){if(!lf(o.precondition,c))return d;const p=o.value.clone(),v=lx(o.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof ga?function(o,c,d,m){if(!lf(o.precondition,c))return d;const p=lx(o.fieldTransforms,m,c),v=c.data;return v.setAll(RA(o)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(o,c,d){return lf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function uP(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=TA(i.transform,s||null);o!=null&&(t===null&&(t=zn.empty()),t.set(i.field,o))}return t||null}function ax(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Cl(i,s,(o,c)=>oP(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ch extends hm{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ga extends hm{constructor(e,t,i,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function ox(n,e,t){const i=new Map;tt(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],c=o.transform,d=e.data.field(o.field);i.set(o.field,sP(c,d,t[s]))}return i}function lx(n,e,t){const i=new Map;for(const s of n){const o=s.transform,c=t.data.field(s.field);i.set(s.field,rP(o,c,e))}return i}class D_ extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hP extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&cP(o,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Cu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Cu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=bA();return this.mutations.forEach(s=>{const o=e.get(s.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=t.has(s.key)?null:d;const m=NA(c,d);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,(t,i)=>ax(t,i))&&Cl(this.baseMutations,e.baseMutations,(t,i)=>ax(t,i))}}class O_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){tt(e.mutations.length===i.length);let s=function(){return JM}();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new O_(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Ge;function pP(n){switch(n){case Z.OK:return Te();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te()}}function IA(n){if(n===void 0)return Zr("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Ft.OK:return Z.OK;case Ft.CANCELLED:return Z.CANCELLED;case Ft.UNKNOWN:return Z.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return Z.INTERNAL;case Ft.UNAVAILABLE:return Z.UNAVAILABLE;case Ft.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ft.NOT_FOUND:return Z.NOT_FOUND;case Ft.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ft.ABORTED:return Z.ABORTED;case Ft.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ft.DATA_LOSS:return Z.DATA_LOSS;default:return Te()}}(Ge=Ft||(Ft={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=new Xs([4294967295,4294967295],0);function cx(n){const e=gP().encode(n),t=new WS;return t.update(e),new Uint8Array(t.digest())}function ux(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xs([t,i],0),new Xs([s,o],0)]}class k_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(i<0)throw new wu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Xs.fromNumber(this.Ee)}Ae(e,t,i){let s=e.add(t.multiply(Xs.fromNumber(i)));return s.compare(yP)===1&&(s=new Xs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=cx(e),[i,s]=ux(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(i,s,o);if(!this.Re(c))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new k_(o,s,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=cx(e),[i,s]=ux(t);for(let o=0;o<this.hashCount;o++){const c=this.Ae(i,s,o);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t,i,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,uh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dm(Se.min(),s,new zt(qe),Jr(),Ue())}}class uh{constructor(e,t,i,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new uh(i,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,i,s){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=s}}class DA{constructor(e,t){this.targetId=e,this.ge=t}}class OA{constructor(e,t,i=_n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class hx{constructor(){this.pe=0,this.ye=dx(),this.we=_n.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ue(),t=Ue(),i=Ue();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Te()}}),new uh(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=dx()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,tt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class _P{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Jr(),this.$e=Wd(),this.Ke=Wd(),this.Ue=new zt(qe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,i=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Cy(o))if(i===0){const c=new ve(o.path);this.ze(t,c,Sn.newNoDocument(c,Se.min()))}else tt(i===1);else{const c=this.et(t);if(c!==i){const d=this.tt(e),m=d?this.nt(d,e,c):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=t;let c,d;try{c=aa(i).toUint8Array()}catch(m){if(m instanceof iA)return Al("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new k_(c,s,o)}catch(m){return Al(m instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let s=0;return i.forEach(o=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,c)=>{const d=this.Xe(c);if(d){if(o.current&&Cy(d.target)){const m=new ve(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,Sn.newNoDocument(m,e))}o.ve&&(t.set(c,o.Fe()),o.Me())}});let i=Ue();this.Ke.forEach((o,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(o))}),this.Qe.forEach((o,c)=>c.setReadTime(e));const s=new dm(e,t,this.Ue,this.Qe,i);return this.Qe=Jr(),this.$e=Wd(),this.Ke=Wd(),this.Ue=new zt(qe),s}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new hx,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new en(qe),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new en(qe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new hx),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Wd(){return new zt(ve.comparator)}function dx(){return new zt(ve.comparator)}const vP={asc:"ASCENDING",desc:"DESCENDING"},EP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wP={and:"AND",or:"OR"};class bP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ry(n,e){return n.useProto3Json||am(e)?e:{value:e}}function Nf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xP(n,e){return Nf(n,e.toTimestamp())}function ar(n){return tt(!!n),Se.fromTimestamp(function(t){const i=sa(t);return new Jt(i.seconds,i.nanos)}(n))}function M_(n,e){return Iy(n,e).canonicalString()}function Iy(n,e){const t=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function MA(n){const e=pt.fromString(n);return tt(UA(e)),e}function Dy(n,e){return M_(n.databaseId,e.path)}function Kg(n,e){const t=MA(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(jA(t))}function PA(n,e){return M_(n.databaseId,e)}function TP(n){const e=MA(n);return e.length===4?pt.emptyPath():jA(e)}function Oy(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jA(n){return tt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fx(n,e,t){return{name:Dy(n,e),fields:t.value.mapValue.fields}}function SP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,v){return p.useProto3Json?(tt(v===void 0||typeof v=="string"),_n.fromBase64String(v||"")):(tt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),_n.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const v=p.code===void 0?Z.UNKNOWN:IA(p.code);return new ce(v,p.message||"")}(c);t=new OA(i,s,o,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Kg(n,i.document.name),o=ar(i.document.updateTime),c=i.document.createTime?ar(i.document.createTime):Se.min(),d=new zn({mapValue:{fields:i.document.fields}}),m=Sn.newFoundDocument(s,o,c,d),p=i.targetIds||[],v=i.removedTargetIds||[];t=new cf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Kg(n,i.document),o=i.readTime?ar(i.readTime):Se.min(),c=Sn.newNoDocument(s,o),d=i.removedTargetIds||[];t=new cf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Kg(n,i.document),o=i.removedTargetIds||[];t=new cf([],o,s,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new mP(s,o),d=i.targetId;t=new DA(d,c)}}return t}function AP(n,e){let t;if(e instanceof ch)t={update:fx(n,e.key,e.value)};else if(e instanceof D_)t={delete:Dy(n,e.key)};else if(e instanceof ga)t={update:fx(n,e.key,e.data),updateMask:PP(e.fieldMask)};else{if(!(e instanceof hP))return Te();t={verify:Dy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,c){const d=c.transform;if(d instanceof Bu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Hu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Gu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Cf)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw Te()}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:xP(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te()}(n,e.precondition)),t}function CP(n,e){return n&&n.length>0?(tt(e!==void 0),n.map(t=>function(s,o){let c=s.updateTime?ar(s.updateTime):ar(o);return c.isEqual(Se.min())&&(c=ar(o)),new lP(c,s.transformResults||[])}(t,e))):[]}function NP(n,e){return{documents:[PA(n,e.path)]}}function RP(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=PA(n,s);const o=function(p){if(p.length!==0)return VA(ki.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(p){if(p.length!==0)return p.map(v=>function(w){return{field:pl(w.field),direction:OP(w.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ry(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:s}}function IP(n){let e=TP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){tt(i===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=function(E){const w=LA(E);return w instanceof ki&&fA(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(w=>function(S){return new zu(gl(S.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(E){let w;return w=typeof E=="object"?E.value:E,am(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(E){const w=!!E.before,T=E.values||[];return new Sf(T,w)}(t.startAt));let p=null;return t.endAt&&(p=function(E){const w=!E.before,T=E.values||[];return new Sf(T,w)}(t.endAt)),QM(e,s,c,o,d,"F",m,p)}function DP(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=gl(t.unaryFilter.field);return qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=gl(t.unaryFilter.field);return qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=gl(t.unaryFilter.field);return qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=gl(t.unaryFilter.field);return qt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return qt.create(gl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ki.create(t.compositeFilter.filters.map(i=>LA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function OP(n){return vP[n]}function kP(n){return EP[n]}function MP(n){return wP[n]}function pl(n){return{fieldPath:n.canonicalString()}}function gl(n){return yn.fromServerFormat(n.fieldPath)}function VA(n){return n instanceof qt?function(t){if(t.op==="=="){if(ex(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NAN"}};if(Jb(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ex(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NAN"}};if(Jb(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(t.field),op:kP(t.op),value:t.value}}}(n):n instanceof ki?function(t){const i=t.getFilters().map(s=>VA(s));return i.length===1?i[0]:{compositeFilter:{op:MP(t.op),filters:i}}}(n):Te()}function PP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,i,s,o=Se.min(),c=Se.min(),d=_n.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.Tt=e}}function LP(n){const e=IP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.Tn=new UP}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ra.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class UP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new en(pt.comparator),o=!s.has(i);return this.index[t]=s.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new en(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FA=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(FA,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Il(0)}static Un(){return new Il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="LruGarbageCollector",FP=1048576;function gx([n,e],[t,i]){const s=qe(n,t);return s===0?qe(e,i):s}class qP{constructor(e){this.Hn=e,this.buffer=new en(gx),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();gx(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){fe(px,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$l(t)?fe(px,"Ignoring IndexedDB error during garbage collection: ",t):await Ql(t)}await this.er(3e5)})}}class BP{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(sm.ae);const i=new qP(t);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(mx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mx):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,s,o,c,d,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s))).next(E=>(i=E,d=Date.now(),this.removeTargets(e,i,t))).next(E=>(o=E,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(p=Date.now(),fl()<=Le.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${o} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:E})))}}function HP(n,e){return new BP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.changes=new po(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&Cu(i.mutation,s,Zn.empty(),Jt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ue()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ue()){const s=to();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(o=>{let c=Eu();return o.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=to();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ue()))}populateOverlays(e,t,i){const s=[];return i.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,s){let o=Jr();const c=Au(),d=function(){return Au()}();return t.forEach((m,p)=>{const v=i.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof ga)?o=o.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Cu(v.mutation,p,v.mutation.getFieldMask(),Jt.now())):c.set(p.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((p,v)=>c.set(p,v)),t.forEach((p,v)=>{var E;return d.set(p,new YP(v,(E=c.get(p))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Au();let s=new zt((c,d)=>c-d),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let v=i.get(m)||Zn.empty();v=d.applyToLocalView(p,v),i.set(m,v);const E=(s.get(d.batchId)||Ue()).add(m);s=s.insert(d.batchId,E)})}).next(()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,v=m.value,E=bA();v.forEach(w=>{if(!o.has(w)){const T=NA(t.get(w),i.get(w));T!==null&&E.set(w,T),o=o.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ee.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-o.size):ee.resolve(to());let d=Vu,m=o;return c.next(p=>ee.forEach(p,(v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),o.get(v)?ee.resolve():this.remoteDocumentCache.getEntry(e,v).next(w=>{m=m.insert(v,w)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,m,p,Ue())).next(v=>({batchId:d,changes:wA(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(i=>{let s=Eu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const o=t.collectionGroup;let c=Eu();return this.indexManager.getCollectionParents(e,o).next(d=>ee.forEach(d,m=>{const p=function(E,w){return new Kl(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(v=>{v.forEach((E,w)=>{c=c.insert(E,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,s))).next(c=>{o.forEach((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Sn.newInvalidDocument(v)))});let d=Eu();return c.forEach((m,p)=>{const v=o.get(m);v!==void 0&&Cu(v.mutation,p,Zn.empty(),Jt.now()),cm(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ar(s.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:LP(s.bundledQuery),readTime:ar(s.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.overlays=new zt(ve.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=to();return ee.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,o)=>{this.Et(e,t,o)}),ee.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const s=to(),o=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&m.largestBatchId>i&&s.set(m.getKey(),m)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let o=new zt((p,v)=>p-v);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let v=o.get(p.largestBatchId);v===null&&(v=to(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=to(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,v)=>d.set(p,v)),!(d.size()>=s)););return ee.resolve(d)}Et(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new fP(t,i));let o=this.Rr.get(t);o===void 0&&(o=Ue(),this.Rr.set(t,o)),this.Rr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.Vr=new en(un.mr),this.gr=new en(un.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new un(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new un(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new ve(new pt([])),i=new un(t,e),s=new un(t,e+1),o=[];return this.gr.forEachInRange([i,s],c=>{this.wr(c),o.push(c.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ve(new pt([])),i=new un(t,e),s=new un(t,e+1);let o=Ue();return this.gr.forEachInRange([i,s],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new un(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class un{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ve.comparator(e.key,t.key)||qe(e.Cr,t.Cr)}static pr(e,t){return qe(e.Cr,t.Cr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new en(un.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new dP(o,t,i,s);this.mutationQueue.push(c);for(const d of s)this.Mr=this.Mr.add(new un(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Nr(i),o=s<0?0:s;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?T_:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new un(t,0),s=new un(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,s],c=>{const d=this.Or(c.Cr);o.push(d)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new en(qe);return t.forEach(s=>{const o=new un(s,0),c=new un(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,c],d=>{i=i.add(d.Cr)})}),ee.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let o=i;ve.isDocumentKey(o)||(o=o.child(""));const c=new un(new ve(o),0);let d=new en(qe);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(d=d.add(m.Cr)),!0)},c),ee.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){tt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ee.forEach(t.mutations,s=>{const o=new un(s.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new un(t,0),s=this.Mr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.kr=e,this.docs=function(){return new zt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),o=s?s.size:0,c=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let i=Jr();return t.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Sn.newInvalidDocument(s))}),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let o=Jr();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||AM(SM(v),i)<=0||(s.has(v.key)||cm(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,t,i,s){Te()}qr(e,t){return ee.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new JP(this)}getSize(e){return ee.resolve(this.size)}}class JP extends GP{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.persistence=e,this.Qr=new po(t=>C_(t),N_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.$r=0,this.Kr=new P_,this.targetCount=0,this.Ur=Il.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Il(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let s=0;const o=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Qr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),ee.waitFor(o).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(c=>{o.push(s.markPotentiallyOrphaned(e,c))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new sm(0),this.zr=!1,this.zr=!0,this.jr=new KP,this.referenceDelegate=e(this),this.Hr=new ej(this),this.indexManager=new VP,this.remoteDocumentCache=function(s){return new ZP(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new jP(t),this.Yr=new QP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $P,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new XP(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const s=new tj(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ee.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class tj extends NM{constructor(e){super(),this.currentSequenceNumber=e}}class j_{constructor(e){this.persistence=e,this.ti=new P_,this.ni=null}static ri(e){return new j_(e)}get ii(){if(this.ni)return this.ni;throw Te()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,i=>{const s=ve.fromPath(i);return this.si(e,s).next(o=>{o||t.removeEntry(s,Se.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Rf{constructor(e,t){this.persistence=e,this.oi=new po(i=>DM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=HP(this,t)}static ri(e,t){return new Rf(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(o=>o?ee.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,c=>this.ar(e,c,t).next(d=>{d||(i++,o.removeEntry(c,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=af(e.data.value)),t}ar(e,t,i){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ee.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=s}static Yi(e,t){let i=Ue(),s=Ue();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new L_(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return kD()?8:RM(An())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,s){const o={result:null};return this.rs(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ss(e,t,s,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new nj;return this._s(e,t,c).next(d=>{if(o.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>o.result)}us(e,t,i,s){return i.documentReadCount<this.es?(fl()<=Le.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",ml(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(fl()<=Le.DEBUG&&fe("QueryEngine","Query:",ml(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(fl()<=Le.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",ml(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):ee.resolve())}rs(e,t){if(rx(t))return ee.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Af(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const c=Ue(...o);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.cs(t,d);return this.ls(t,p,c,m.readTime)?this.rs(e,Af(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,i,s){return rx(t)||s.isEqual(Se.min())?ee.resolve(null):this.ns.getDocuments(e,i).next(o=>{const c=this.cs(t,o);return this.ls(t,c,i,s)?ee.resolve(null):(fl()<=Le.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ml(t)),this.hs(e,c,t,TM(s,Vu)).next(d=>d))})}cs(e,t){let i=new en(vA(e));return t.forEach((s,o)=>{cm(e,o)&&(i=i.add(o))}),i}ls(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,i){return fl()<=Le.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",ml(t)),this.ns.getDocumentsMatchingQuery(e,t,ra.min(),i)}hs(e,t,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="LocalStore",rj=3e8;class sj{constructor(e,t,i,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new zt(qe),this.Is=new po(o=>C_(o),N_),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WP(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function aj(n,e,t,i){return new sj(n,e,t,i)}async function zA(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],d=[];let m=Ue();for(const p of s){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of o){d.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:d}))})})}function oj(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,v){const E=p.batch,w=E.keys();let T=ee.resolve();return w.forEach(S=>{T=T.next(()=>v.getEntry(m,S)).next(P=>{const L=p.docVersions.get(S);tt(L!==null),P.version.compareTo(L)<0&&(E.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),v.addEntry(P)))})}),T.next(()=>d.mutationQueue.removeMutationBatch(m,E))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=Ue();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function BA(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function lj(n,e){const t=Ce(n),i=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const d=[];e.targetChanges.forEach((v,E)=>{const w=s.get(E);if(!w)return;d.push(t.Hr.removeMatchingKeys(o,v.removedDocuments,E).next(()=>t.Hr.addMatchingKeys(o,v.addedDocuments,E)));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?T=T.withResumeToken(_n.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(v.resumeToken,i)),s=s.insert(E,T),function(P,L,z){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=rj?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(w,T,v)&&d.push(t.Hr.updateTargetData(o,T))});let m=Jr(),p=Ue();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))}),d.push(cj(o,c,e.documentUpdates).next(v=>{m=v.Vs,p=v.fs})),!i.isEqual(Se.min())){const v=t.Hr.getLastRemoteSnapshotVersion(o).next(E=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));d.push(v)}return ee.waitFor(d).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,p)).next(()=>m)}).then(o=>(t.Ts=s,o))}function cj(n,e,t){let i=Ue(),s=Ue();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let c=Jr();return t.forEach((d,m)=>{const p=o.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),m.isNoDocument()&&m.version.isEqual(Se.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):fe(V_,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:s}})}function uj(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=T_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function hj(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Hr.getTargetData(i,e).next(o=>o?(s=o,ee.resolve(s)):t.Hr.allocateTargetId(i).next(c=>(s=new Ws(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function ky(n,e,t){const i=Ce(n),s=i.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!$l(c))throw c;fe(V_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function yx(n,e,t){const i=Ce(n);let s=Se.min(),o=Ue();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,v){const E=Ce(m),w=E.Is.get(v);return w!==void 0?ee.resolve(E.Ts.get(w)):E.Hr.getTargetData(p,v)}(i,c,sr(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{o=m})}).next(()=>i.Ps.getDocumentsMatchingQuery(c,e,t?s:Se.min(),t?o:Ue())).next(d=>(dj(i,KM(e),d),{documents:d,gs:o})))}function dj(n,e,t){let i=n.Es.get(e)||Se.min();t.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(e,i)}class _x{constructor(){this.activeTargetIds=nP()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fj{constructor(){this.ho=new _x,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new _x,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="ConnectivityMonitor";class Ex{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){fe(vx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){fe(vx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd=null;function My(){return Qd===null?Qd=function(){return 268435456+Math.round(2147483648*Math.random())}():Qd++,"0x"+Qd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="RestConnection",pj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gj{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===xf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}bo(e,t,i,s,o){const c=My(),d=this.So(e,t.toUriEncodedString());fe(Xg,`Sending RPC '${e}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,s,o),this.vo(e,d,m,i).then(p=>(fe(Xg,`Received RPC '${e}' ${c}: `,p),p),p=>{throw Al(Xg,`RPC '${e}' ${c} failed with error: `,p,"url: ",d,"request:",i),p})}Co(e,t,i,s,o,c){return this.bo(e,t,i,s,o)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}So(e,t){const i=pj[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="WebChannelConnection";class _j extends gj{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,s){const o=My();return new Promise((c,d)=>{const m=new QS;m.setWithCredentials(!0),m.listenOnce($S.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case sf.NO_ERROR:const v=m.getResponseJson();fe(xn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),c(v);break;case sf.TIMEOUT:fe(xn,`RPC '${e}' ${o} timed out`),d(new ce(Z.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const E=m.getStatus();if(fe(xn,`RPC '${e}' ${o} failed with status:`,E,"response text:",m.getResponseText()),E>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w==null?void 0:w.error;if(T&&T.status&&T.message){const S=function(L){const z=L.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(z)>=0?z:Z.UNKNOWN}(T.status);d(new ce(S,T.message))}else d(new ce(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ce(Z.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{fe(xn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);fe(xn,`RPC '${e}' ${o} sending request:`,s),m.send(t,"POST",p,i,15)})}Wo(e,t,i){const s=My(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ZS(),d=XS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=o.join("");fe(xn,`Creating RPC '${e}' stream ${s}: ${v}`,m);const E=c.createWebChannel(v,m);let w=!1,T=!1;const S=new yj({Fo:L=>{T?fe(xn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(w||(fe(xn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),w=!0),fe(xn,`RPC '${e}' stream ${s} sending:`,L),E.send(L))},Mo:()=>E.close()}),P=(L,z,Y)=>{L.listen(z,Q=>{try{Y(Q)}catch(te){setTimeout(()=>{throw te},0)}})};return P(E,vu.EventType.OPEN,()=>{T||(fe(xn,`RPC '${e}' stream ${s} transport opened.`),S.Qo())}),P(E,vu.EventType.CLOSE,()=>{T||(T=!0,fe(xn,`RPC '${e}' stream ${s} transport closed`),S.Ko())}),P(E,vu.EventType.ERROR,L=>{T||(T=!0,Al(xn,`RPC '${e}' stream ${s} transport errored:`,L),S.Ko(new ce(Z.UNAVAILABLE,"The operation could not be completed")))}),P(E,vu.EventType.MESSAGE,L=>{var z;if(!T){const Y=L.data[0];tt(!!Y);const Q=Y,te=(Q==null?void 0:Q.error)||((z=Q[0])===null||z===void 0?void 0:z.error);if(te){fe(xn,`RPC '${e}' stream ${s} received error:`,te);const re=te.status;let ne=function(R){const I=Ft[R];if(I!==void 0)return IA(I)}(re),k=te.message;ne===void 0&&(ne=Z.INTERNAL,k="Unknown error status: "+re+" with message "+te.message),T=!0,S.Ko(new ce(ne,k)),E.close()}else fe(xn,`RPC '${e}' stream ${s} received:`,Y),S.Uo(Y)}}),P(d,KS.STAT_EVENT,L=>{L.stat===by.PROXY?fe(xn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===by.NOPROXY&&fe(xn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.$o()},0),S}}function Zg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n){return new bP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t,i=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-i);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="PersistentStream";class GA{constructor(e,t,i,s,o,c,d,m){this.Ti=e,this.n_=i,this.r_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new HA(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Zr(t.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===t&&this.V_(i,s)},i=>{e(()=>{const s=new ce(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return fe(wx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(fe(wx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vj extends GA{constructor(e,t,i,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,c),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=SP(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?ar(c.readTime):Se.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=Oy(this.serializer),t.addTarget=function(o,c){let d;const m=c.target;if(d=Cy(m)?{documents:NP(o,m)}:{query:RP(o,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=kA(o,c.resumeToken);const p=Ry(o,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Se.min())>0){d.readTime=Nf(o,c.snapshotVersion.toTimestamp());const p=Ry(o,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=DP(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=Oy(this.serializer),t.removeTarget=e,this.I_(t)}}class Ej extends GA{constructor(e,t,i,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,c),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=CP(e.writeResults,e.commitTime),i=ar(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=Oy(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>AP(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{}class bj extends wj{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.bo(e,Iy(t,i),s,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(Z.UNKNOWN,o.toString())})}Co(e,t,i,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,Iy(t,i),s,c,d,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(Z.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class xj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Zr(t),this.N_=!1):fe("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class Tj{constructor(e,t,i,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(c=>{i.enqueueAndForget(async()=>{go(this)&&(fe(lo,"Restarting streams for network reachability change."),await async function(m){const p=Ce(m);p.W_.add(4),await hh(p),p.j_.set("Unknown"),p.W_.delete(4),await mm(p)}(this))})}),this.j_=new xj(i,s)}}async function mm(n){if(go(n))for(const e of n.G_)await e(!0)}async function hh(n){for(const e of n.G_)await e(!1)}function YA(n,e){const t=Ce(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),z_(t)?q_(t):Xl(t).c_()&&F_(t,e))}function U_(n,e){const t=Ce(n),i=Xl(t);t.U_.delete(e),i.c_()&&WA(t,e),t.U_.size===0&&(i.c_()?i.P_():go(t)&&t.j_.set("Unknown"))}function F_(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xl(n).y_(e)}function WA(n,e){n.H_.Ne(e),Xl(n).w_(e)}function q_(n){n.H_=new _P({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Xl(n).start(),n.j_.B_()}function z_(n){return go(n)&&!Xl(n).u_()&&n.U_.size>0}function go(n){return Ce(n).W_.size===0}function QA(n){n.H_=void 0}async function Sj(n){n.j_.set("Online")}async function Aj(n){n.U_.forEach((e,t)=>{F_(n,e)})}async function Cj(n,e){QA(n),z_(n)?(n.j_.q_(e),q_(n)):n.j_.set("Unknown")}async function Nj(n,e,t){if(n.j_.set("Online"),e instanceof OA&&e.state===2&&e.cause)try{await async function(s,o){const c=o.cause;for(const d of o.targetIds)s.U_.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.U_.delete(d),s.H_.removeTarget(d))}(n,e)}catch(i){fe(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await If(n,i)}else if(e instanceof cf?n.H_.We(e):e instanceof DA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Se.min()))try{const i=await BA(n.localStore);t.compareTo(i)>=0&&await function(o,c){const d=o.H_.ot(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=o.U_.get(p);v&&o.U_.set(p,v.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const v=o.U_.get(m);if(!v)return;o.U_.set(m,v.withResumeToken(_n.EMPTY_BYTE_STRING,v.snapshotVersion)),WA(o,m);const E=new Ws(v.target,m,p,v.sequenceNumber);F_(o,E)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){fe(lo,"Failed to raise snapshot:",i),await If(n,i)}}async function If(n,e,t){if(!$l(e))throw e;n.W_.add(1),await hh(n),n.j_.set("Offline"),t||(t=()=>BA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{fe(lo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await mm(n)})}function $A(n,e){return e().catch(t=>If(n,t,e))}async function pm(n){const e=Ce(n),t=la(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:T_;for(;Rj(e);)try{const s=await uj(e.localStore,i);if(s===null){e.K_.length===0&&t.P_();break}i=s.batchId,Ij(e,s)}catch(s){await If(e,s)}KA(e)&&XA(e)}function Rj(n){return go(n)&&n.K_.length<10}function Ij(n,e){n.K_.push(e);const t=la(n);t.c_()&&t.b_&&t.S_(e.mutations)}function KA(n){return go(n)&&!la(n).u_()&&n.K_.length>0}function XA(n){la(n).start()}async function Dj(n){la(n).C_()}async function Oj(n){const e=la(n);for(const t of n.K_)e.S_(t.mutations)}async function kj(n,e,t){const i=n.K_.shift(),s=O_.from(i,e,t);await $A(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await pm(n)}async function Mj(n,e){e&&la(n).b_&&await async function(i,s){if(function(c){return pP(c)&&c!==Z.ABORTED}(s.code)){const o=i.K_.shift();la(i).h_(),await $A(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await pm(i)}}(n,e),KA(n)&&XA(n)}async function bx(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),fe(lo,"RemoteStore received new credentials");const i=go(t);t.W_.add(3),await hh(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await mm(t)}async function Pj(n,e){const t=Ce(n);e?(t.W_.delete(2),await mm(t)):e||(t.W_.add(2),await hh(t),t.j_.set("Unknown"))}function Xl(n){return n.J_||(n.J_=function(t,i,s){const o=Ce(t);return o.M_(),new vj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:Sj.bind(null,n),No:Aj.bind(null,n),Lo:Cj.bind(null,n),p_:Nj.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),z_(n)?q_(n):n.j_.set("Unknown")):(await n.J_.stop(),QA(n))})),n.J_}function la(n){return n.Y_||(n.Y_=function(t,i,s){const o=Ce(t);return o.M_(),new Ej(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:Dj.bind(null,n),Lo:Mj.bind(null,n),D_:Oj.bind(null,n),v_:kj.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await pm(n)):(await n.Y_.stop(),n.K_.length>0&&(fe(lo,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,i,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,o){const c=Date.now()+i,d=new B_(e,t,c,s,o);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H_(n,e){if(Zr("AsyncQueue",`${e}: ${n}`),$l(n))return new ce(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=Eu(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.Z_=new zt(ve.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Te():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Dl{constructor(e,t,i,s,o,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,o){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Dl(e,t,wl.emptySet(t),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Lj{constructor(){this.queries=Tx(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const s=Ce(t),o=s.queries;s.queries=Tx(),o.forEach((c,d)=>{for(const m of d.ta)m.onError(i)})})(this,new ce(Z.ABORTED,"Firestore shutting down"))}}function Tx(){return new po(n=>_A(n),lm)}async function ZA(n,e){const t=Ce(n);let i=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(i=2):(o=new jj,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=H_(c,`Initialization of query '${ml(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&G_(t)}async function JA(n,e){const t=Ce(n),i=e.query;let s=3;const o=t.queries.get(i);if(o){const c=o.ta.indexOf(e);c>=0&&(o.ta.splice(c,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Vj(n,e){const t=Ce(n);let i=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const d of c.ta)d.oa(s)&&(i=!0);c.ea=s}}i&&G_(t)}function Uj(n,e,t){const i=Ce(n),s=i.queries.get(e);if(s)for(const o of s.ta)o.onError(t);i.queries.delete(e)}function G_(n){n.ia.forEach(e=>{e.next()})}var Py,Sx;(Sx=Py||(Py={}))._a="default",Sx.Cache="cache";class eC{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Dl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Py.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.key=e}}class nC{constructor(e){this.key=e}}class Fj{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ue(),this.mutatedKeys=Ue(),this.ya=vA(e),this.wa=new wl(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new xx,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,E)=>{const w=s.get(v),T=cm(this.query,E)?E:null,S=!!w&&this.mutatedKeys.has(w.key),P=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let L=!1;w&&T?w.data.isEqual(T.data)?S!==P&&(i.track({type:3,doc:T}),L=!0):this.va(w,T)||(i.track({type:2,doc:T}),L=!0,(m&&this.ya(T,m)>0||p&&this.ya(T,p)<0)&&(d=!0)):!w&&T?(i.track({type:0,doc:T}),L=!0):w&&!T&&(i.track({type:1,doc:w}),L=!0,(m||p)&&(d=!0)),L&&(T?(c=c.add(T),o=P?o.add(v):o.delete(v)):(c=c.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{wa:c,Da:i,ls:d,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((v,E)=>function(T,S){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return P(T)-P(S)}(v.type,E.type)||this.ya(v.doc,E.doc)),this.Ca(i),s=s!=null&&s;const d=t&&!s?this.Fa():[],m=this.pa.size===0&&this.current&&!s?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new Dl(this.query,e.wa,o,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new xx,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ue(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new nC(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new tC(i))}),t}Oa(e){this.fa=e.gs,this.pa=Ue();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Dl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Y_="SyncEngine";class qj{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class zj{constructor(e){this.key=e,this.Ba=!1}}class Bj{constructor(e,t,i,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new po(d=>_A(d),lm),this.qa=new Map,this.Qa=new Set,this.$a=new zt(ve.comparator),this.Ka=new Map,this.Ua=new P_,this.Wa={},this.Ga=new Map,this.za=Il.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Hj(n,e,t=!0){const i=lC(n);let s;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await iC(i,e,t,!0),s}async function Gj(n,e){const t=lC(n);await iC(t,e,!0,!1)}async function iC(n,e,t,i){const s=await hj(n.localStore,sr(e)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let d;return i&&(d=await Yj(n,e,o,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&YA(n.remoteStore,s),d}async function Yj(n,e,t,i,s){n.Ha=(E,w,T)=>async function(P,L,z,Y){let Q=L.view.Sa(z);Q.ls&&(Q=await yx(P.localStore,L.query,!1).then(({documents:k})=>L.view.Sa(k,Q)));const te=Y&&Y.targetChanges.get(L.targetId),re=Y&&Y.targetMismatches.get(L.targetId)!=null,ne=L.view.applyChanges(Q,P.isPrimaryClient,te,re);return Cx(P,L.targetId,ne.Ma),ne.snapshot}(n,E,w,T);const o=await yx(n.localStore,e,!0),c=new Fj(e,o.gs),d=c.Sa(o.documents),m=uh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=c.applyChanges(d,n.isPrimaryClient,m);Cx(n,t,p.Ma);const v=new qj(e,t,c);return n.ka.set(e,v),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function Wj(n,e,t){const i=Ce(n),s=i.ka.get(e),o=i.qa.get(s.targetId);if(o.length>1)return i.qa.set(s.targetId,o.filter(c=>!lm(c,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await ky(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&U_(i.remoteStore,s.targetId),jy(i,s.targetId)}).catch(Ql)):(jy(i,s.targetId),await ky(i.localStore,s.targetId,!0))}async function Qj(n,e){const t=Ce(n),i=t.ka.get(e),s=t.qa.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),U_(t.remoteStore,i.targetId))}async function $j(n,e,t){const i=nL(n);try{const s=await function(c,d){const m=Ce(c),p=Jt.now(),v=d.reduce((T,S)=>T.add(S.key),Ue());let E,w;return m.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=Jr(),P=Ue();return m.ds.getEntries(T,v).next(L=>{S=L,S.forEach((z,Y)=>{Y.isValidDocument()||(P=P.add(z))})}).next(()=>m.localDocuments.getOverlayedDocuments(T,S)).next(L=>{E=L;const z=[];for(const Y of d){const Q=uP(Y,E.get(Y.key).overlayedDocument);Q!=null&&z.push(new ga(Y.key,Q,uA(Q.value.mapValue),yi.exists(!0)))}return m.mutationQueue.addMutationBatch(T,p,z,d)}).next(L=>{w=L;const z=L.applyToLocalDocumentSet(E,P);return m.documentOverlayCache.saveOverlays(T,L.batchId,z)})}).then(()=>({batchId:w.batchId,changes:wA(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(c,d,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new zt(qe)),p=p.insert(d,m),c.Wa[c.currentUser.toKey()]=p}(i,s.batchId,t),await dh(i,s.changes),await pm(i.remoteStore)}catch(s){const o=H_(s,"Failed to persist write");t.reject(o)}}async function rC(n,e){const t=Ce(n);try{const i=await lj(t.localStore,e);e.targetChanges.forEach((s,o)=>{const c=t.Ka.get(o);c&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ba=!0:s.modifiedDocuments.size>0?tt(c.Ba):s.removedDocuments.size>0&&(tt(c.Ba),c.Ba=!1))}),await dh(t,i,e)}catch(i){await Ql(i)}}function Ax(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.ka.forEach((o,c)=>{const d=c.view.sa(e);d.snapshot&&s.push(d.snapshot)}),function(c,d){const m=Ce(c);m.onlineState=d;let p=!1;m.queries.forEach((v,E)=>{for(const w of E.ta)w.sa(d)&&(p=!0)}),p&&G_(m)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Kj(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Ka.get(e),o=s&&s.key;if(o){let c=new zt(ve.comparator);c=c.insert(o,Sn.newNoDocument(o,Se.min()));const d=Ue().add(o),m=new dm(Se.min(),new Map,new zt(qe),c,d);await rC(i,m),i.$a=i.$a.remove(o),i.Ka.delete(e),W_(i)}else await ky(i.localStore,e,!1).then(()=>jy(i,e,t)).catch(Ql)}async function Xj(n,e){const t=Ce(n),i=e.batch.batchId;try{const s=await oj(t.localStore,e);aC(t,i,null),sC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await dh(t,s)}catch(s){await Ql(s)}}async function Zj(n,e,t){const i=Ce(n);try{const s=await function(c,d){const m=Ce(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return m.mutationQueue.lookupMutationBatch(p,d).next(E=>(tt(E!==null),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>m.localDocuments.getDocuments(p,v))})}(i.localStore,e);aC(i,e,t),sC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await dh(i,s)}catch(s){await Ql(s)}}function sC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function aC(n,e,t){const i=Ce(n);let s=i.Wa[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function jy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||oC(n,i)})}function oC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(U_(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),W_(n))}function Cx(n,e,t){for(const i of t)i instanceof tC?(n.Ua.addReference(i.key,e),Jj(n,i)):i instanceof nC?(fe(Y_,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||oC(n,i.key)):Te()}function Jj(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(fe(Y_,"New document in limbo: "+t),n.Qa.add(i),W_(n))}function W_(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ve(pt.fromString(e)),i=n.za.next();n.Ka.set(i,new zj(t)),n.$a=n.$a.insert(t,i),YA(n.remoteStore,new Ws(sr(R_(t.path)),i,"TargetPurposeLimboResolution",sm.ae))}}async function dh(n,e,t){const i=Ce(n),s=[],o=[],c=[];i.ka.isEmpty()||(i.ka.forEach((d,m)=>{c.push(i.Ha(m,e,t).then(p=>{var v;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){s.push(p);const E=L_.Yi(m.targetId,p);o.push(E)}}))}),await Promise.all(c),i.La.p_(s),await async function(m,p){const v=Ce(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ee.forEach(p,w=>ee.forEach(w.Hi,T=>v.persistence.referenceDelegate.addReference(E,w.targetId,T)).next(()=>ee.forEach(w.Ji,T=>v.persistence.referenceDelegate.removeReference(E,w.targetId,T)))))}catch(E){if(!$l(E))throw E;fe(V_,"Failed to update sequence numbers: "+E)}for(const E of p){const w=E.targetId;if(!E.fromCache){const T=v.Ts.get(w),S=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(S);v.Ts=v.Ts.insert(w,P)}}}(i.localStore,o))}async function eL(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){fe(Y_,"User change. New user:",e.toKey());const i=await zA(t.localStore,e);t.currentUser=e,function(o,c){o.Ga.forEach(d=>{d.forEach(m=>{m.reject(new ce(Z.CANCELLED,c))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await dh(t,i.Rs)}}function tL(n,e){const t=Ce(n),i=t.Ka.get(e);if(i&&i.Ba)return Ue().add(i.key);{let s=Ue();const o=t.qa.get(e);if(!o)return s;for(const c of o){const d=t.ka.get(c);s=s.unionWith(d.view.ba)}return s}}function lC(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kj.bind(null,e),e.La.p_=Vj.bind(null,e.eventManager),e.La.Ja=Uj.bind(null,e.eventManager),e}function nL(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zj.bind(null,e),e}class Df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fm(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return aj(this.persistence,new ij,e.initialUser,this.serializer)}Xa(e){return new qA(j_.ri,this.serializer)}Za(e){return new fj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Df.provider={build:()=>new Df};class iL extends Df{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){tt(this.persistence.referenceDelegate instanceof Rf);const i=this.persistence.referenceDelegate.garbageCollector;return new zP(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new qA(i=>Rf.ri(i,t),this.serializer)}}class Ly{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ax(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=eL.bind(null,this.syncEngine),await Pj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Lj}()}createDatastore(e){const t=fm(e.databaseInfo.databaseId),i=function(o){return new _j(o)}(e.databaseInfo);return function(o,c,d,m){return new bj(o,c,d,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,o,c,d){return new Tj(i,s,o,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Ax(this.syncEngine,t,0),function(){return Ex.D()?new Ex:new mj}())}createSyncEngine(e,t){return function(s,o,c,d,m,p,v){const E=new Bj(s,o,c,d,m,p);return v&&(E.ja=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Ce(s);fe(lo,"RemoteStore shutting down."),o.W_.add(5),await hh(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ly.provider={build:()=>new Ly};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class rL{constructor(e,t,i,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Tn.UNAUTHENTICATED,this.clientId=eA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{fe(ca,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(fe(ca,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=H_(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Jg(n,e){n.asyncQueue.verifyOperationInProgress(),fe(ca,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await zA(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Nx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await sL(n);fe(ca,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>bx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>bx(e.remoteStore,s)),n._onlineComponents=e}async function sL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(ca,"Using user provided OfflineComponentProvider");try{await Jg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Al("Error using user provided cache. Falling back to memory cache: "+t),await Jg(n,new Df)}}else fe(ca,"Using default OfflineComponentProvider"),await Jg(n,new iL(void 0));return n._offlineComponents}async function uC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(ca,"Using user provided OnlineComponentProvider"),await Nx(n,n._uninitializedComponentsProvider._online)):(fe(ca,"Using default OnlineComponentProvider"),await Nx(n,new Ly))),n._onlineComponents}function aL(n){return uC(n).then(e=>e.syncEngine)}async function hC(n){const e=await uC(n),t=e.eventManager;return t.onListen=Hj.bind(null,e.syncEngine),t.onUnlisten=Wj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Gj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Qj.bind(null,e.syncEngine),t}function oL(n,e,t={}){const i=new Wr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,d,m,p){const v=new cC({next:w=>{v.su(),c.enqueueAndForget(()=>JA(o,E));const T=w.docs.has(d);!T&&w.fromCache?p.reject(new ce(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&m&&m.source==="server"?p.reject(new ce(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),E=new eC(R_(d.path),v,{includeMetadataChanges:!0,Ta:!0});return ZA(o,E)}(await hC(n),n.asyncQueue,e,t,i)),i.promise}function lL(n,e,t={}){const i=new Wr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,d,m,p){const v=new cC({next:w=>{v.su(),c.enqueueAndForget(()=>JA(o,E)),w.fromCache&&m.source==="server"?p.reject(new ce(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),E=new eC(d,v,{includeMetadataChanges:!0,Ta:!0});return ZA(o,E)}(await hC(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n,e,t){if(!t)throw new ce(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cL(n,e,t,i){if(e===!0&&i===!0)throw new ce(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ix(n){if(!ve.isDocumentKey(n))throw new ce(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dx(n){if(ve.isDocumentKey(n))throw new ce(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function Mi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gm(n);throw new ce(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uL(n,e){if(e<=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="firestore.googleapis.com",Ox=!0;class kx{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mC,this.ssl=Ox}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Ox;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new ce(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ym{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new gM;switch(i.type){case"firstParty":return new EM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Rx.get(t);i&&(fe("ComponentProvider","Removing Datastore"),Rx.delete(t),i.terminate())}(this),Promise.resolve()}}function hL(n,e,t,i={}){var s;const o=(n=Mi(n,ym))._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;o.host!==mC&&o.host!==d&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},o),{host:d,ssl:!1,emulatorOptions:i});if(!na(m,c)&&(n._setSettings(m),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=Tn.MOCK_USER;else{p=rS(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ce(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Tn(E)}n._authCredentials=new yM(new JS(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class Mn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class Js extends ya{constructor(e,t,i){super(e,t,R_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new ve(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function Hn(n,e,...t){if(n=ft(n),fC("collection","path",e),n instanceof ym){const i=pt.fromString(e,...t);return Dx(i),new Js(n,null,i)}{if(!(n instanceof Mn||n instanceof Js))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return Dx(i),new Js(n.firestore,null,i)}}function Zt(n,e,...t){if(n=ft(n),arguments.length===1&&(e=eA.newId()),fC("doc","path",e),n instanceof ym){const i=pt.fromString(e,...t);return Ix(i),new Mn(n,null,new ve(i))}{if(!(n instanceof Mn||n instanceof Js))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return Ix(i),new Mn(n.firestore,n instanceof Js?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="AsyncQueue";class Px{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new HA(this,"async_queue_retry"),this.bu=()=>{const i=Zg();i&&fe(Mx,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=Zg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Zg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Wr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$l(e))throw e;fe(Mx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(i);throw Zr("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=B_.createAndSchedule(this,e,t,i,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Te()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class yo extends ym{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Px,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Px(e),this._firestoreClient=void 0,await e}}}function dL(n,e){const t=typeof n=="object"?n:h_(),i=typeof n=="string"?n:xf,s=tm(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=tS("firestore");o&&hL(s,...o)}return s}function Q_(n){if(n._terminated)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fL(n),n._firestoreClient}function fL(n){var e,t,i;const s=n._freezeSettings(),o=function(d,m,p,v){return new MM(d,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,dC(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new rL(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ol(_n.fromBase64String(e))}catch(t){throw new ce(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ol(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=/^__.*__$/;class pL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ga(e,this.data,this.fieldMask,t,this.fieldTransforms):new ch(e,this.data,t,this.fieldTransforms)}}class pC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ga(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class X_{constructor(e,t,i,s,o,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new X_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Of(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(gC(this.Lu)&&mL.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class gL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||fm(e)}ju(e,t,i,s=!1){return new X_({Lu:e,methodName:t,zu:i,path:yn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Em(n){const e=n._freezeSettings(),t=fm(n._databaseId);return new gL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yC(n,e,t,i,s,o={}){const c=n.ju(o.merge||o.mergeFields?2:0,e,t,s);J_("Data must be an object, but it was:",c,i);const d=_C(i,c);let m,p;if(o.merge)m=new Zn(c.fieldMask),p=c.fieldTransforms;else if(o.mergeFields){const v=[];for(const E of o.mergeFields){const w=Vy(e,E,t);if(!c.contains(w))throw new ce(Z.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);EC(v,w)||v.push(w)}m=new Zn(v),p=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=c.fieldTransforms;return new pL(new zn(d),m,p)}class wm extends vm{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wm}}class Z_ extends vm{_toFieldTransform(e){return new aP(e.path,new Bu)}isEqual(e){return e instanceof Z_}}function yL(n,e,t,i){const s=n.ju(1,e,t);J_("Data must be an object, but it was:",s,i);const o=[],c=zn.empty();pa(i,(m,p)=>{const v=ev(e,m,t);p=ft(p);const E=s.Ku(v);if(p instanceof wm)o.push(v);else{const w=fh(p,E);w!=null&&(o.push(v),c.set(v,w))}});const d=new Zn(o);return new pC(c,d,s.fieldTransforms)}function _L(n,e,t,i,s,o){const c=n.ju(1,e,t),d=[Vy(e,i,t)],m=[s];if(o.length%2!=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)d.push(Vy(e,o[w])),m.push(o[w+1]);const p=[],v=zn.empty();for(let w=d.length-1;w>=0;--w)if(!EC(p,d[w])){const T=d[w];let S=m[w];S=ft(S);const P=c.Ku(T);if(S instanceof wm)p.push(T);else{const L=fh(S,P);L!=null&&(p.push(T),v.set(T,L))}}const E=new Zn(p);return new pC(v,E,c.fieldTransforms)}function vL(n,e,t,i=!1){return fh(t,n.ju(i?4:3,e))}function fh(n,e){if(vC(n=ft(n)))return J_("Unsupported field value:",e,n),_C(n,e);if(n instanceof vm)return function(i,s){if(!gC(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const o=[];let c=0;for(const d of i){let m=fh(d,s.Uu(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iP(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Jt.fromDate(i);return{timestampValue:Nf(s.serializer,o)}}if(i instanceof Jt){const o=new Jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nf(s.serializer,o)}}if(i instanceof $_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ol)return{bytesValue:kA(s.serializer,i._byteString)};if(i instanceof Mn){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:M_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof K_)return function(c,d){return{mapValue:{fields:{[lA]:{stringValue:cA},[Tf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return I_(d.serializer,p)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${gm(i)}`)}(n,e)}function _C(n,e){const t={};return nA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(n,(i,s)=>{const o=fh(s,e.qu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function vC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof $_||n instanceof Ol||n instanceof Mn||n instanceof vm||n instanceof K_)}function J_(n,e,t){if(!vC(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=gm(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function Vy(n,e,t){if((e=ft(e))instanceof _m)return e._internalPath;if(typeof e=="string")return ev(n,e);throw Of("Field path arguments must be of type string or ",n,!1,void 0,t)}const EL=new RegExp("[~\\*/\\[\\]]");function ev(n,e,t){if(e.search(EL)>=0)throw Of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _m(...e.split("."))._internalPath}catch{throw Of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Of(n,e,t,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new ce(Z.INVALID_ARGUMENT,d+n+m)}function EC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,i,s,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wL extends wC{data(){return super.data()}}function bm(n,e){return typeof e=="string"?ev(n,e):e instanceof _m?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tv{}class nv extends tv{}function io(n,e,...t){let i=[];e instanceof tv&&i.push(e),i=i.concat(t),function(o){const c=o.filter(m=>m instanceof iv).length,d=o.filter(m=>m instanceof xm).length;if(c>1||c>0&&d>0)throw new ce(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class xm extends nv{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new xm(e,t,i)}_apply(e){const t=this._parse(e);return bC(e._query,t),new ya(e.firestore,e.converter,Ny(e._query,t))}_parse(e){const t=Em(e.firestore);return function(o,c,d,m,p,v,E){let w;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Lx(E,v);const S=[];for(const P of E)S.push(jx(m,o,P));w={arrayValue:{values:S}}}else w=jx(m,o,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Lx(E,v),w=vL(d,c,E,v==="in"||v==="not-in");return qt.create(p,v,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Yu(n,e,t){const i=e,s=bm("where",n);return xm._create(s,i,t)}class iv extends tv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ki.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let c=s;const d=o.getFlattenedFilters();for(const m of d)bC(c,m),c=Ny(c,m)}(e._query,t),new ya(e.firestore,e.converter,Ny(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rv extends nv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rv(e,t)}_apply(e){const t=function(s,o,c){if(s.startAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(o,c)}(e._query,this._field,this._direction);return new ya(e.firestore,e.converter,function(s,o){const c=s.explicitOrderBy.concat([o]);return new Kl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Nu(n,e="asc"){const t=e,i=bm("orderBy",n);return rv._create(i,t)}class sv extends nv{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new sv(e,t,i)}_apply(e){return new ya(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function ey(n){return uL("limit",n),sv._create("limit",n,"F")}function jx(n,e,t){if(typeof(t=ft(t))=="string"){if(t==="")throw new ce(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yA(e)&&t.indexOf("/")!==-1)throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(pt.fromString(t));if(!ve.isDocumentKey(i))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Zb(n,new ve(i))}if(t instanceof Mn)return Zb(n,t._key);throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gm(t)}.`)}function Lx(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bC(n,e){const t=function(s,o){for(const c of s)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xL{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return pa(e,(s,o)=>{i[s]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,s;const o=(s=(i=(t=e.fields)===null||t===void 0?void 0:t[Tf].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(c=>kt(c.doubleValue));return new K_(o)}convertGeoPoint(e){return new $_(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=om(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const t=sa(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);tt(UA(i));const s=new Fu(i.get(1),i.get(3)),o=new ve(i.popFirst(5));return s.isEqual(t)||Zr(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TC extends wC{constructor(e,t,i,s,o,c){super(e,t,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class uf extends TC{data(e={}){return super.data(e)}}class TL{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bu(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new uf(this._firestore,this._userDataWriter,i.key,i,new bu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(d=>{const m=new uf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new bu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const m=new uf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new bu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:SL(d.type),doc:m,oldIndex:p,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n){n=Mi(n,Mn);const e=Mi(n.firestore,yo);return oL(Q_(e),n._key).then(t=>AL(e,n,t))}class SC extends xL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}function or(n){n=Mi(n,ya);const e=Mi(n.firestore,yo),t=Q_(e),i=new SC(e);return bL(n._query),lL(t,n._query).then(s=>new TL(e,i,n,s))}function Vx(n,e,t){n=Mi(n,Mn);const i=Mi(n.firestore,yo),s=xC(n.converter,e,t);return Sm(i,[yC(Em(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,yi.none())])}function mh(n,e,t,...i){n=Mi(n,Mn);const s=Mi(n.firestore,yo),o=Em(s);let c;return c=typeof(e=ft(e))=="string"||e instanceof _m?_L(o,"updateDoc",n._key,e,t,i):yL(o,"updateDoc",n._key,e),Sm(s,[c.toMutation(n._key,yi.exists(!0))])}function AC(n){return Sm(Mi(n.firestore,yo),[new D_(n._key,yi.none())])}function Tm(n,e){const t=Mi(n.firestore,yo),i=Zt(n),s=xC(n.converter,e);return Sm(t,[yC(Em(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,yi.exists(!1))]).then(()=>i)}function Sm(n,e){return function(i,s){const o=new Wr;return i.asyncQueue.enqueueAndForget(async()=>$j(await aL(i),s,o)),o.promise}(Q_(n),e)}function AL(n,e,t){const i=t.docs.get(e._key),s=new SC(n);return new TC(n,s,e._key,i,new bu(t.hasPendingWrites,t.fromCache),e.converter)}function Ji(){return new Z_("serverTimestamp")}(function(e,t=!0){(function(s){Wl=s})(mo),ro(new ia("firestore",(i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),d=new yo(new _M(i.getProvider("auth-internal")),new wM(c,i.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ce(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(p.options.projectId,v)}(c,s),c);return o=Object.assign({useFetchStreams:t},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),ir(qb,zb,e),ir(qb,zb,"esm2017")})();var CL="firebase",NL="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(CL,NL,"app");const RL={apiKey:"AIzaSyDzOrbnFK-2L_uVP-ZgG1V6wHcpbPYHacI",authDomain:"kibproject-63d04.firebaseapp.com",projectId:"kibproject-63d04",storageBucket:"kibproject-63d04.firebasestorage.app",messagingSenderId:"196544810887",appId:"1:196544810887:web:a839308d94e992db974d22",measurementId:"G-GLFZB9DYYP",databaseURL:"https://kibproject-63d04-default-rtdb.firebaseio.com/"},CC=cS(RL),uu=mM(CC),Xe=dL(CC),NC=M.createContext();function bi(){return M.useContext(NC)}function IL({children:n}){const[e,t]=M.useState(null),[i,s]=M.useState(!0),[o,c]=M.useState(""),d=async()=>{try{c("");const w=new Fr,T=await xk(uu,w);return await Vx(Zt(Xe,"users",T.user.uid),{email:T.user.email,displayName:T.user.displayName,photoURL:T.user.photoURL,role:"member",createdAt:Ji(),lastLogin:Ji(),settings:{theme:"system",notifications:{email:!0,push:!0,desktop:!0},language:"ko"}},{merge:!0}),T.user}catch(w){throw console.error("Google 로그인 오류:",w),c("Google 로그인에 실패했습니다."),w}},m=async(w,T,S,P,L,z)=>{try{c("");const Y=await XO(uu,w,T);return await PS(Y.user,{displayName:S}),await Vx(Zt(Xe,"users",Y.user.uid),{email:w,displayName:S,department:P,position:L,phone:z,isAdmin:!1,role:"member",createdAt:Ji(),lastLogin:Ji(),settings:{theme:"system",notifications:{email:!0,push:!0,desktop:!0},language:"ko"}}),Y.user}catch(Y){throw console.error("회원가입 오류:",Y),c(`회원가입 실패: ${Y.message}`),Y}},p=async(w,T)=>{try{c("");const S=await ZO(uu,w,T);return await mh(Zt(Xe,"users",S.user.uid),{lastLogin:Ji()}),S.user}catch(S){throw console.error("로그인 오류:",S),c(`로그인 실패: ${S.message}`),S}},v=async()=>{try{c(""),await ik(uu)}catch(w){throw console.error("로그아웃 오류:",w),c(`로그아웃 실패: ${w.message}`),w}};M.useEffect(()=>nk(uu,async T=>{if(T){const S=await rs(Zt(Xe,"users",T.uid)),P=S.exists()?S.data():{};t({...T,...P})}else t(null);s(!1)}),[]);const E={currentUser:e,loading:i,error:o,loginWithGoogle:d,register:m,login:p,logout:v,setError:c};return g.jsx(NC.Provider,{value:E,children:!i&&n})}function DL(n){if(!n)return"";let e;if(n instanceof Date)e=n;else if(n.toDate)e=n.toDate();else if(typeof n=="string"||typeof n=="number")e=new Date(n);else return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${i}-${s}`}function OL({tasks:n=[],myUid:e}){return g.jsxs("div",{className:"overflow-hidden bg-white shadow-lg rounded-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-purple-500 to-purple-600",children:[g.jsx("h2",{className:"text-xl font-bold text-white",children:"내 작업"}),g.jsx(Ne,{to:"/tasks",className:"text-sm font-medium text-purple-100 hover:text-white",children:"모두 보기 →"})]}),n.length===0?g.jsx("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400",children:g.jsx("span",{children:"표시할 작업이 없습니다."})}):g.jsx("ul",{className:"divide-y divide-gray-100",children:n.map(t=>{const i=t.assignedTo===e,s=t.status==="진행중"||t.status==="in-progress",o=t.status==="예정"||t.status==="planned";return g.jsx("li",{children:g.jsx(Ne,{to:`/tasks/${t.id}`,className:"block hover:bg-gray-50 transition-colors",children:g.jsxs("div",{className:"px-6 py-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[i&&g.jsx("span",{className:"inline-block w-2 h-2 mr-2 align-middle rounded-full bg-red-500",title:"내 작업"}),g.jsx("span",{className:`text-sm font-medium ${s?"text-red-600":o?"text-black":"text-gray-900"}`,children:t.title})]}),g.jsx("div",{className:"flex flex-shrink-0 ml-2",children:g.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:t.status==="완료"||t.status==="completed"?"완료":s?"진행중":"예정"})})]}),g.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-gray-500",children:[g.jsxs("span",{children:["작성일: ",DL(t.createdAt)||"없음"]}),g.jsxs("span",{children:["작성자: ",t.authorName||"-"," / ",t.department||"-"]})]})]})})},t.id)})}),g.jsx("div",{className:"px-6 py-3 bg-gray-50",children:g.jsx(Ne,{to:"/tasks/new",className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",children:"작업 추가"})})]})}function kL(n){if(!n)return"";let e;if(n instanceof Date)e=n;else if(n.toDate)e=n.toDate();else if(typeof n=="string"||typeof n=="number")e=new Date(n);else return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0"),o=e.getHours().toString().padStart(2,"0"),c=e.getMinutes().toString().padStart(2,"0");return`${t}-${i}-${s} ${o}:${c}`}function ML({events:n}){const e=()=>{window.location.href="/calendar/new"};return g.jsxs("div",{className:"overflow-hidden bg-white shadow-lg rounded-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-green-500 to-green-600",children:[g.jsx("h2",{className:"text-xl font-bold text-white",children:"다가오는 일정"}),g.jsx(Ne,{to:"/calendar",className:"text-sm font-medium text-green-100 hover:text-white",children:"캘린더 보기 →"})]}),n.length===0?g.jsx("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400",children:g.jsx("span",{children:"표시할 일정이 없습니다."})}):g.jsx("ul",{className:"divide-y divide-gray-100",children:n.map(t=>g.jsx("li",{children:g.jsx(Ne,{to:`/calendar/${t.id}`,className:"block hover:bg-gray-50 transition-colors",children:g.jsxs("div",{className:"px-6 py-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.title}),g.jsx("span",{className:"text-xs text-gray-500",children:kL(t.start)})]}),g.jsx("div",{className:"flex items-center justify-between mt-1 text-xs text-gray-500",children:g.jsxs("span",{children:["장소: ",t.location||"-"]})})]})})},t.id))}),g.jsx("div",{className:"px-6 py-3 bg-gray-50",children:g.jsx("button",{onClick:e,className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",children:"일정 추가"})})]})}function PL(n){if(!n)return"";let e;if(n instanceof Date)e=n;else if(n.toDate)e=n.toDate();else if(typeof n=="string"||typeof n=="number")e=new Date(n);else return"";const t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${i}-${s}`}function jL({announcements:n,myDepartment:e}){const t=()=>{window.location.href="/notice/new"};return g.jsxs("div",{className:"overflow-hidden bg-white shadow-lg rounded-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-blue-500 to-blue-600",children:[g.jsx("h2",{className:"text-xl font-bold text-white",children:"공지사항"}),g.jsx(Ne,{to:"/notice",className:"text-sm font-medium text-blue-100 hover:text-white",children:"모두 보기 →"})]}),n.length===0?g.jsx("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400",children:g.jsx("span",{children:"표시할 공지사항이 없습니다."})}):g.jsx("ul",{className:"divide-y divide-gray-100",children:n.map(i=>{const s=i.department===e||i.department==="전체";return g.jsx("li",{children:g.jsx(Ne,{to:`/notice/${i.id}`,className:"block transition-colors hover:bg-gray-50",children:g.jsxs("div",{className:"px-6 py-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[s&&g.jsx("span",{className:"inline-block w-2 h-2 mr-2 align-middle rounded-full bg-red-500"}),g.jsx("span",{className:`text-sm font-medium ${s?"text-red-600":"text-gray-900"}`,children:i.title})]}),g.jsx("div",{className:"flex flex-shrink-0 ml-2 text-xs text-gray-500",children:PL(i.date)})]}),g.jsx("div",{className:"flex items-center justify-between mt-1 text-xs text-gray-500",children:g.jsxs("span",{children:["작성자: ",i.authorName||i.author||"-"," /"," ",i.department||"-"]})})]})})},i.id)})}),g.jsx("div",{className:"px-6 py-3 bg-gray-50",children:g.jsx("button",{onClick:t,className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",children:"공지사항 작성"})})]})}var Ux={};const Fx="@firebase/database",qx="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RC="";function LL(n){RC=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Pu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ur(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new VL(e)}}catch{}return new UL},no=IC("localStorage"),FL=IC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new em("@firebase/database"),qL=function(){let n=1;return function(){return n++}}(),DC=function(n){const e=GD(n),t=new qD;t.update(e);const i=t.digest();return l_.encodeByteArray(i)},ph=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ph.apply(null,i):typeof i=="object"?e+=Xt(i):e+=i,e+=" "}return e};let Ru=null,zx=!0;const zL=function(n,e){ae(!0,"Can't turn on custom loggers persistently."),bl.logLevel=Le.VERBOSE,Ru=bl.log.bind(bl)},gn=function(...n){if(zx===!0&&(zx=!1,Ru===null&&FL.get("logging_enabled")===!0&&zL()),Ru){const e=ph.apply(null,n);Ru(e)}},gh=function(n){return function(...e){gn(n,...e)}},Uy=function(...n){const e="FIREBASE INTERNAL ERROR: "+ph(...n);bl.error(e)},es=function(...n){const e=`FIREBASE FATAL ERROR: ${ph(...n)}`;throw bl.error(e),new Error(e)},Pn=function(...n){const e="FIREBASE WARNING: "+ph(...n);bl.warn(e)},BL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},av=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},HL=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},kl="[MIN_NAME]",co="[MAX_NAME]",_o=function(n,e){if(n===e)return 0;if(n===kl||e===co)return-1;if(e===kl||n===co)return 1;{const t=Bx(n),i=Bx(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},GL=function(n,e){return n===e?0:n<e?-1:1},hu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Xt(e))},ov=function(n){if(typeof n!="object"||n===null)return Xt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Xt(e[i]),t+=":",t+=ov(n[e[i]]);return t+="}",t},OC=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const kC=function(n){ae(!av(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,o,c,d,m;n===0?(o=0,c=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=d+i,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(o=0,c=Math.round(n/Math.pow(2,1-i-t))));const p=[];for(m=t;m;m-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(m=e;m;m-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const v=p.join("");let E="";for(m=0;m<64;m+=8){let w=parseInt(v.substr(m,8),2).toString(16);w.length===1&&(w="0"+w),E=E+w}return E.toLowerCase()},YL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},WL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function QL(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const $L=new RegExp("^-?(0*)\\d{1,10}$"),KL=-2147483648,XL=2147483647,Bx=function(n){if($L.test(n)){const e=Number(n);if(e>=KL&&e<=XL)return e}return null},Zl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Pn("Exception was thrown by user callback.",t),e},Math.floor(0))}},ZL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Iu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,qn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Pn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pn(e)}}class hf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}hf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="5",MC="v",PC="s",jC="r",LC="f",VC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,UC="ls",FC="p",Fy="ac",qC="websocket",zC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,i,s,o=!1,c="",d=!1,m=!1,p=null){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=m,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=no.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&no.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function t4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function HC(n,e,t){ae(typeof e=="string","typeof type must == string"),ae(typeof t=="object","typeof params must == object");let i;if(e===qC)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===zC)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);t4(n)&&(t.ns=n.namespace);const s=[];return vn(t,(o,c)=>{s.push(o+"="+c)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.counters_={}}incrementCounter(e,t=1){ur(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return bD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty={},ny={};function cv(n){const e=n.toString();return ty[e]||(ty[e]=new n4),ty[e]}function i4(n,e){const t=n.toString();return ny[t]||(ny[t]=e()),ny[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Zl(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="start",s4="close",a4="pLPCommand",o4="pRTLPCB",GC="id",YC="pw",WC="ser",l4="cb",c4="seg",u4="ts",h4="d",d4="dframe",QC=1870,$C=30,f4=QC-$C,m4=25e3,p4=3e4;class yl{constructor(e,t,i,s,o,c,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gh(e),this.stats_=cv(t),this.urlFn=m=>(this.appCheckToken&&(m[Fy]=this.appCheckToken),HC(t,zC,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new r4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(p4)),HL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new uv((...o)=>{const[c,d,m,p,v]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Hx)this.id=d,this.password=m;else if(c===s4)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...o)=>{const[c,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[Hx]="t",i[WC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[l4]=this.scriptTagHolder.uniqueCallbackIdentifier),i[MC]=lv,this.transportSessionId&&(i[PC]=this.transportSessionId),this.lastSessionId&&(i[UC]=this.lastSessionId),this.applicationId&&(i[FC]=this.applicationId),this.appCheckToken&&(i[Fy]=this.appCheckToken),typeof location<"u"&&location.hostname&&VC.test(location.hostname)&&(i[jC]=LC);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yl.forceAllow_=!0}static forceDisallow(){yl.forceDisallow_=!0}static isAvailable(){return yl.forceAllow_?!0:!yl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!YL()&&!WL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=ZT(t),s=OC(i,f4);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[d4]="t",i[GC]=e,i[YC]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Xt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class uv{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qL(),window[a4+this.uniqueCallbackIdentifier]=e,window[o4+this.uniqueCallbackIdentifier]=t,this.myIFrame=uv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){gn("frame writing exception"),d.stack&&gn(d.stack),gn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[GC]=this.myID,e[YC]=this.myPW,e[WC]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$C+i.length<=QC;){const c=this.pendingSegs.shift();i=i+"&"+c4+s+"="+c.seg+"&"+u4+s+"="+c.ts+"&"+h4+s+"="+c.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(m4)),o=()=>{clearTimeout(s),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{gn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=16384,y4=45e3;let kf=null;typeof MozWebSocket<"u"?kf=MozWebSocket:typeof WebSocket<"u"&&(kf=WebSocket);class Ri{constructor(e,t,i,s,o,c,d){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gh(this.connId),this.stats_=cv(t),this.connURL=Ri.connectionURL_(t,c,d,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,o){const c={};return c[MC]=lv,typeof location<"u"&&location.hostname&&VC.test(location.hostname)&&(c[jC]=LC),t&&(c[PC]=t),i&&(c[UC]=i),s&&(c[Fy]=s),o&&(c[FC]=o),HC(e,qC,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,no.set("previous_websocket_failure",!0);try{let i;OD(),this.mySock=new kf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ri.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&kf!==null&&!Ri.forceDisallow_}static previouslyFailed(){return no.isInMemoryStorage||no.get("previous_websocket_failure")===!0}markConnectionHealthy(){no.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Pu(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=OC(t,g4);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(y4))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ri.responsesRequiredToBeHealthy=2;Ri.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{static get ALL_TRANSPORTS(){return[yl,Ri]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Ri&&Ri.isAvailable();let i=t&&!Ri.previouslyFailed();if(e.webSocketOnly&&(t||Pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ri];else{const s=this.transports_=[];for(const o of Wu.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Wu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=6e4,v4=5e3,E4=10*1024,w4=100*1024,iy="t",Gx="d",b4="s",Yx="r",x4="e",Wx="o",Qx="a",$x="n",Kx="p",T4="h";class S4{constructor(e,t,i,s,o,c,d,m,p,v){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=m,this.onKill_=p,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gh("c:"+this.id+":"),this.transportManager_=new Wu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Iu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>w4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>E4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(iy in e){const t=e[iy];t===Qx?this.upgradeIfSecondaryHealthy_():t===Yx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Wx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=hu("t",e),i=hu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Kx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Qx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$x,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=hu("t",e),i=hu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=hu(iy,e);if(Gx in e){const i=e[Gx];if(t===T4){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===$x){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===b4?this.onConnectionShutdown_(i):t===Yx?this.onReset_(i):t===x4?Uy("Server Error: "+i):t===Wx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Uy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),lv!==i&&Pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Iu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Iu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(v4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Kx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(no.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!i||i===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends XC{static getInstance(){return new Mf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!c_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=32,Zx=768;class ot{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ke(){return new ot("")}function Me(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ua(n){return n.pieces_.length-n.pieceNum_}function dt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ot(n.pieces_,e)}function hv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function A4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Qu(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ZC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ot(e,0)}function Nt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof ot)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new ot(t,0)}function Ve(n){return n.pieceNum_>=n.pieces_.length}function kn(n,e){const t=Me(n),i=Me(e);if(t===null)return e;if(t===i)return kn(dt(n),dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function C4(n,e){const t=Qu(n,0),i=Qu(e,0);for(let s=0;s<t.length&&s<i.length;s++){const o=_o(t[s],i[s]);if(o!==0)return o}return t.length===i.length?0:t.length<i.length?-1:1}function dv(n,e){if(ua(n)!==ua(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function gi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ua(n)>ua(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class N4{constructor(e,t){this.errorPrefix_=t,this.parts_=Qu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Jf(this.parts_[i]);JC(this)}}function R4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Jf(e),JC(n)}function I4(n){const e=n.parts_.pop();n.byteLength_-=Jf(e),n.parts_.length>0&&(n.byteLength_-=1)}function JC(n){if(n.byteLength_>Zx)throw new Error(n.errorPrefix_+"has a key path longer than "+Zx+" bytes ("+n.byteLength_+").");if(n.parts_.length>Xx)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Xx+") or object contains a cycle "+Xa(n))}function Xa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends XC{static getInstance(){return new fv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=1e3,D4=60*5*1e3,Jx=30*1e3,O4=1.3,k4=3e4,M4="server_kill",eT=3;class Qr extends KC{constructor(e,t,i,s,o,c,d,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=m,this.id=Qr.nextPersistentConnectionId_++,this.log_=gh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=du,this.maxReconnectDelay_=D4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Mf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(Xt(o)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new ih,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,s){this.initConnection_();const o=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");const d={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(c).set(o,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i},c="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(c,o,d=>{const m=d.d,p=d.s;Qr.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",d),p!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(p,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ur(e,"w")){const i=Tl(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||FD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Jx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=UD(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const o=s.s,c=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},c="n";s&&(o.q=i,o.t=s),this.sendRequest(c,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,o){this.initConnection_();const c={p:t,d:i};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:e,request:c,onComplete:s}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Xt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Uy("Unrecognized action received from server: "+Xt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>k4&&(this.reconnectDelay_=du),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*O4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Qr.nextConnectionId_++,o=this.lastSessionId;let c=!1,d=null;const m=function(){d?d.close():(c=!0,i())},p=function(E){ae(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(E)};this.realtime_={close:m,sendRequest:p};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,w]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);c?gn("getToken() completed but was canceled"):(gn("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=w&&w.token,d=new S4(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,T=>{Pn(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(M4)},o))}catch(E){this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&Pn(E),m())}}}interrupt(e){gn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dy(this.interruptReasons_)&&(this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>ov(o)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new ot(e).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){gn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eT&&(this.reconnectDelay_=Jx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){gn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+RC.replace(/\./g,"-")]=1,c_()?e["framework.cordova"]=1:sS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mf.getInstance().currentlyOnline();return dy(this.interruptReasons_)&&e}}Qr.nextPersistentConnectionId_=0;Qr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Pe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Pe(kl,e),s=new Pe(kl,t);return this.compare(i,s)!==0}minPost(){return Pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d;class eN extends Am{static get __EMPTY_NODE(){return $d}static set __EMPTY_NODE(e){$d=e}compare(e,t){return _o(e.name,t.name)}isDefinedOn(e){throw Hl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Pe.MIN}maxPost(){return new Pe(co,$d)}makePost(e,t){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Pe(e,$d)}toString(){return".key"}}const xl=new eN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,s&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class hn{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??hn.RED,this.left=s??Bn.EMPTY_NODE,this.right=o??Bn.EMPTY_NODE}copy(e,t,i,s,o){return new hn(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Bn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}hn.RED=!0;hn.BLACK=!1;class P4{copy(e,t,i,s,o){return this}insert(e,t,i){return new hn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bn{constructor(e,t=Bn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Bn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,hn.BLACK,null,null))}remove(e){return new Bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,hn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Kd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Kd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Kd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Kd(this.root_,null,this.comparator_,!0,e)}}Bn.EMPTY_NODE=new P4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n,e){return _o(n.name,e.name)}function mv(n,e){return _o(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy;function L4(n){qy=n}const tN=function(n){return typeof n=="number"?"number:"+kC(n):"string:"+n},nN=function(n){if(n.isLeafNode()){const e=n.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ur(e,".sv"),"Priority must be a string or number.")}else ae(n===qy||n.isEmpty(),"priority of unexpected type.");ae(n===qy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tT;class cn{static set __childrenNodeConstructor(e){tT=e}static get __childrenNodeConstructor(){return tT}constructor(e,t=cn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),nN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new cn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:cn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ve(e)?this:Me(e)===".priority"?this.priorityNode_:cn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:cn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Me(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ae(i!==".priority"||ua(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,cn.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tN(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=kC(this.value_):e+=this.value_,this.lazyHash_=DC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===cn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof cn.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=cn.VALUE_TYPE_ORDER.indexOf(t),o=cn.VALUE_TYPE_ORDER.indexOf(i);return ae(s>=0,"Unknown leaf type: "+t),ae(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}cn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iN,rN;function V4(n){iN=n}function U4(n){rN=n}class F4 extends Am{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),o=i.compareTo(s);return o===0?_o(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Pe.MIN}maxPost(){return new Pe(co,new cn("[PRIORITY-POST]",rN))}makePost(e,t){const i=iN(e);return new Pe(t,new cn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Rt=new F4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=Math.log(2);class z4{constructor(e){const t=o=>parseInt(Math.log(o)/q4,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Pf=function(n,e,t,i){n.sort(e);const s=function(m,p){const v=p-m;let E,w;if(v===0)return null;if(v===1)return E=n[m],w=t?t(E):E,new hn(w,E.node,hn.BLACK,null,null);{const T=parseInt(v/2,10)+m,S=s(m,T),P=s(T+1,p);return E=n[T],w=t?t(E):E,new hn(w,E.node,hn.BLACK,S,P)}},o=function(m){let p=null,v=null,E=n.length;const w=function(S,P){const L=E-S,z=E;E-=S;const Y=s(L+1,z),Q=n[L],te=t?t(Q):Q;T(new hn(te,Q.node,P,null,Y))},T=function(S){p?(p.left=S,p=S):(v=S,p=S)};for(let S=0;S<m.count;++S){const P=m.nextBitIsOne(),L=Math.pow(2,m.count-(S+1));P?w(L,hn.BLACK):(w(L,hn.BLACK),w(L,hn.RED))}return v},c=new z4(n.length),d=o(c);return new Bn(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ry;const hl={};class Hr{static get Default(){return ae(hl&&Rt,"ChildrenNode.ts has not been loaded"),ry=ry||new Hr({".priority":hl},{".priority":Rt}),ry}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Tl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Bn?t:null}hasIndex(e){return ur(this.indexSet_,e.toString())}addIndex(e,t){ae(e!==xl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const o=t.getIterator(Pe.Wrap);let c=o.getNext();for(;c;)s=s||e.isDefinedOn(c.node),i.push(c),c=o.getNext();let d;s?d=Pf(i,e.getCompare()):d=hl;const m=e.toString(),p=Object.assign({},this.indexSet_);p[m]=e;const v=Object.assign({},this.indexes_);return v[m]=d,new Hr(v,p)}addToIndexes(e,t){const i=pf(this.indexes_,(s,o)=>{const c=Tl(this.indexSet_,o);if(ae(c,"Missing index implementation for "+o),s===hl)if(c.isDefinedOn(e.node)){const d=[],m=t.getIterator(Pe.Wrap);let p=m.getNext();for(;p;)p.name!==e.name&&d.push(p),p=m.getNext();return d.push(e),Pf(d,c.getCompare())}else return hl;else{const d=t.get(e.name);let m=s;return d&&(m=m.remove(new Pe(e.name,d))),m.insert(e,e.node)}});return new Hr(i,this.indexSet_)}removeFromIndexes(e,t){const i=pf(this.indexes_,s=>{if(s===hl)return s;{const o=t.get(e.name);return o?s.remove(new Pe(e.name,o)):s}});return new Hr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu;class xe{static get EMPTY_NODE(){return fu||(fu=new xe(new Bn(mv),null,Hr.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nN(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fu}updatePriority(e){return this.children_.isEmpty()?this:new xe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?fu:t}}getChild(e){const t=Me(e);return t===null?this:this.getImmediateChild(t).getChild(dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ae(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Pe(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const c=s.isEmpty()?fu:this.priorityNode_;return new xe(s,c,o)}}updateChild(e,t){const i=Me(e);if(i===null)return t;{ae(Me(e)!==".priority"||ua(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(dt(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,o=!0;if(this.forEachChild(Rt,(c,d)=>{t[c]=d.val(e),i++,o&&xe.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):o=!1}),!e&&o&&s<2*i){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+tN(this.getPriority().val())+":"),this.forEachChild(Rt,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":DC(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Pe(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Pe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Pe(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Pe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Pe.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yh?-1:0}withIndex(e){if(e===xl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new xe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===xl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Rt),s=t.getIterator(Rt);let o=i.getNext(),c=s.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=i.getNext(),c=s.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===xl?null:this.indexMap_.get(e.toString())}}xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class B4 extends xe{constructor(){super(new Bn(mv),xe.EMPTY_NODE,Hr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xe.EMPTY_NODE}isEmpty(){return!1}}const yh=new B4;Object.defineProperties(Pe,{MIN:{value:new Pe(kl,xe.EMPTY_NODE)},MAX:{value:new Pe(co,yh)}});eN.__EMPTY_NODE=xe.EMPTY_NODE;cn.__childrenNodeConstructor=xe;L4(yh);U4(yh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=!0;function Kt(n,e=null){if(n===null)return xe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new cn(t,Kt(e))}if(!(n instanceof Array)&&H4){const t=[];let i=!1;if(vn(n,(c,d)=>{if(c.substring(0,1)!=="."){const m=Kt(d);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Pe(c,m)))}}),t.length===0)return xe.EMPTY_NODE;const o=Pf(t,j4,c=>c.name,mv);if(i){const c=Pf(t,Rt.getCompare());return new xe(o,Kt(e),new Hr({".priority":c},{".priority":Rt}))}else return new xe(o,Kt(e),Hr.Default)}else{let t=xe.EMPTY_NODE;return vn(n,(i,s)=>{if(ur(n,i)&&i.substring(0,1)!=="."){const o=Kt(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(Kt(e))}}V4(Kt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4 extends Am{constructor(e){super(),this.indexPath_=e,ae(!Ve(e)&&Me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),o=i.compareTo(s);return o===0?_o(e.name,t.name):o}makePost(e,t){const i=Kt(e),s=xe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Pe(t,s)}maxPost(){const e=xe.EMPTY_NODE.updateChild(this.indexPath_,yh);return new Pe(co,e)}toString(){return Qu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4 extends Am{compare(e,t){const i=e.node.compareTo(t.node);return i===0?_o(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Pe.MIN}maxPost(){return Pe.MAX}makePost(e,t){const i=Kt(e);return new Pe(t,i)}toString(){return".value"}}const W4=new Y4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(n){return{type:"value",snapshotNode:n}}function Ml(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function $u(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ku(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Q4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.index_=e}updateChild(e,t,i,s,o,c){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(s).equals(i.getChild(s))&&d.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange($u(t,d)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Ml(t,i)):c.trackChildChange(Ku(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Rt,(s,o)=>{t.hasChild(s)||i.trackChildChange($u(s,o))}),t.isLeafNode()||t.forEachChild(Rt,(s,o)=>{if(e.hasChild(s)){const c=e.getImmediateChild(s);c.equals(o)||i.trackChildChange(Ku(s,o,c))}else i.trackChildChange(Ml(s,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.indexedFilter_=new pv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xu.getStartPost_(e),this.endPost_=Xu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,o,c){return this.matches(new Pe(t,i))||(i=xe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,o,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=xe.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(xe.EMPTY_NODE);const o=this;return t.forEachChild(Rt,(c,d)=>{o.matches(new Pe(c,d))||(s=s.updateImmediateChild(c,xe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Xu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,o,c){return this.rangedFilter_.matches(new Pe(t,i))||(i=xe.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,o,c):this.fullLimitUpdateChild_(e,t,i,o,c)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=xe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=xe.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const d=o.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))s=s.updateImmediateChild(d.name,d.node),c++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(xe.EMPTY_NODE);let o;this.reverse_?o=s.getReverseIterator(this.index_):o=s.getIterator(this.index_);let c=0;for(;o.hasNext();){const d=o.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:s=s.updateImmediateChild(d.name,xe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,o){let c;if(this.reverse_){const E=this.index_.getCompare();c=(w,T)=>E(T,w)}else c=this.index_.getCompare();const d=e;ae(d.numChildren()===this.limit_,"");const m=new Pe(t,i),p=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),v=this.rangedFilter_.matches(m);if(d.hasChild(t)){const E=d.getImmediateChild(t);let w=s.getChildAfterChild(this.index_,p,this.reverse_);for(;w!=null&&(w.name===t||d.hasChild(w.name));)w=s.getChildAfterChild(this.index_,w,this.reverse_);const T=w==null?1:c(w,m);if(v&&!i.isEmpty()&&T>=0)return o!=null&&o.trackChildChange(Ku(t,i,E)),d.updateImmediateChild(t,i);{o!=null&&o.trackChildChange($u(t,E));const P=d.updateImmediateChild(t,xe.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(o!=null&&o.trackChildChange(Ml(w.name,w.node)),P.updateImmediateChild(w.name,w.node)):P}}else return i.isEmpty()?e:v&&c(p,m)>=0?(o!=null&&(o.trackChildChange($u(p.name,p.node)),o.trackChildChange(Ml(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(p.name,xe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kl}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:co}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rt}copy(){const e=new gv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function K4(n){return n.loadsAllData()?new pv(n.getIndex()):n.hasLimit()?new $4(n):new Xu(n)}function nT(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Rt?t="$priority":n.index_===W4?t="$value":n.index_===xl?t="$key":(ae(n.index_ instanceof G4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Xt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Xt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Xt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Xt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Xt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function iT(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Rt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends KC{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=gh("p:rest:"),this.listens_={}}listen(e,t,i,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=jf.getListenId_(e,i),d={};this.listens_[c]=d;const m=nT(e._queryParams);this.restRequest_(o+".json",m,(p,v)=>{let E=v;if(p===404&&(E=null,p=null),p===null&&this.onDataUpdate_(o,E,!1,i),Tl(this.listens_,c)===d){let w;p?p===401?w="permission_denied":w="rest_error:"+p:w="ok",s(w,null)}})}unlisten(e,t){const i=jf.getListenId_(e,t);delete this.listens_[i]}get(e){const t=nT(e._queryParams),i=e._path.toString(),s=new ih;return this.restRequest_(i+".json",t,(o,c)=>{let d=c;o===404&&(d=null,o=null),o===null?(this.onDataUpdate_(i,d,!1,null),s.resolve(d)):s.reject(new Error(d))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Gl(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let m=null;if(d.status>=200&&d.status<300){try{m=Pu(d.responseText)}catch{Pn("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,m)}else d.status!==401&&d.status!==404&&Pn("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.rootNode_=xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(){return{value:null,children:new Map}}function aN(n,e,t){if(Ve(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Me(e);n.children.has(i)||n.children.set(i,Lf());const s=n.children.get(i);e=dt(e),aN(s,e,t)}}function zy(n,e,t){n.value!==null?t(e,n.value):Z4(n,(i,s)=>{const o=new ot(e.toString()+"/"+i);zy(s,o,t)})}function Z4(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&vn(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=10*1e3,eV=30*1e3,tV=5*60*1e3;class nV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new J4(e);const i=rT+(eV-rT)*Math.random();Iu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;vn(e,(s,o)=>{o>0&&ur(this.statsToReport_,s)&&(t[s]=o,i=!0)}),i&&this.server_.reportStats(t),Iu(this.reportStats_.bind(this),Math.floor(Math.random()*2*tV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ii;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ii||(Ii={}));function yv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _v(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ii.ACK_USER_WRITE,this.source=yv()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ot(e));return new Vf(Ke(),t,this.revert)}}else return ae(Me(this.path)===e,"operationForChild called for unrelated child."),new Vf(dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){this.source=e,this.path=t,this.type=Ii.LISTEN_COMPLETE}operationForChild(e){return Ve(this.path)?new Zu(this.source,Ke()):new Zu(this.source,dt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ii.OVERWRITE}operationForChild(e){return Ve(this.path)?new uo(this.source,Ke(),this.snap.getImmediateChild(e)):new uo(this.source,dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ii.MERGE}operationForChild(e){if(Ve(this.path)){const t=this.children.subtree(new ot(e));return t.isEmpty()?null:t.value?new uo(this.source,Ke(),t.value):new Pl(this.source,Ke(),t)}else return ae(Me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pl(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;const t=Me(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function rV(n,e,t,i){const s=[],o=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(Q4(c.childName,c.snapshotNode))}),mu(n,s,"child_removed",e,i,t),mu(n,s,"child_added",e,i,t),mu(n,s,"child_moved",o,i,t),mu(n,s,"child_changed",e,i,t),mu(n,s,"value",e,i,t),s}function mu(n,e,t,i,s,o){const c=i.filter(d=>d.type===t);c.sort((d,m)=>aV(n,d,m)),c.forEach(d=>{const m=sV(n,d,o);s.forEach(p=>{p.respondsTo(d.type)&&e.push(p.createEvent(m,n.query_))})})}function sV(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function aV(n,e,t){if(e.childName==null||t.childName==null)throw Hl("Should only compare child_ events.");const i=new Pe(e.childName,e.snapshotNode),s=new Pe(t.childName,t.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(n,e){return{eventCache:n,serverCache:e}}function Du(n,e,t,i){return Cm(new ha(e,t,i),n.serverCache)}function oN(n,e,t,i){return Cm(n.eventCache,new ha(e,t,i))}function Uf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ho(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sy;const oV=()=>(sy||(sy=new Bn(GL)),sy);class ht{static fromObject(e){let t=new ht(null);return vn(e,(i,s)=>{t=t.set(new ot(i),s)}),t}constructor(e,t=oV()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ke(),value:this.value};if(Ve(e))return null;{const i=Me(e),s=this.children.get(i);if(s!==null){const o=s.findRootMostMatchingPathAndValue(dt(e),t);return o!=null?{path:Nt(new ot(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{const t=Me(e),i=this.children.get(t);return i!==null?i.subtree(dt(e)):new ht(null)}}set(e,t){if(Ve(e))return new ht(t,this.children);{const i=Me(e),o=(this.children.get(i)||new ht(null)).set(dt(e),t),c=this.children.insert(i,o);return new ht(this.value,c)}}remove(e){if(Ve(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const t=Me(e),i=this.children.get(t);if(i){const s=i.remove(dt(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new ht(null):new ht(this.value,o)}else return this}}get(e){if(Ve(e))return this.value;{const t=Me(e),i=this.children.get(t);return i?i.get(dt(e)):null}}setTree(e,t){if(Ve(e))return t;{const i=Me(e),o=(this.children.get(i)||new ht(null)).setTree(dt(e),t);let c;return o.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,o),new ht(this.value,c)}}fold(e){return this.fold_(Ke(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,o)=>{i[s]=o.fold_(Nt(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Ke(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(Ve(e))return null;{const o=Me(e),c=this.children.get(o);return c?c.findOnPath_(dt(e),Nt(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ke(),t)}foreachOnPath_(e,t,i){if(Ve(e))return this;{this.value&&i(t,this.value);const s=Me(e),o=this.children.get(s);return o?o.foreachOnPath_(dt(e),Nt(t,s),i):new ht(null)}}foreach(e){this.foreach_(Ke(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(Nt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.writeTree_=e}static empty(){return new Oi(new ht(null))}}function Ou(n,e,t){if(Ve(e))return new Oi(new ht(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let o=i.value;const c=kn(s,e);return o=o.updateChild(c,t),new Oi(n.writeTree_.set(s,o))}else{const s=new ht(t),o=n.writeTree_.setTree(e,s);return new Oi(o)}}}function By(n,e,t){let i=n;return vn(t,(s,o)=>{i=Ou(i,Nt(e,s),o)}),i}function sT(n,e){if(Ve(e))return Oi.empty();{const t=n.writeTree_.setTree(e,new ht(null));return new Oi(t)}}function Hy(n,e){return vo(n,e)!=null}function vo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(kn(t.path,e)):null}function aT(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Rt,(i,s)=>{e.push(new Pe(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new Pe(i,s.value))}),e}function ea(n,e){if(Ve(e))return n;{const t=vo(n,e);return t!=null?new Oi(new ht(t)):new Oi(n.writeTree_.subtree(e))}}function Gy(n){return n.writeTree_.isEmpty()}function jl(n,e){return lN(Ke(),n.writeTree_,e)}function lN(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ae(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=lN(Nt(n,s),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Nt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n,e){return dN(e,n)}function lV(n,e,t,i,s){ae(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Ou(n.visibleWrites,e,t)),n.lastWriteId=i}function cV(n,e,t,i){ae(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=By(n.visibleWrites,e,t),n.lastWriteId=i}function uV(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function hV(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);ae(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,o=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&dV(d,i.path)?s=!1:gi(i.path,d.path)&&(o=!0)),c--}if(s){if(o)return fV(n),!0;if(i.snap)n.visibleWrites=sT(n.visibleWrites,i.path);else{const d=i.children;vn(d,m=>{n.visibleWrites=sT(n.visibleWrites,Nt(i.path,m))})}return!0}else return!1}function dV(n,e){if(n.snap)return gi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&gi(Nt(n.path,t),e))return!0;return!1}function fV(n){n.visibleWrites=cN(n.allWrites,mV,Ke()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function mV(n){return n.visible}function cN(n,e,t){let i=Oi.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const c=o.path;let d;if(o.snap)gi(t,c)?(d=kn(t,c),i=Ou(i,d,o.snap)):gi(c,t)&&(d=kn(c,t),i=Ou(i,Ke(),o.snap.getChild(d)));else if(o.children){if(gi(t,c))d=kn(t,c),i=By(i,d,o.children);else if(gi(c,t))if(d=kn(c,t),Ve(d))i=By(i,Ke(),o.children);else{const m=Tl(o.children,Me(d));if(m){const p=m.getChild(dt(d));i=Ou(i,Ke(),p)}}}else throw Hl("WriteRecord should have .snap or .children")}}return i}function uN(n,e,t,i,s){if(!i&&!s){const o=vo(n.visibleWrites,e);if(o!=null)return o;{const c=ea(n.visibleWrites,e);if(Gy(c))return t;if(t==null&&!Hy(c,Ke()))return null;{const d=t||xe.EMPTY_NODE;return jl(c,d)}}}else{const o=ea(n.visibleWrites,e);if(!s&&Gy(o))return t;if(!s&&t==null&&!Hy(o,Ke()))return null;{const c=function(p){return(p.visible||s)&&(!i||!~i.indexOf(p.writeId))&&(gi(p.path,e)||gi(e,p.path))},d=cN(n.allWrites,c,e),m=t||xe.EMPTY_NODE;return jl(d,m)}}}function pV(n,e,t){let i=xe.EMPTY_NODE;const s=vo(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Rt,(o,c)=>{i=i.updateImmediateChild(o,c)}),i;if(t){const o=ea(n.visibleWrites,e);return t.forEachChild(Rt,(c,d)=>{const m=jl(ea(o,new ot(c)),d);i=i.updateImmediateChild(c,m)}),aT(o).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const o=ea(n.visibleWrites,e);return aT(o).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function gV(n,e,t,i,s){ae(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=Nt(e,t);if(Hy(n.visibleWrites,o))return null;{const c=ea(n.visibleWrites,o);return Gy(c)?s.getChild(t):jl(c,s.getChild(t))}}function yV(n,e,t,i){const s=Nt(e,t),o=vo(n.visibleWrites,s);if(o!=null)return o;if(i.isCompleteForChild(t)){const c=ea(n.visibleWrites,s);return jl(c,i.getNode().getImmediateChild(t))}else return null}function _V(n,e){return vo(n.visibleWrites,e)}function vV(n,e,t,i,s,o,c){let d;const m=ea(n.visibleWrites,e),p=vo(m,Ke());if(p!=null)d=p;else if(t!=null)d=jl(m,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const v=[],E=c.getCompare(),w=o?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let T=w.getNext();for(;T&&v.length<s;)E(T,i)!==0&&v.push(T),T=w.getNext();return v}else return[]}function EV(){return{visibleWrites:Oi.empty(),allWrites:[],lastWriteId:-1}}function Ff(n,e,t,i){return uN(n.writeTree,n.treePath,e,t,i)}function Ev(n,e){return pV(n.writeTree,n.treePath,e)}function oT(n,e,t,i){return gV(n.writeTree,n.treePath,e,t,i)}function qf(n,e){return _V(n.writeTree,Nt(n.treePath,e))}function wV(n,e,t,i,s,o){return vV(n.writeTree,n.treePath,e,t,i,s,o)}function wv(n,e,t){return yV(n.writeTree,n.treePath,e,t)}function hN(n,e){return dN(Nt(n.treePath,e),n.writeTree)}function dN(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ae(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ae(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,Ku(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,$u(i,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,Ml(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,Ku(i,e.snapshotNode,s.oldSnap));else throw Hl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const fN=new xV;class bv{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ha(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wv(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ho(this.viewCache_),o=wV(this.writes_,s,t,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(n){return{filter:n}}function SV(n,e){ae(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function AV(n,e,t,i,s){const o=new bV;let c,d;if(t.type===Ii.OVERWRITE){const p=t;p.source.fromUser?c=Yy(n,e,p.path,p.snap,i,s,o):(ae(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered()&&!Ve(p.path),c=zf(n,e,p.path,p.snap,i,s,d,o))}else if(t.type===Ii.MERGE){const p=t;p.source.fromUser?c=NV(n,e,p.path,p.children,i,s,o):(ae(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered(),c=Wy(n,e,p.path,p.children,i,s,d,o))}else if(t.type===Ii.ACK_USER_WRITE){const p=t;p.revert?c=DV(n,e,p.path,i,s,o):c=RV(n,e,p.path,p.affectedTree,i,s,o)}else if(t.type===Ii.LISTEN_COMPLETE)c=IV(n,e,t.path,i,o);else throw Hl("Unknown operation type: "+t.type);const m=o.getChanges();return CV(e,c,m),{viewCache:c,changes:m}}function CV(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Uf(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(sN(Uf(e)))}}function mN(n,e,t,i,s,o){const c=e.eventCache;if(qf(i,t)!=null)return e;{let d,m;if(Ve(t))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=ho(e),v=p instanceof xe?p:xe.EMPTY_NODE,E=Ev(i,v);d=n.filter.updateFullNode(e.eventCache.getNode(),E,o)}else{const p=Ff(i,ho(e));d=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=Me(t);if(p===".priority"){ae(ua(t)===1,"Can't have a priority with additional path components");const v=c.getNode();m=e.serverCache.getNode();const E=oT(i,t,v,m);E!=null?d=n.filter.updatePriority(v,E):d=c.getNode()}else{const v=dt(t);let E;if(c.isCompleteForChild(p)){m=e.serverCache.getNode();const w=oT(i,t,c.getNode(),m);w!=null?E=c.getNode().getImmediateChild(p).updateChild(v,w):E=c.getNode().getImmediateChild(p)}else E=wv(i,p,e.serverCache);E!=null?d=n.filter.updateChild(c.getNode(),p,E,v,s,o):d=c.getNode()}}return Du(e,d,c.isFullyInitialized()||Ve(t),n.filter.filtersNodes())}}function zf(n,e,t,i,s,o,c,d){const m=e.serverCache;let p;const v=c?n.filter:n.filter.getIndexedFilter();if(Ve(t))p=v.updateFullNode(m.getNode(),i,null);else if(v.filtersNodes()&&!m.isFiltered()){const T=m.getNode().updateChild(t,i);p=v.updateFullNode(m.getNode(),T,null)}else{const T=Me(t);if(!m.isCompleteForPath(t)&&ua(t)>1)return e;const S=dt(t),L=m.getNode().getImmediateChild(T).updateChild(S,i);T===".priority"?p=v.updatePriority(m.getNode(),L):p=v.updateChild(m.getNode(),T,L,S,fN,null)}const E=oN(e,p,m.isFullyInitialized()||Ve(t),v.filtersNodes()),w=new bv(s,E,o);return mN(n,E,t,s,w,d)}function Yy(n,e,t,i,s,o,c){const d=e.eventCache;let m,p;const v=new bv(s,e,o);if(Ve(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,c),m=Du(e,p,!0,n.filter.filtersNodes());else{const E=Me(t);if(E===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),i),m=Du(e,p,d.isFullyInitialized(),d.isFiltered());else{const w=dt(t),T=d.getNode().getImmediateChild(E);let S;if(Ve(w))S=i;else{const P=v.getCompleteChild(E);P!=null?hv(w)===".priority"&&P.getChild(ZC(w)).isEmpty()?S=P:S=P.updateChild(w,i):S=xe.EMPTY_NODE}if(T.equals(S))m=e;else{const P=n.filter.updateChild(d.getNode(),E,S,w,v,c);m=Du(e,P,d.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function lT(n,e){return n.eventCache.isCompleteForChild(e)}function NV(n,e,t,i,s,o,c){let d=e;return i.foreach((m,p)=>{const v=Nt(t,m);lT(e,Me(v))&&(d=Yy(n,d,v,p,s,o,c))}),i.foreach((m,p)=>{const v=Nt(t,m);lT(e,Me(v))||(d=Yy(n,d,v,p,s,o,c))}),d}function cT(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Wy(n,e,t,i,s,o,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,p;Ve(t)?p=i:p=new ht(null).setTree(t,i);const v=e.serverCache.getNode();return p.children.inorderTraversal((E,w)=>{if(v.hasChild(E)){const T=e.serverCache.getNode().getImmediateChild(E),S=cT(n,T,w);m=zf(n,m,new ot(E),S,s,o,c,d)}}),p.children.inorderTraversal((E,w)=>{const T=!e.serverCache.isCompleteForChild(E)&&w.value===null;if(!v.hasChild(E)&&!T){const S=e.serverCache.getNode().getImmediateChild(E),P=cT(n,S,w);m=zf(n,m,new ot(E),P,s,o,c,d)}}),m}function RV(n,e,t,i,s,o,c){if(qf(s,t)!=null)return e;const d=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(Ve(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return zf(n,e,t,m.getNode().getChild(t),s,o,d,c);if(Ve(t)){let p=new ht(null);return m.getNode().forEachChild(xl,(v,E)=>{p=p.set(new ot(v),E)}),Wy(n,e,t,p,s,o,d,c)}else return e}else{let p=new ht(null);return i.foreach((v,E)=>{const w=Nt(t,v);m.isCompleteForPath(w)&&(p=p.set(v,m.getNode().getChild(w)))}),Wy(n,e,t,p,s,o,d,c)}}function IV(n,e,t,i,s){const o=e.serverCache,c=oN(e,o.getNode(),o.isFullyInitialized()||Ve(t),o.isFiltered());return mN(n,c,t,i,fN,s)}function DV(n,e,t,i,s,o){let c;if(qf(i,t)!=null)return e;{const d=new bv(i,e,s),m=e.eventCache.getNode();let p;if(Ve(t)||Me(t)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Ff(i,ho(e));else{const E=e.serverCache.getNode();ae(E instanceof xe,"serverChildren would be complete if leaf node"),v=Ev(i,E)}v=v,p=n.filter.updateFullNode(m,v,o)}else{const v=Me(t);let E=wv(i,v,e.serverCache);E==null&&e.serverCache.isCompleteForChild(v)&&(E=m.getImmediateChild(v)),E!=null?p=n.filter.updateChild(m,v,E,dt(t),d,o):e.eventCache.getNode().hasChild(v)?p=n.filter.updateChild(m,v,xe.EMPTY_NODE,dt(t),d,o):p=m,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Ff(i,ho(e)),c.isLeafNode()&&(p=n.filter.updateFullNode(p,c,o)))}return c=e.serverCache.isFullyInitialized()||qf(i,Ke())!=null,Du(e,p,c,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new pv(i.getIndex()),o=K4(i);this.processor_=TV(o);const c=t.serverCache,d=t.eventCache,m=s.updateFullNode(xe.EMPTY_NODE,c.getNode(),null),p=o.updateFullNode(xe.EMPTY_NODE,d.getNode(),null),v=new ha(m,c.isFullyInitialized(),s.filtersNodes()),E=new ha(p,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=Cm(E,v),this.eventGenerator_=new iV(this.query_)}get query(){return this.query_}}function kV(n){return n.viewCache_.serverCache.getNode()}function MV(n){return Uf(n.viewCache_)}function PV(n,e){const t=ho(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ve(e)&&!t.getImmediateChild(Me(e)).isEmpty())?t.getChild(e):null}function uT(n){return n.eventRegistrations_.length===0}function jV(n,e){n.eventRegistrations_.push(e)}function hT(n,e,t){const i=[];if(t){ae(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,s);c&&i.push(c)})}if(e){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(!c.matches(e))s.push(c);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function dT(n,e,t,i){e.type===Ii.MERGE&&e.source.queryId!==null&&(ae(ho(n.viewCache_),"We should always have a full cache before handling merges"),ae(Uf(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=AV(n.processor_,s,e,t,i);return SV(n.processor_,o.viewCache),ae(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,pN(n,o.changes,o.viewCache.eventCache.getNode(),null)}function LV(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Rt,(o,c)=>{i.push(Ml(o,c))}),t.isFullyInitialized()&&i.push(sN(t.getNode())),pN(n,i,t.getNode(),e)}function pN(n,e,t,i){const s=i?[i]:n.eventRegistrations_;return rV(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf;class gN{constructor(){this.views=new Map}}function VV(n){ae(!Bf,"__referenceConstructor has already been defined"),Bf=n}function UV(){return ae(Bf,"Reference.ts has not been loaded"),Bf}function FV(n){return n.views.size===0}function xv(n,e,t,i){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ae(o!=null,"SyncTree gave us an op for an invalid query."),dT(o,e,t,i)}else{let o=[];for(const c of n.views.values())o=o.concat(dT(c,e,t,i));return o}}function yN(n,e,t,i,s){const o=e._queryIdentifier,c=n.views.get(o);if(!c){let d=Ff(t,s?i:null),m=!1;d?m=!0:i instanceof xe?(d=Ev(t,i),m=!1):(d=xe.EMPTY_NODE,m=!1);const p=Cm(new ha(d,m,!1),new ha(i,s,!1));return new OV(e,p)}return c}function qV(n,e,t,i,s,o){const c=yN(n,e,i,s,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),jV(c,t),LV(c,t)}function zV(n,e,t,i){const s=e._queryIdentifier,o=[];let c=[];const d=da(n);if(s==="default")for(const[m,p]of n.views.entries())c=c.concat(hT(p,t,i)),uT(p)&&(n.views.delete(m),p.query._queryParams.loadsAllData()||o.push(p.query));else{const m=n.views.get(s);m&&(c=c.concat(hT(m,t,i)),uT(m)&&(n.views.delete(s),m.query._queryParams.loadsAllData()||o.push(m.query)))}return d&&!da(n)&&o.push(new(UV())(e._repo,e._path)),{removed:o,events:c}}function _N(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ta(n,e){let t=null;for(const i of n.views.values())t=t||PV(i,e);return t}function vN(n,e){if(e._queryParams.loadsAllData())return Rm(n);{const i=e._queryIdentifier;return n.views.get(i)}}function EN(n,e){return vN(n,e)!=null}function da(n){return Rm(n)!=null}function Rm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf;function BV(n){ae(!Hf,"__referenceConstructor has already been defined"),Hf=n}function HV(){return ae(Hf,"Reference.ts has not been loaded"),Hf}let GV=1;class fT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=EV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wN(n,e,t,i,s){return lV(n.pendingWriteTree_,e,t,i,s),s?Jl(n,new uo(yv(),e,t)):[]}function YV(n,e,t,i){cV(n.pendingWriteTree_,e,t,i);const s=ht.fromObject(t);return Jl(n,new Pl(yv(),e,s))}function Qs(n,e,t=!1){const i=uV(n.pendingWriteTree_,e);if(hV(n.pendingWriteTree_,e)){let o=new ht(null);return i.snap!=null?o=o.set(Ke(),!0):vn(i.children,c=>{o=o.set(new ot(c),!0)}),Jl(n,new Vf(i.path,o,t))}else return[]}function _h(n,e,t){return Jl(n,new uo(_v(),e,t))}function WV(n,e,t){const i=ht.fromObject(t);return Jl(n,new Pl(_v(),e,i))}function QV(n,e){return Jl(n,new Zu(_v(),e))}function $V(n,e,t){const i=Sv(n,t);if(i){const s=Av(i),o=s.path,c=s.queryId,d=kn(o,e),m=new Zu(vv(c),d);return Cv(n,o,m)}else return[]}function Gf(n,e,t,i,s=!1){const o=e._path,c=n.syncPointTree_.get(o);let d=[];if(c&&(e._queryIdentifier==="default"||EN(c,e))){const m=zV(c,e,t,i);FV(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const p=m.removed;if(d=m.events,!s){const v=p.findIndex(w=>w._queryParams.loadsAllData())!==-1,E=n.syncPointTree_.findOnPath(o,(w,T)=>da(T));if(v&&!E){const w=n.syncPointTree_.subtree(o);if(!w.isEmpty()){const T=ZV(w);for(let S=0;S<T.length;++S){const P=T[S],L=P.query,z=SN(n,P);n.listenProvider_.startListening(ku(L),Ju(n,L),z.hashFn,z.onComplete)}}}!E&&p.length>0&&!i&&(v?n.listenProvider_.stopListening(ku(e),null):p.forEach(w=>{const T=n.queryToTagMap.get(Im(w));n.listenProvider_.stopListening(ku(w),T)}))}JV(n,p)}return d}function bN(n,e,t,i){const s=Sv(n,i);if(s!=null){const o=Av(s),c=o.path,d=o.queryId,m=kn(c,e),p=new uo(vv(d),m,t);return Cv(n,c,p)}else return[]}function KV(n,e,t,i){const s=Sv(n,i);if(s){const o=Av(s),c=o.path,d=o.queryId,m=kn(c,e),p=ht.fromObject(t),v=new Pl(vv(d),m,p);return Cv(n,c,v)}else return[]}function Qy(n,e,t,i=!1){const s=e._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(s,(w,T)=>{const S=kn(w,s);o=o||ta(T,S),c=c||da(T)});let d=n.syncPointTree_.get(s);d?(c=c||da(d),o=o||ta(d,Ke())):(d=new gN,n.syncPointTree_=n.syncPointTree_.set(s,d));let m;o!=null?m=!0:(m=!1,o=xe.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((T,S)=>{const P=ta(S,Ke());P&&(o=o.updateImmediateChild(T,P))}));const p=EN(d,e);if(!p&&!e._queryParams.loadsAllData()){const w=Im(e);ae(!n.queryToTagMap.has(w),"View does not exist, but we have a tag");const T=eU();n.queryToTagMap.set(w,T),n.tagToQueryMap.set(T,w)}const v=Nm(n.pendingWriteTree_,s);let E=qV(d,e,t,v,o,m);if(!p&&!c&&!i){const w=vN(d,e);E=E.concat(tU(n,e,w))}return E}function Tv(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,d)=>{const m=kn(c,e),p=ta(d,m);if(p)return p});return uN(s,e,o,t,!0)}function XV(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(p,v)=>{const E=kn(p,t);i=i||ta(v,E)});let s=n.syncPointTree_.get(t);s?i=i||ta(s,Ke()):(s=new gN,n.syncPointTree_=n.syncPointTree_.set(t,s));const o=i!=null,c=o?new ha(i,!0,!1):null,d=Nm(n.pendingWriteTree_,e._path),m=yN(s,e,d,o?c.getNode():xe.EMPTY_NODE,o);return MV(m)}function Jl(n,e){return xN(e,n.syncPointTree_,null,Nm(n.pendingWriteTree_,Ke()))}function xN(n,e,t,i){if(Ve(n.path))return TN(n,e,t,i);{const s=e.get(Ke());t==null&&s!=null&&(t=ta(s,Ke()));let o=[];const c=Me(n.path),d=n.operationForChild(c),m=e.children.get(c);if(m&&d){const p=t?t.getImmediateChild(c):null,v=hN(i,c);o=o.concat(xN(d,m,p,v))}return s&&(o=o.concat(xv(s,n,i,t))),o}}function TN(n,e,t,i){const s=e.get(Ke());t==null&&s!=null&&(t=ta(s,Ke()));let o=[];return e.children.inorderTraversal((c,d)=>{const m=t?t.getImmediateChild(c):null,p=hN(i,c),v=n.operationForChild(c);v&&(o=o.concat(TN(v,d,m,p)))}),s&&(o=o.concat(xv(s,n,i,t))),o}function SN(n,e){const t=e.query,i=Ju(n,t);return{hashFn:()=>(kV(e)||xe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?$V(n,t._path,i):QV(n,t._path);{const o=QL(s,t);return Gf(n,t,null,o)}}}}function Ju(n,e){const t=Im(e);return n.queryToTagMap.get(t)}function Im(n){return n._path.toString()+"$"+n._queryIdentifier}function Sv(n,e){return n.tagToQueryMap.get(e)}function Av(n){const e=n.indexOf("$");return ae(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ot(n.substr(0,e))}}function Cv(n,e,t){const i=n.syncPointTree_.get(e);ae(i,"Missing sync point for query tag that we're tracking");const s=Nm(n.pendingWriteTree_,e);return xv(i,t,s,null)}function ZV(n){return n.fold((e,t,i)=>{if(t&&da(t))return[Rm(t)];{let s=[];return t&&(s=_N(t)),vn(i,(o,c)=>{s=s.concat(c)}),s}})}function ku(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(HV())(n._repo,n._path):n}function JV(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=Im(i),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}function eU(){return GV++}function tU(n,e,t){const i=e._path,s=Ju(n,e),o=SN(n,t),c=n.listenProvider_.startListening(ku(e),s,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(i);if(s)ae(!da(d.value),"If we're adding a query, it shouldn't be shadowed");else{const m=d.fold((p,v,E)=>{if(!Ve(p)&&v&&da(v))return[Rm(v).query];{let w=[];return v&&(w=w.concat(_N(v).map(T=>T.query))),vn(E,(T,S)=>{w=w.concat(S)}),w}});for(let p=0;p<m.length;++p){const v=m[p];n.listenProvider_.stopListening(ku(v),Ju(n,v))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Nv(t)}node(){return this.node_}}class Rv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Nt(this.path_,e);return new Rv(this.syncTree_,t)}node(){return Tv(this.syncTree_,this.path_)}}const nU=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},mT=function(n,e,t){if(!n||typeof n!="object")return n;if(ae(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return iU(n[".sv"],e,t);if(typeof n[".sv"]=="object")return rU(n[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},iU=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ae(!1,"Unexpected server value: "+n)}},rU=function(n,e,t){n.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ae(!1,"Unexpected increment value: "+i);const s=e.node();if(ae(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const c=s.getValue();return typeof c!="number"?i:c+i},AN=function(n,e,t,i){return Iv(e,new Rv(t,n),i)},CN=function(n,e,t){return Iv(n,new Nv(e),t)};function Iv(n,e,t){const i=n.getPriority().val(),s=mT(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,d=mT(c.getValue(),e,t);return d!==c.getValue()||s!==c.getPriority().val()?new cn(d,Kt(s)):n}else{const c=n;return o=c,s!==c.getPriority().val()&&(o=o.updatePriority(new cn(s))),c.forEachChild(Rt,(d,m)=>{const p=Iv(m,e.getImmediateChild(d),t);p!==m&&(o=o.updateImmediateChild(d,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Ov(n,e){let t=e instanceof ot?e:new ot(e),i=n,s=Me(t);for(;s!==null;){const o=Tl(i.node.children,s)||{children:{},childCount:0};i=new Dv(s,i,o),t=dt(t),s=Me(t)}return i}function ec(n){return n.node.value}function NN(n,e){n.node.value=e,$y(n)}function RN(n){return n.node.childCount>0}function sU(n){return ec(n)===void 0&&!RN(n)}function Dm(n,e){vn(n.node.children,(t,i)=>{e(new Dv(t,n,i))})}function IN(n,e,t,i){t&&e(n),Dm(n,s=>{IN(s,e,!0)})}function aU(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function vh(n){return new ot(n.parent===null?n.name:vh(n.parent)+"/"+n.name)}function $y(n){n.parent!==null&&oU(n.parent,n.name,n)}function oU(n,e,t){const i=sU(t),s=ur(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,$y(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,$y(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=/[\[\].#$\/\u0000-\u001F\u007F]/,cU=/[\[\].#$\u0000-\u001F\u007F]/,ay=10*1024*1024,kv=function(n){return typeof n=="string"&&n.length!==0&&!lU.test(n)},DN=function(n){return typeof n=="string"&&n.length!==0&&!cU.test(n)},uU=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DN(n)},hU=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!av(n)||n&&typeof n=="object"&&ur(n,".sv")},ON=function(n,e,t,i){i&&e===void 0||Om(Zf(n,"value"),e,t)},Om=function(n,e,t){const i=t instanceof ot?new N4(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Xa(i));if(typeof e=="function")throw new Error(n+"contains a function "+Xa(i)+" with contents = "+e.toString());if(av(e))throw new Error(n+"contains "+e.toString()+" "+Xa(i));if(typeof e=="string"&&e.length>ay/3&&Jf(e)>ay)throw new Error(n+"contains a string greater than "+ay+" utf8 bytes "+Xa(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(vn(e,(c,d)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(o=!0,!kv(c)))throw new Error(n+" contains an invalid key ("+c+") "+Xa(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);R4(i,c),Om(n,d,i),I4(i)}),s&&o)throw new Error(n+' contains ".value" child '+Xa(i)+" in addition to actual children.")}},dU=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=Qu(i);for(let c=0;c<o.length;c++)if(!(o[c]===".priority"&&c===o.length-1)){if(!kv(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(C4);let s=null;for(t=0;t<e.length;t++){if(i=e[t],s!==null&&gi(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},fU=function(n,e,t,i){const s=Zf(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const o=[];vn(e,(c,d)=>{const m=new ot(c);if(Om(s,d,Nt(t,m)),hv(m)===".priority"&&!hU(d))throw new Error(s+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),dU(s,o)},kN=function(n,e,t,i){if(!DN(t))throw new Error(Zf(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},mU=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kN(n,e,t)},MN=function(n,e){if(Me(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},pU=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!uU(t))throw new Error(Zf(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function km(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],o=s.getPath();t!==null&&!dv(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function PN(n,e,t){km(n,t),jN(n,i=>dv(i,e))}function Ei(n,e,t){km(n,t),jN(n,i=>gi(i,e)||gi(e,i))}function jN(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const o=s.path;e(o)?(yU(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function yU(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Ru&&gn("event: "+t.toString()),Zl(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U="repo_interrupt",vU=25;class EU{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lf(),this.transactionQueueTree_=new Dv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function wU(n,e,t){if(n.stats_=cv(n.repoInfo_),n.forceRestClient_||ZL())n.server_=new jf(n.repoInfo_,(i,s,o,c)=>{pT(n,i,s,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>gT(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Qr(n.repoInfo_,e,(i,s,o,c)=>{pT(n,i,s,o,c)},i=>{gT(n,i)},i=>{bU(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=i4(n.repoInfo_,()=>new nV(n.stats_,n.server_)),n.infoData_=new X4,n.infoSyncTree_=new fT({startListening:(i,s,o,c)=>{let d=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(d=_h(n.infoSyncTree_,i._path,m),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Mv(n,"connected",!1),n.serverSyncTree_=new fT({startListening:(i,s,o,c)=>(n.server_.listen(i,o,s,(d,m)=>{const p=c(d,m);Ei(n.eventQueue_,i._path,p)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function LN(n){const t=n.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Mm(n){return nU({timestamp:LN(n)})}function pT(n,e,t,i,s){n.dataUpdateCount++;const o=new ot(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(i){const m=pf(t,p=>Kt(p));c=KV(n.serverSyncTree_,o,m,s)}else{const m=Kt(t);c=bN(n.serverSyncTree_,o,m,s)}else if(i){const m=pf(t,p=>Kt(p));c=WV(n.serverSyncTree_,o,m)}else{const m=Kt(t);c=_h(n.serverSyncTree_,o,m)}let d=o;c.length>0&&(d=Ll(n,o)),Ei(n.eventQueue_,d,c)}function gT(n,e){Mv(n,"connected",e),e===!1&&AU(n)}function bU(n,e){vn(e,(t,i)=>{Mv(n,t,i)})}function Mv(n,e,t){const i=new ot("/.info/"+e),s=Kt(t);n.infoData_.updateSnapshot(i,s);const o=_h(n.infoSyncTree_,i,s);Ei(n.eventQueue_,i,o)}function Pv(n){return n.nextWriteId_++}function xU(n,e,t){const i=XV(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{const o=Kt(s).withIndex(e._queryParams.getIndex());Qy(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=_h(n.serverSyncTree_,e._path,o);else{const d=Ju(n.serverSyncTree_,e);c=bN(n.serverSyncTree_,e._path,o,d)}return Ei(n.eventQueue_,e._path,c),Gf(n.serverSyncTree_,e,t,null,!0),o},s=>(Eh(n,"get for query "+Xt(e)+" failed: "+s),Promise.reject(new Error(s))))}function TU(n,e,t,i,s){Eh(n,"set",{path:e.toString(),value:t,priority:i});const o=Mm(n),c=Kt(t,i),d=Tv(n.serverSyncTree_,e),m=CN(c,d,o),p=Pv(n),v=wN(n.serverSyncTree_,e,m,p,!0);km(n.eventQueue_,v),n.server_.put(e.toString(),c.val(!0),(w,T)=>{const S=w==="ok";S||Pn("set at "+e+" failed: "+w);const P=Qs(n.serverSyncTree_,p,!S);Ei(n.eventQueue_,e,P),Ky(n,s,w,T)});const E=Lv(n,e);Ll(n,E),Ei(n.eventQueue_,E,[])}function SU(n,e,t,i){Eh(n,"update",{path:e.toString(),value:t});let s=!0;const o=Mm(n),c={};if(vn(t,(d,m)=>{s=!1,c[d]=AN(Nt(e,d),Kt(m),n.serverSyncTree_,o)}),s)gn("update() called with empty data.  Don't do anything."),Ky(n,i,"ok",void 0);else{const d=Pv(n),m=YV(n.serverSyncTree_,e,c,d);km(n.eventQueue_,m),n.server_.merge(e.toString(),t,(p,v)=>{const E=p==="ok";E||Pn("update at "+e+" failed: "+p);const w=Qs(n.serverSyncTree_,d,!E),T=w.length>0?Ll(n,e):e;Ei(n.eventQueue_,T,w),Ky(n,i,p,v)}),vn(t,p=>{const v=Lv(n,Nt(e,p));Ll(n,v)}),Ei(n.eventQueue_,e,[])}}function AU(n){Eh(n,"onDisconnectEvents");const e=Mm(n),t=Lf();zy(n.onDisconnect_,Ke(),(s,o)=>{const c=AN(s,o,n.serverSyncTree_,e);aN(t,s,c)});let i=[];zy(t,Ke(),(s,o)=>{i=i.concat(_h(n.serverSyncTree_,s,o));const c=Lv(n,s);Ll(n,c)}),n.onDisconnect_=Lf(),Ei(n.eventQueue_,Ke(),i)}function CU(n,e,t){let i;Me(e._path)===".info"?i=Qy(n.infoSyncTree_,e,t):i=Qy(n.serverSyncTree_,e,t),PN(n.eventQueue_,e._path,i)}function NU(n,e,t){let i;Me(e._path)===".info"?i=Gf(n.infoSyncTree_,e,t):i=Gf(n.serverSyncTree_,e,t),PN(n.eventQueue_,e._path,i)}function RU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_U)}function Eh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gn(t,...e)}function Ky(n,e,t,i){e&&Zl(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let o=s;i&&(o+=": "+i);const c=new Error(o);c.code=s,e(c)}})}function VN(n,e,t){return Tv(n.serverSyncTree_,e,t)||xe.EMPTY_NODE}function jv(n,e=n.transactionQueueTree_){if(e||Pm(n,e),ec(e)){const t=FN(n,e);ae(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&IU(n,vh(e),t)}else RN(e)&&Dm(e,t=>{jv(n,t)})}function IU(n,e,t){const i=t.map(p=>p.currentWriteId),s=VN(n,e,i);let o=s;const c=s.hash();for(let p=0;p<t.length;p++){const v=t[p];ae(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const E=kn(e,v.path);o=o.updateChild(E,v.currentOutputSnapshotRaw)}const d=o.val(!0),m=e;n.server_.put(m.toString(),d,p=>{Eh(n,"transaction put response",{path:m.toString(),status:p});let v=[];if(p==="ok"){const E=[];for(let w=0;w<t.length;w++)t[w].status=2,v=v.concat(Qs(n.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&E.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();Pm(n,Ov(n.transactionQueueTree_,e)),jv(n,n.transactionQueueTree_),Ei(n.eventQueue_,e,v);for(let w=0;w<E.length;w++)Zl(E[w])}else{if(p==="datastale")for(let E=0;E<t.length;E++)t[E].status===3?t[E].status=4:t[E].status=0;else{Pn("transaction at "+m.toString()+" failed: "+p);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=p}Ll(n,e)}},c)}function Ll(n,e){const t=UN(n,e),i=vh(t),s=FN(n,t);return DU(n,s,i),i}function DU(n,e,t){if(e.length===0)return;const i=[];let s=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const m=e[d],p=kn(t,m.path);let v=!1,E;if(ae(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)v=!0,E=m.abortReason,s=s.concat(Qs(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=vU)v=!0,E="maxretry",s=s.concat(Qs(n.serverSyncTree_,m.currentWriteId,!0));else{const w=VN(n,m.path,c);m.currentInputSnapshot=w;const T=e[d].update(w.val());if(T!==void 0){Om("transaction failed: Data returned ",T,m.path);let S=Kt(T);typeof T=="object"&&T!=null&&ur(T,".priority")||(S=S.updatePriority(w.getPriority()));const L=m.currentWriteId,z=Mm(n),Y=CN(S,w,z);m.currentOutputSnapshotRaw=S,m.currentOutputSnapshotResolved=Y,m.currentWriteId=Pv(n),c.splice(c.indexOf(L),1),s=s.concat(wN(n.serverSyncTree_,m.path,Y,m.currentWriteId,m.applyLocally)),s=s.concat(Qs(n.serverSyncTree_,L,!0))}else v=!0,E="nodata",s=s.concat(Qs(n.serverSyncTree_,m.currentWriteId,!0))}Ei(n.eventQueue_,t,s),s=[],v&&(e[d].status=2,function(w){setTimeout(w,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(E==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(E),!1,null))))}Pm(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Zl(i[d]);jv(n,n.transactionQueueTree_)}function UN(n,e){let t,i=n.transactionQueueTree_;for(t=Me(e);t!==null&&ec(i)===void 0;)i=Ov(i,t),e=dt(e),t=Me(e);return i}function FN(n,e){const t=[];return qN(n,e,t),t.sort((i,s)=>i.order-s.order),t}function qN(n,e,t){const i=ec(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);Dm(e,s=>{qN(n,s,t)})}function Pm(n,e){const t=ec(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,NN(e,t.length>0?t:void 0)}Dm(e,i=>{Pm(n,i)})}function Lv(n,e){const t=vh(UN(n,e)),i=Ov(n.transactionQueueTree_,e);return aU(i,s=>{oy(n,s)}),oy(n,i),IN(i,s=>{oy(n,s)}),t}function oy(n,e){const t=ec(e);if(t){const i=[];let s=[],o=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(ae(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):(ae(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(Qs(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));o===-1?NN(e,void 0):t.length=o+1,Ei(n.eventQueue_,vh(e),s);for(let c=0;c<i.length;c++)Zl(i[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function kU(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Pn(`Invalid query segment '${t}' in query '${n}'`)}return e}const yT=function(n,e){const t=MU(n),i=t.namespace;t.domain==="firebase.com"&&es(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&es("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||BL();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new BC(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new ot(t.pathString)}},MU=function(n){let e="",t="",i="",s="",o="",c=!0,d="https",m=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(d=n.substring(0,p-1),n=n.substring(p+2));let v=n.indexOf("/");v===-1&&(v=n.length);let E=n.indexOf("?");E===-1&&(E=n.length),e=n.substring(0,Math.min(v,E)),v<E&&(s=OU(n.substring(v,E)));const w=kU(n.substring(Math.min(n.length,E)));p=e.indexOf(":"),p>=0?(c=d==="https"||d==="wss",m=parseInt(e.substring(p+1),10)):p=e.length;const T=e.slice(0,p);if(T.toLowerCase()==="localhost")t="localhost";else if(T.split(".").length<=2)t=T;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),t=e.substring(S+1),o=i}"ns"in w&&(o=w.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:c,scheme:d,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",PU=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let s;const o=new Array(8);for(s=7;s>=0;s--)o[s]=_T.charAt(t%64),t=Math.floor(t/64);ae(t===0,"Cannot push at time == 0");let c=o.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)c+=_T.charAt(e[s]);return ae(c.length===20,"nextPushId: Length should be 20."),c}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Xt(this.snapshot.exportVal())}}class BN{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return Ve(this._path)?null:hv(this._path)}get ref(){return new hr(this._repo,this._path)}get _queryIdentifier(){const e=iT(this._queryParams),t=ov(e);return t==="{}"?"default":t}get _queryObject(){return iT(this._queryParams)}isEqual(e){if(e=ft(e),!(e instanceof Vv))return!1;const t=this._repo===e._repo,i=dv(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+A4(this._path)}}class hr extends Vv{constructor(e,t){super(e,t,new gv,!1)}get parent(){const e=ZC(this._path);return e===null?null:new hr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Vl{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ot(e),i=Ul(this.ref,e);return new Vl(this._node.getChild(t),i,Rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new Vl(s,Ul(this.ref,i),Rt)))}hasChild(e){const t=new ot(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ja(n,e){return n=ft(n),n._checkNotDeleted("ref"),e!==void 0?Ul(n._root,e):n._root}function Ul(n,e){return n=ft(n),Me(n._path)===null?mU("child","path",e):kN("child","path",e),new hr(n._repo,Nt(n._path,e))}function jU(n,e){n=ft(n),MN("push",n._path),ON("push",e,n._path,!0);const t=LN(n._repo),i=PU(t),s=Ul(n,i),o=Ul(n,i);let c;return e!=null?c=GN(o,e).then(()=>o):c=Promise.resolve(o),s.then=c.then.bind(c),s.catch=c.then.bind(c,void 0),s}function GN(n,e){n=ft(n),MN("set",n._path),ON("set",e,n._path,!1);const t=new ih;return TU(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function vT(n,e){fU("update",e,n._path);const t=new ih;return SU(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function LU(n){n=ft(n);const e=new HN(()=>{}),t=new jm(e);return xU(n._repo,n,t).then(i=>new Vl(i,new hr(n._repo,n._path),n._queryParams.getIndex()))}class jm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new zN("value",this,new Vl(e.snapshotNode,new hr(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new BN(this,e,t):null}matches(e){return e instanceof jm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Uv{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new BN(this,e,t):null}createEvent(e,t){ae(e.childName!=null,"Child events should have a childName.");const i=Ul(new hr(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new zN(e.type,this,new Vl(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Uv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function YN(n,e,t,i,s){const o=new HN(t,void 0),c=e==="value"?new jm(o):new Uv(e,o);return CU(n._repo,n,c),()=>NU(n._repo,n,c)}function Fv(n,e,t,i){return YN(n,"value",e)}function VU(n,e,t,i){return YN(n,"child_added",e)}VV(hr);BV(hr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU="FIREBASE_DATABASE_EMULATOR_HOST",Xy={};let FU=!1;function qU(n,e,t,i){n.repoInfo_=new BC(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function zU(n,e,t,i,s){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||es("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=yT(o,s),d=c.repoInfo,m;typeof process<"u"&&Ux&&(m=Ux[UU]),m?(o=`http://${m}?ns=${d.namespace}`,c=yT(o,s),d=c.repoInfo):c.repoInfo.secure;const p=new e4(n.name,n.options,e);pU("Invalid Firebase Database URL",c),Ve(c.path)||es("Database URL must point to the root of a Firebase Database (not including a child path).");const v=HU(d,n,p,new JL(n,t));return new GU(v,n)}function BU(n,e){const t=Xy[e];(!t||t[n.key]!==n)&&es(`Database ${e}(${n.repoInfo_}) has already been deleted.`),RU(n),delete t[n.key]}function HU(n,e,t,i){let s=Xy[e.name];s||(s={},Xy[e.name]=s);let o=s[n.toURLString()];return o&&es("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new EU(n,FU,t,i),s[n.toURLString()]=o,o}class GU{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(wU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hr(this._repo,Ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(BU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&es("Cannot call "+e+" on a deleted database.")}}function qv(n=h_(),e){const t=tm(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=tS("database");i&&YU(t,...i)}return t}function YU(n,e,t,i={}){n=ft(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&na(i,o.repoInfo_.emulatorOptions))return;es("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&es('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new hf(hf.OWNER);else if(i.mockUserToken){const d=typeof i.mockUserToken=="string"?i.mockUserToken:rS(i.mockUserToken,n.app.options.projectId);c=new hf(d)}qU(o,s,i,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n){LL(mo),ro(new ia("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return zU(i,s,o,t)},"PUBLIC").setMultipleInstances(!0)),ir(Fx,qx,n),ir(Fx,qx,"esm2017")}Qr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Qr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};WU();function QU(){const{currentUser:n}=bi(),[e,t]=M.useState({name:"",department:"",position:""}),[i,s]=M.useState([]),[o,c]=M.useState([]),[d,m]=M.useState([]),[p,v]=M.useState(!0),[E,w]=M.useState(0);M.useEffect(()=>{const Y=async()=>{if(!n)return{name:"",department:"",position:""};const R=await rs(Zt(Xe,"users",n.uid));if(R.exists()){const I=R.data();return{name:I.displayName||"",department:I.department||"",position:I.position||""}}return{name:"",department:"",position:""}},Q=async()=>{const R=io(Hn(Xe,"announcements"),Nu("date","desc"),ey(10));return(await or(R)).docs.map(j=>({id:j.id,...j.data()}))},te=async()=>{const R=io(Hn(Xe,"tasks"),Nu("createdAt","desc"),ey(20));return(await or(R)).docs.map(j=>({id:j.id,...j.data()}))},re=async()=>{const R=new Date;R.setHours(0,0,0,0);const I=io(Hn(Xe,"events"),Yu("start",">=",R),Nu("start","asc"),ey(10));return(await or(I)).docs.map(q=>({id:q.id,...q.data()}))};n&&(async()=>{v(!0);try{const R=await Y();t(R);const[I,j,q]=await Promise.all([Q(),te(),re()]);m(I.slice(0,5)),s(j.filter(O=>(n&&O.assignedTo===n.uid||R.department&&O.department===R.department)&&O.status!=="완료"&&O.status!=="completed").sort((O,rt)=>O.status===rt.status?0:O.status==="진행중"||O.status==="in-progress"?-1:rt.status==="진행중"||rt.status==="in-progress"?1:0).slice(0,5)),c(q.filter(O=>R.department==="개발팀"&&(O.category==="dev"||O.category==="personal")||R.department!=="개발팀").slice(0,5))}catch{}v(!1)})();const k=qv();let C=null;if(n){const R=Ja(k,"channels");C=Fv(R,I=>{const j=I.val()||{};let q=0;Object.values(j).forEach(O=>{O.members&&O.members[n.uid]&&O.messages&&Object.values(O.messages).forEach(rt=>{rt.sender!==n.uid&&!rt.seen&&q++})}),w(q)})}return()=>{C&&C()}},[n]);const T=[{name:"진행 중인 작업",value:i.filter(Y=>Y.status==="진행중"||Y.status==="in-progress").length.toString()},{name:"예정된 미팅",value:o.length.toString()},{name:"새로운 메시지",value:E.toString()}],S=[{name:"공지사항",color:"bg-blue-500",path:"/notice"},{name:"작업관리",color:"bg-purple-500",path:"/tasks"},{name:"일정관리",color:"bg-green-500",path:"/calendar"},{name:"메시지",color:"bg-yellow-500",path:"/messages"},{name:"주소록",color:"bg-indigo-500",path:"/contacts"}],L=new Date().getHours();let z="안녕하세요";return L<12?z="좋은 아침입니다":L<17?z="좋은 오후입니다":z="좋은 저녁입니다",p?g.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:g.jsx("div",{className:"w-16 h-16 border-t-2 border-b-2 border-indigo-600 rounded-full animate-spin"})}):g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[g.jsx("div",{className:"text-white bg-gradient-to-r from-indigo-600 to-purple-600",children:g.jsx("div",{className:"px-4 py-12 mx-auto max-w-7xl sm:px-6 lg:px-8",children:g.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[g.jsxs("div",{className:"md:w-1/2",children:[g.jsxs("h1",{className:"text-3xl font-extrabold tracking-tight sm:text-4xl",children:[z,", ",g.jsx("span",{className:"text-indigo-200",children:e==null?void 0:e.name}),"님!"]}),g.jsx("p",{className:"max-w-3xl mt-3 text-lg text-indigo-200",children:"오늘도 생산적인 하루 되세요. 당신의 작업 현황과 일정을 한눈에 확인하세요."}),g.jsx("div",{className:"mt-3 text-sm text-indigo-200",children:g.jsxs("span",{children:[e==null?void 0:e.department," || ",e==null?void 0:e.position]})})]}),g.jsx("div",{className:"hidden mt-8 md:block md:w-1/2 md:mt-0",children:g.jsx("img",{src:(e==null?void 0:e.photoURL)||"https://cdn.pixabay.com/photo/2017/10/24/07/12/hacker-2883632_1280.jpg",alt:"Dashboard Illustration",className:"object-cover object-center w-full h-64 rounded-lg shadow-xl"})})]})})}),g.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[g.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:T.map(Y=>g.jsx("div",{className:"p-6 overflow-hidden transition-shadow duration-300 bg-white shadow-lg rounded-2xl hover:shadow-xl",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"flex-shrink-0 p-3 rounded-md bg-indigo-50",children:g.jsx("span",{className:"text-xl font-bold text-indigo-600",children:Y.name.charAt(0)})}),g.jsx("div",{className:"flex-1 w-0 ml-5",children:g.jsxs("dl",{children:[g.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:Y.name}),g.jsx("dd",{children:g.jsx("div",{className:"flex items-baseline",children:g.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:Y.value})})})]})})]})},Y.name))}),g.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-8 md:grid-cols-3",children:[g.jsx(jL,{announcements:d,myDepartment:e.department}),g.jsx(OL,{tasks:i,myUid:n.uid,myDepartment:e.department,myName:e.name}),g.jsx(ML,{events:o})]}),g.jsxs("div",{className:"mt-8",children:[g.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:"빠른 액세스"}),g.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6",children:S.map(Y=>g.jsxs(Ne,{to:Y.path,className:"flex flex-col items-center justify-center p-6 transition-all duration-300 bg-white shadow-md rounded-xl hover:shadow-lg",children:[g.jsx("div",{className:`w-12 h-12 ${Y.color} rounded-full flex items-center justify-center text-white font-bold text-xl mb-3`,children:Y.name.charAt(0)}),g.jsx("span",{className:"text-sm font-medium text-gray-700",children:Y.name})]},Y.name))})]})]}),g.jsx("footer",{className:"mt-12 bg-white border-t border-gray-200",children:g.jsx("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:g.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[g.jsxs("div",{className:"flex justify-center space-x-6 md:justify-start",children:[g.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:g.jsx("span",{children:"회사 소개"})}),g.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:g.jsx("span",{children:"이용약관"})}),g.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:g.jsx("span",{children:"개인정보처리방침"})}),g.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:g.jsx("span",{children:"고객센터"})})]}),g.jsx("p",{className:"mt-8 text-sm text-center text-gray-400 md:mt-0 md:text-right",children:"© 2025 그룹웨어 시스템. All rights reserved."})]})})})]})}function $U(){const[n,e]=M.useState([]),[t,i]=M.useState(!0),[s,o]=M.useState([]),[c,d]=M.useState([]),[m,p]=M.useState(1),[v,E]=M.useState(1),w=5,[T,S]=M.useState("latest"),[P,L]=M.useState("");M.useEffect(()=>{i(!0),(async()=>{try{const R=io(Hn(Xe,"announcements"),Nu("createdAt","desc")),j=(await or(R)).docs.map(pe=>({id:pe.id,...pe.data()})),q=j.filter(pe=>pe.isImportant),O=j.filter(pe=>!pe.isImportant),rt=z(O,T),bt=z(q,T),le=Y(rt,P),Ee=Y(bt,P);o(Ee),d(le),e(j),E(Math.ceil(le.length/w)),i(!1)}catch(R){alert("공지사항 불러오기 실패: "+R.message),i(!1)}})()},[T,P]);const z=(C,R)=>{const I=[...C];switch(R){case"latest":return I.sort((j,q)=>new Date(q.createdAt)-new Date(j.createdAt));case"oldest":return I.sort((j,q)=>new Date(j.createdAt)-new Date(q.createdAt));case"views":return I.sort((j,q)=>q.viewCount-j.viewCount);default:return I}},Y=(C,R)=>R?C.filter(I=>I.title&&I.title.toLowerCase().includes(R.toLowerCase())||I.content&&I.content.toLowerCase().includes(R.toLowerCase())):C,te=m*w-w,re=c.slice(te,te+w),ne=C=>{C.preventDefault(),p(1)},k=C=>{S(C.target.value),p(1)};return g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"공지사항"}),g.jsx(Ne,{to:"/notice/new",className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors focus:ring-4 focus:ring-indigo-100",children:"공지사항 작성"})]}),g.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[g.jsx("form",{onSubmit:ne,className:"flex-1",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:P,onChange:C=>L(C.target.value),placeholder:"제목 또는 내용으로 검색",className:"w-full pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),g.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-indigo-600",children:"🔍"})]})}),g.jsx("div",{className:"w-full sm:w-48",children:g.jsxs("select",{value:T,onChange:k,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",children:[g.jsx("option",{value:"latest",children:"최신순"}),g.jsx("option",{value:"oldest",children:"오래된순"}),g.jsx("option",{value:"views",children:"조회수순"})]})})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[s.length>0&&g.jsx("div",{className:"bg-indigo-50 px-6 py-4 border-b border-indigo-100",children:g.jsx("h2",{className:"text-lg font-semibold text-indigo-800",children:"중요 공지"})}),g.jsx("div",{className:"divide-y divide-gray-100",children:t?Array(3).fill(0).map((C,R)=>g.jsx("div",{className:"px-6 py-4",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})},R)):s.length===0&&c.length===0?g.jsx("div",{className:"px-6 py-12 text-center",children:g.jsx("p",{className:"text-gray-500",children:"공지사항이 없습니다."})}):g.jsxs(g.Fragment,{children:[s.map(C=>g.jsx(Ne,{to:`/notice/${C.id}`,className:"block hover:bg-gray-50 transition-colors",children:g.jsxs("div",{className:"px-6 py-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:"중요"}),g.jsx("h3",{className:"font-medium text-gray-900",children:C.title})]}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[g.jsx("span",{children:C.department}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:C.author}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:C.createdAt&&C.createdAt.seconds?new Date(C.createdAt.seconds*1e3).toLocaleDateString():C.createdAt&&typeof C.createdAt=="string"?C.createdAt:""}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsxs("span",{children:["조회 ",C.viewCount]})]})]})},C.id)),re.map(C=>g.jsx(Ne,{to:`/notice/${C.id}`,className:"block hover:bg-gray-50 transition-colors",children:g.jsxs("div",{className:"px-6 py-4",children:[g.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:C.title}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[g.jsx("span",{children:C.department}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:C.author}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:C.createdAt&&C.createdAt.seconds?new Date(C.createdAt.seconds*1e3).toLocaleDateString():C.createdAt&&typeof C.createdAt=="string"?C.createdAt:""}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsxs("span",{children:["조회 ",C.viewCount]})]})]})},C.id))]})}),!t&&c.length>0&&g.jsx("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-center",children:g.jsxs("nav",{className:"flex items-center space-x-2",children:[g.jsx("button",{onClick:()=>p(C=>Math.max(C-1,1)),disabled:m===1,className:`px-3 py-1 rounded-md ${m===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:"이전"}),Array.from({length:v},(C,R)=>R+1).map(C=>g.jsx("button",{onClick:()=>p(C),className:`px-3 py-1 rounded-md ${m===C?"bg-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:C},C)),g.jsx("button",{onClick:()=>p(C=>Math.min(C+1,v)),disabled:m===v,className:`px-3 py-1 rounded-md ${m===v?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:"다음"})]})})]})]})}function ET(n){return n?typeof n=="object"&&n.seconds?new Date(n.seconds*1e3).toLocaleDateString():typeof n=="string"?n:"":""}function KU(){const{id:n}=fo(),e=jn(),[t,i]=M.useState(null),[s,o]=M.useState(!0),[c,d]=M.useState(null);M.useEffect(()=>{async function p(){o(!0),d(null);try{const v=Zt(Xe,"announcements",n),E=await rs(v);E.exists()?i({id:n,...E.data()}):d("공지사항을 찾을 수 없습니다.")}catch{d("공지사항을 불러오는 중 오류가 발생했습니다.")}finally{o(!1)}}p()},[n]);const m=async()=>{if(window.confirm("이 공지사항을 삭제하시겠습니까?"))try{await AC(Zt(Xe,"announcements",n)),alert("공지사항이 삭제되었습니다."),e("/notice")}catch{alert("공지사항 삭제 중 오류가 발생했습니다.")}};return s?g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-8"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):c?g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"text-center py-12",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"오류가 발생했습니다"}),g.jsx("p",{className:"mt-2 text-gray-600",children:c}),g.jsx(Ne,{to:"/notice",className:"mt-4 inline-block px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"공지사항 목록으로"})]})}):g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:t&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.isImportant&&g.jsx("span",{className:"px-2.5 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:"중요"}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.title})]}),g.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-6 pb-6 border-b border-gray-100",children:[g.jsx("span",{children:t.department}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:t.author}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:ET(t.createdAt)}),t.updatedAt&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"mx-1",children:"•"}),g.jsxs("span",{children:["수정됨: ",ET(t.updatedAt)]})]}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsxs("span",{children:["조회 ",t.viewCount]})]}),g.jsx("div",{className:"prose max-w-none mb-6",children:g.jsx("p",{className:"whitespace-pre-line text-gray-800",children:t.content})}),t.attachments&&t.attachments.length>0&&g.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"첨부 파일"}),g.jsx("div",{className:"space-y-2",children:t.attachments.map(p=>g.jsxs("a",{href:"#",className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsx("span",{className:"text-gray-500",children:"📎"}),g.jsx("span",{className:"text-sm text-gray-700",children:p.name}),g.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:p.size})]},p.id))})]})]}),g.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-between items-center",children:[g.jsx(Ne,{to:"/notice",className:"text-gray-600 hover:text-gray-900",children:"목록으로"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ne,{to:`/notice/${t.id}/edit`,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"수정"}),g.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:"삭제"})]})]})]})})}const wT=n=>{let e;const t=new Set,i=(p,v)=>{const E=typeof p=="function"?p(e):p;if(!Object.is(E,e)){const w=e;e=v??(typeof E!="object"||E===null)?E:Object.assign({},e,E),t.forEach(T=>T(e,w))}},s=()=>e,d={setState:i,getState:s,getInitialState:()=>m,subscribe:p=>(t.add(p),()=>t.delete(p))},m=e=n(i,s,d);return d},XU=n=>n?wT(n):wT,ZU=n=>n;function JU(n,e=ZU){const t=Zw.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Zw.useDebugValue(t),t}const bT=n=>{const e=XU(n),t=i=>JU(e,i);return Object.assign(t,e),t},WN=n=>n?bT(n):bT,e6=WN(n=>({currentNotice:null,loading:!1,error:null,fetchNoticeById:async e=>{n({loading:!0,error:null});try{const t=Zt(Xe,"announcements",e),i=await rs(t);i.exists()?n({currentNotice:{id:e,...i.data()},loading:!1}):n({error:"공지사항을 찾을 수 없습니다.",loading:!1})}catch(t){n({error:t.message,loading:!1})}},clearCurrentNotice:()=>n({currentNotice:null}),clearError:()=>n({error:null})})),QN=WN(n=>({currentUser:null,setCurrentUser:e=>n({currentUser:e}),clearCurrentUser:()=>n({currentUser:null})}));function xT(){const{id:n}=fo(),e=jn(),t=n!==void 0&&n!=="new",{currentNotice:i,loading:s,error:o,fetchNoticeById:c,clearError:d,clearCurrentNotice:m}=e6(),{currentUser:p}=QN(),[v,E]=M.useState({title:"",content:"",department:"",isImportant:!1,isHtml:!1});M.useEffect(()=>(t?c(n):m(),()=>{d(),m()}),[t,n,c,m,d]),M.useEffect(()=>{t&&i&&E({title:i.title||"",content:i.content||"",department:i.department||"",isImportant:i.isImportant||!1,isHtml:i.isHtml||!1})},[t,i]);const w=S=>{const{name:P,value:L,type:z,checked:Y}=S.target;E(Q=>({...Q,[P]:z==="checkbox"?Y:L}))},T=async S=>{if(S.preventDefault(),console.log("handleSubmit 실행됨"),!p){alert("로그인이 필요합니다."),e("/login");return}console.log("공지사항 저장 시 formData:",v),console.log("공지사항 저장 시 currentUser:",p);try{t?(await mh(Zt(Xe,"announcements",n),{...v,author:p&&(p.displayName||p.email)||"익명",department:p&&p.department||v.department||"",updatedAt:Ji()}),alert("공지사항이 수정되었습니다.")):(await Tm(Hn(Xe,"announcements"),{...v,author:p&&(p.displayName||p.email)||"익명",department:p&&p.department||v.department||"",createdAt:Ji(),date:new Date().toISOString().slice(0,10)}),alert("공지사항이 작성되었습니다.")),e("/notice")}catch(P){alert("공지사항 저장 실패: "+P.message)}};return g.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[g.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:g.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:t?"공지사항 수정":"새 공지사항 작성"})}),o&&g.jsx("div",{className:"p-4 rounded-md bg-red-50 border-l-4 border-red-500 text-red-700",children:g.jsx("p",{children:o})}),s&&t?g.jsx("div",{className:"flex justify-center px-4 py-12 sm:px-6",children:g.jsx("div",{className:"w-12 h-12 border-t-2 border-b-2 border-indigo-500 rounded-full animate-spin"})}):g.jsx("form",{onSubmit:T,className:"p-6",children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["제목 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"text",name:"title",id:"title",value:v.title,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"공지사항 제목을 입력하세요"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"부서"}),g.jsxs("select",{id:"department",name:"department",value:v.department,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",children:[g.jsx("option",{value:"",children:"전체"}),g.jsx("option",{value:"경영지원팀",children:"경영지원팀"}),g.jsx("option",{value:"개발팀",children:"개발팀"}),g.jsx("option",{value:"디자인팀",children:"디자인팀"}),g.jsx("option",{value:"마케팅팀",children:"마케팅팀"}),g.jsx("option",{value:"영업팀",children:"영업팀"}),g.jsx("option",{value:"인사팀",children:"인사팀"}),g.jsx("option",{value:"IT인프라팀",children:"IT인프라팀"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:["내용 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("textarea",{id:"content",name:"content",value:v.content,onChange:w,required:!0,rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"공지사항 내용을 입력하세요"})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx(Ne,{to:"/notice",className:"px-4 py-2 text-sm text-gray-500 bg-gray-100 rounded-lg hover:bg-gray-200",children:"목록으로"}),g.jsx("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors focus:ring-4 focus:ring-indigo-100",children:s?"저장 중...":"저장"})]})]})})]})})}const $N=6048e5,t6=864e5,n6=6e4,i6=36e5,r6=1e3,TT=Symbol.for("constructDateFrom");function Bt(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&TT in n?n[TT](e):n instanceof Date?new n.constructor(e):new Date(e)}function wt(n,e){return Bt(e||n,n)}function zv(n,e,t){const i=wt(n,t==null?void 0:t.in);return isNaN(e)?Bt((t==null?void 0:t.in)||n,NaN):(e&&i.setDate(i.getDate()+e),i)}function KN(n,e,t){const i=wt(n,t==null?void 0:t.in);if(isNaN(e))return Bt(n,NaN);if(!e)return i;const s=i.getDate(),o=Bt(n,i.getTime());o.setMonth(i.getMonth()+e+1,0);const c=o.getDate();return s>=c?o:(i.setFullYear(o.getFullYear(),o.getMonth(),s),i)}let s6={};function Eo(){return s6}function ts(n,e){var d,m,p,v;const t=Eo(),i=(e==null?void 0:e.weekStartsOn)??((m=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((v=(p=t.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,s=wt(n,e==null?void 0:e.in),o=s.getDay(),c=(o<i?7:0)+o-i;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function Fl(n,e){return ts(n,{...e,weekStartsOn:1})}function XN(n,e){const t=wt(n,e==null?void 0:e.in),i=t.getFullYear(),s=Bt(t,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const o=Fl(s),c=Bt(t,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const d=Fl(c);return t.getTime()>=o.getTime()?i+1:t.getTime()>=d.getTime()?i:i-1}function Yf(n){const e=wt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Bv(n,...e){const t=Bt.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function Wf(n,e){const t=wt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function a6(n,e,t){const[i,s]=Bv(t==null?void 0:t.in,n,e),o=Wf(i),c=Wf(s),d=+o-Yf(o),m=+c-Yf(c);return Math.round((d-m)/t6)}function o6(n,e){const t=XN(n,e),i=Bt(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Fl(i)}function ST(n,e,t){const[i,s]=Bv(t==null?void 0:t.in,n,e);return+Wf(i)==+Wf(s)}function l6(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function c6(n){return!(!l6(n)&&typeof n!="number"||isNaN(+wt(n)))}function u6(n,e){const t=wt(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function h6(n,e){const t=wt(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function d6(n,e){const t=wt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function f6(n,e){var d,m;const t=Eo(),i=t.weekStartsOn??((m=(d=t.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,s=wt(n,e==null?void 0:e.in),o=s.getDay(),c=(o<i?-7:0)+6-(o-i);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}const m6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},p6=(n,e,t)=>{let i;const s=m6[n];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function ly(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const g6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},y6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},v6={date:ly({formats:g6,defaultWidth:"full"}),time:ly({formats:y6,defaultWidth:"full"}),dateTime:ly({formats:_6,defaultWidth:"full"})},E6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},w6=(n,e,t,i)=>E6[n];function pu(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let s;if(i==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,d=t!=null&&t.width?String(t.width):c;s=n.formattingValues[d]||n.formattingValues[c]}else{const c=n.defaultWidth,d=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[d]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return s[o]}}const b6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},x6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},T6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},S6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},A6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},C6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},N6=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},R6={ordinalNumber:N6,era:pu({values:b6,defaultWidth:"wide"}),quarter:pu({values:x6,defaultWidth:"wide",argumentCallback:n=>n-1}),month:pu({values:T6,defaultWidth:"wide"}),day:pu({values:S6,defaultWidth:"wide"}),dayPeriod:pu({values:A6,defaultWidth:"wide",formattingValues:C6,defaultFormattingWidth:"wide"})};function gu(n){return(e,t={})=>{const i=t.width,s=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],d=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(d)?D6(d,E=>E.test(c)):I6(d,E=>E.test(c));let p;p=n.valueCallback?n.valueCallback(m):m,p=t.valueCallback?t.valueCallback(p):p;const v=e.slice(c.length);return{value:p,rest:v}}}function I6(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function D6(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function O6(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const s=i[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const d=e.slice(s.length);return{value:c,rest:d}}}const k6=/^(\d+)(th|st|nd|rd)?/i,M6=/\d+/i,P6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j6={any:[/^b/i,/^(a|c)/i]},L6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},V6={any:[/1/i,/2/i,/3/i,/4/i]},U6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},F6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},B6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},H6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},G6={ordinalNumber:O6({matchPattern:k6,parsePattern:M6,valueCallback:n=>parseInt(n,10)}),era:gu({matchPatterns:P6,defaultMatchWidth:"wide",parsePatterns:j6,defaultParseWidth:"any"}),quarter:gu({matchPatterns:L6,defaultMatchWidth:"wide",parsePatterns:V6,defaultParseWidth:"any",valueCallback:n=>n+1}),month:gu({matchPatterns:U6,defaultMatchWidth:"wide",parsePatterns:F6,defaultParseWidth:"any"}),day:gu({matchPatterns:q6,defaultMatchWidth:"wide",parsePatterns:z6,defaultParseWidth:"any"}),dayPeriod:gu({matchPatterns:B6,defaultMatchWidth:"any",parsePatterns:H6,defaultParseWidth:"any"})},ZN={code:"en-US",formatDistance:p6,formatLong:v6,formatRelative:w6,localize:R6,match:G6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Y6(n,e){const t=wt(n,e==null?void 0:e.in);return a6(t,d6(t))+1}function JN(n,e){const t=wt(n,e==null?void 0:e.in),i=+Fl(t)-+o6(t);return Math.round(i/$N)+1}function Hv(n,e){var v,E,w,T;const t=wt(n,e==null?void 0:e.in),i=t.getFullYear(),s=Eo(),o=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??s.firstWeekContainsDate??((T=(w=s.locale)==null?void 0:w.options)==null?void 0:T.firstWeekContainsDate)??1,c=Bt((e==null?void 0:e.in)||n,0);c.setFullYear(i+1,0,o),c.setHours(0,0,0,0);const d=ts(c,e),m=Bt((e==null?void 0:e.in)||n,0);m.setFullYear(i,0,o),m.setHours(0,0,0,0);const p=ts(m,e);return+t>=+d?i+1:+t>=+p?i:i-1}function W6(n,e){var d,m,p,v;const t=Eo(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((v=(p=t.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,s=Hv(n,e),o=Bt((e==null?void 0:e.in)||n,0);return o.setFullYear(s,0,i),o.setHours(0,0,0,0),ts(o,e)}function eR(n,e){const t=wt(n,e==null?void 0:e.in),i=+ts(t,e)-+W6(t,e);return Math.round(i/$N)+1}function it(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const Bs={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return it(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):it(t+1,2)},d(n,e){return it(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return it(n.getHours()%12||12,e.length)},H(n,e){return it(n.getHours(),e.length)},m(n,e){return it(n.getMinutes(),e.length)},s(n,e){return it(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),s=Math.trunc(i*Math.pow(10,t-3));return it(s,e.length)}},dl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AT={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),s=i>0?i:1-i;return t.ordinalNumber(s,{unit:"year"})}return Bs.y(n,e)},Y:function(n,e,t,i){const s=Hv(n,i),o=s>0?s:1-s;if(e==="YY"){const c=o%100;return it(c,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):it(o,e.length)},R:function(n,e){const t=XN(n);return it(t,e.length)},u:function(n,e){const t=n.getFullYear();return it(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return it(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return it(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return Bs.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return it(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const s=eR(n,i);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):it(s,e.length)},I:function(n,e,t){const i=JN(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):it(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Bs.d(n,e)},D:function(n,e,t){const i=Y6(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):it(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const s=n.getDay(),o=(s-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return it(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const s=n.getDay(),o=(s-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return it(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),s=i===0?7:i;switch(e){case"i":return String(s);case"ii":return it(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let s;switch(i===12?s=dl.noon:i===0?s=dl.midnight:s=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let s;switch(i>=17?s=dl.evening:i>=12?s=dl.afternoon:i>=4?s=dl.morning:s=dl.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Bs.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Bs.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):it(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):it(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Bs.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Bs.s(n,e)},S:function(n,e){return Bs.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return NT(i);case"XXXX":case"XX":return Za(i);case"XXXXX":case"XXX":default:return Za(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return NT(i);case"xxxx":case"xx":return Za(i);case"xxxxx":case"xxx":default:return Za(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+CT(i,":");case"OOOO":default:return"GMT"+Za(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+CT(i,":");case"zzzz":default:return"GMT"+Za(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return it(i,e.length)},T:function(n,e,t){return it(+n,e.length)}};function CT(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),s=Math.trunc(i/60),o=i%60;return o===0?t+String(s):t+String(s)+e+it(o,2)}function NT(n,e){return n%60===0?(n>0?"-":"+")+it(Math.abs(n)/60,2):Za(n,e)}function Za(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),s=it(Math.trunc(i/60),2),o=it(i%60,2);return t+s+e+o}const RT=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tR=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Q6=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],s=t[2];if(!s)return RT(n,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",RT(i,e)).replace("{{time}}",tR(s,e))},Zy={p:tR,P:Q6},$6=/^D+$/,K6=/^Y+$/,X6=["D","DD","YY","YYYY"];function nR(n){return $6.test(n)}function iR(n){return K6.test(n)}function Jy(n,e,t){const i=Z6(n,e,t);if(console.warn(i),X6.includes(n))throw new RangeError(i)}function Z6(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const J6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,e3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,t3=/^'([^]*?)'?$/,n3=/''/g,i3=/[a-zA-Z]/;function nr(n,e,t){var v,E,w,T;const i=Eo(),s=i.locale??ZN,o=i.firstWeekContainsDate??((E=(v=i.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??1,c=i.weekStartsOn??((T=(w=i.locale)==null?void 0:w.options)==null?void 0:T.weekStartsOn)??0,d=wt(n,t==null?void 0:t.in);if(!c6(d))throw new RangeError("Invalid time value");let m=e.match(e3).map(S=>{const P=S[0];if(P==="p"||P==="P"){const L=Zy[P];return L(S,s.formatLong)}return S}).join("").match(J6).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const P=S[0];if(P==="'")return{isToken:!1,value:r3(S)};if(AT[P])return{isToken:!0,value:S};if(P.match(i3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(m=s.localize.preprocessor(d,m));const p={firstWeekContainsDate:o,weekStartsOn:c,locale:s};return m.map(S=>{if(!S.isToken)return S.value;const P=S.value;(iR(P)||nR(P))&&Jy(P,e,String(n));const L=AT[P[0]];return L(d,P,s.localize,p)}).join("")}function r3(n){const e=n.match(t3);return e?e[1].replace(n3,"'"):n}function s3(){return Object.assign({},Eo())}function a3(n,e){const t=wt(n,e==null?void 0:e.in).getDay();return t===0?7:t}function o3(n,e){const t=l3(e)?new e(0):Bt(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function l3(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const c3=10;class rR{constructor(){de(this,"subPriority",0)}validate(e,t){return!0}}class u3 extends rR{constructor(e,t,i,s,o){super(),this.value=e,this.validateValue=t,this.setValue=i,this.priority=s,o&&(this.subPriority=o)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,i){return this.setValue(e,t,this.value,i)}}class h3 extends rR{constructor(t,i){super();de(this,"priority",c3);de(this,"subPriority",-1);this.context=t||(s=>Bt(i,s))}set(t,i){return i.timestampIsSet?t:Bt(t,o3(t,this.context))}}class Ze{run(e,t,i,s){const o=this.parse(e,t,i,s);return o?{setter:new u3(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,i){return!0}}class d3 extends Ze{constructor(){super(...arguments);de(this,"priority",140);de(this,"incompatibleTokens",["R","u","t","T"])}parse(t,i,s){switch(i){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,i,s){return i.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}const Mt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},er={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Pt(n,e){return n&&{value:e(n.value),rest:n.rest}}function Et(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function tr(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const i=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,c=t[5]?parseInt(t[5],10):0;return{value:i*(s*i6+o*n6+c*r6),rest:e.slice(t[0].length)}}function sR(n){return Et(Mt.anyDigitsSigned,n)}function It(n,e){switch(n){case 1:return Et(Mt.singleDigit,e);case 2:return Et(Mt.twoDigits,e);case 3:return Et(Mt.threeDigits,e);case 4:return Et(Mt.fourDigits,e);default:return Et(new RegExp("^\\d{1,"+n+"}"),e)}}function Qf(n,e){switch(n){case 1:return Et(Mt.singleDigitSigned,e);case 2:return Et(Mt.twoDigitsSigned,e);case 3:return Et(Mt.threeDigitsSigned,e);case 4:return Et(Mt.fourDigitsSigned,e);default:return Et(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Gv(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function aR(n,e){const t=e>0,i=t?e:1-e;let s;if(i<=50)s=n||100;else{const o=i+50,c=Math.trunc(o/100)*100,d=n>=o%100;s=n+c-(d?100:0)}return t?s:1-s}function oR(n){return n%400===0||n%4===0&&n%100!==0}class f3 extends Ze{constructor(){super(...arguments);de(this,"priority",130);de(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,i,s){const o=c=>({year:c,isTwoDigitYear:i==="yy"});switch(i){case"y":return Pt(It(4,t),o);case"yo":return Pt(s.ordinalNumber(t,{unit:"year"}),o);default:return Pt(It(i.length,t),o)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,s){const o=t.getFullYear();if(s.isTwoDigitYear){const d=aR(s.year,o);return t.setFullYear(d,0,1),t.setHours(0,0,0,0),t}const c=!("era"in i)||i.era===1?s.year:1-s.year;return t.setFullYear(c,0,1),t.setHours(0,0,0,0),t}}class m3 extends Ze{constructor(){super(...arguments);de(this,"priority",130);de(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,i,s){const o=c=>({year:c,isTwoDigitYear:i==="YY"});switch(i){case"Y":return Pt(It(4,t),o);case"Yo":return Pt(s.ordinalNumber(t,{unit:"year"}),o);default:return Pt(It(i.length,t),o)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,s,o){const c=Hv(t,o);if(s.isTwoDigitYear){const m=aR(s.year,c);return t.setFullYear(m,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),ts(t,o)}const d=!("era"in i)||i.era===1?s.year:1-s.year;return t.setFullYear(d,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),ts(t,o)}}class p3 extends Ze{constructor(){super(...arguments);de(this,"priority",130);de(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,i){return Qf(i==="R"?4:i.length,t)}set(t,i,s){const o=Bt(t,0);return o.setFullYear(s,0,4),o.setHours(0,0,0,0),Fl(o)}}class g3 extends Ze{constructor(){super(...arguments);de(this,"priority",130);de(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,i){return Qf(i==="u"?4:i.length,t)}set(t,i,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class y3 extends Ze{constructor(){super(...arguments);de(this,"priority",120);de(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"Q":case"QQ":return It(i.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=1&&i<=4}set(t,i,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class _3 extends Ze{constructor(){super(...arguments);de(this,"priority",120);de(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"q":case"qq":return It(i.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=1&&i<=4}set(t,i,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class v3 extends Ze{constructor(){super(...arguments);de(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);de(this,"priority",110)}parse(t,i,s){const o=c=>c-1;switch(i){case"M":return Pt(Et(Mt.month,t),o);case"MM":return Pt(It(2,t),o);case"Mo":return Pt(s.ordinalNumber(t,{unit:"month"}),o);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class E3 extends Ze{constructor(){super(...arguments);de(this,"priority",110);de(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,i,s){const o=c=>c-1;switch(i){case"L":return Pt(Et(Mt.month,t),o);case"LL":return Pt(It(2,t),o);case"Lo":return Pt(s.ordinalNumber(t,{unit:"month"}),o);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}function w3(n,e,t){const i=wt(n,t==null?void 0:t.in),s=eR(i,t)-e;return i.setDate(i.getDate()-s*7),wt(i,t==null?void 0:t.in)}class b3 extends Ze{constructor(){super(...arguments);de(this,"priority",100);de(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,i,s){switch(i){case"w":return Et(Mt.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return It(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,s,o){return ts(w3(t,s,o),o)}}function x3(n,e,t){const i=wt(n,t==null?void 0:t.in),s=JN(i,t)-e;return i.setDate(i.getDate()-s*7),i}class T3 extends Ze{constructor(){super(...arguments);de(this,"priority",100);de(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,i,s){switch(i){case"I":return Et(Mt.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return It(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,s){return Fl(x3(t,s))}}const S3=[31,28,31,30,31,30,31,31,30,31,30,31],A3=[31,29,31,30,31,30,31,31,30,31,30,31];class C3 extends Ze{constructor(){super(...arguments);de(this,"priority",90);de(this,"subPriority",1);de(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"d":return Et(Mt.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return It(i.length,t)}}validate(t,i){const s=t.getFullYear(),o=oR(s),c=t.getMonth();return o?i>=1&&i<=A3[c]:i>=1&&i<=S3[c]}set(t,i,s){return t.setDate(s),t.setHours(0,0,0,0),t}}class N3 extends Ze{constructor(){super(...arguments);de(this,"priority",90);de(this,"subpriority",1);de(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,i,s){switch(i){case"D":case"DD":return Et(Mt.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return It(i.length,t)}}validate(t,i){const s=t.getFullYear();return oR(s)?i>=1&&i<=366:i>=1&&i<=365}set(t,i,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}}function Yv(n,e,t){var E,w,T,S;const i=Eo(),s=(t==null?void 0:t.weekStartsOn)??((w=(E=t==null?void 0:t.locale)==null?void 0:E.options)==null?void 0:w.weekStartsOn)??i.weekStartsOn??((S=(T=i.locale)==null?void 0:T.options)==null?void 0:S.weekStartsOn)??0,o=wt(n,t==null?void 0:t.in),c=o.getDay(),m=(e%7+7)%7,p=7-s,v=e<0||e>6?e-(c+p)%7:(m+p)%7-(c+p)%7;return zv(o,v,t)}class R3 extends Ze{constructor(){super(...arguments);de(this,"priority",90);de(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,i,s){switch(i){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,o){return t=Yv(t,s,o),t.setHours(0,0,0,0),t}}class I3 extends Ze{constructor(){super(...arguments);de(this,"priority",90);de(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,i,s,o){const c=d=>{const m=Math.floor((d-1)/7)*7;return(d+o.weekStartsOn+6)%7+m};switch(i){case"e":case"ee":return Pt(It(i.length,t),c);case"eo":return Pt(s.ordinalNumber(t,{unit:"day"}),c);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,o){return t=Yv(t,s,o),t.setHours(0,0,0,0),t}}class D3 extends Ze{constructor(){super(...arguments);de(this,"priority",90);de(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,i,s,o){const c=d=>{const m=Math.floor((d-1)/7)*7;return(d+o.weekStartsOn+6)%7+m};switch(i){case"c":case"cc":return Pt(It(i.length,t),c);case"co":return Pt(s.ordinalNumber(t,{unit:"day"}),c);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,o){return t=Yv(t,s,o),t.setHours(0,0,0,0),t}}function O3(n,e,t){const i=wt(n,t==null?void 0:t.in),s=a3(i,t),o=e-s;return zv(i,o,t)}class k3 extends Ze{constructor(){super(...arguments);de(this,"priority",90);de(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,i,s){const o=c=>c===0?7:c;switch(i){case"i":case"ii":return It(i.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return Pt(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),o);case"iiiii":return Pt(s.day(t,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Pt(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Pt(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),o)}}validate(t,i){return i>=1&&i<=7}set(t,i,s){return t=O3(t,s),t.setHours(0,0,0,0),t}}class M3 extends Ze{constructor(){super(...arguments);de(this,"priority",80);de(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,i,s){switch(i){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(Gv(s),0,0,0),t}}class P3 extends Ze{constructor(){super(...arguments);de(this,"priority",80);de(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,i,s){switch(i){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(Gv(s),0,0,0),t}}class j3 extends Ze{constructor(){super(...arguments);de(this,"priority",80);de(this,"incompatibleTokens",["a","b","t","T"])}parse(t,i,s){switch(i){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(Gv(s),0,0,0),t}}class L3 extends Ze{constructor(){super(...arguments);de(this,"priority",70);de(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,i,s){switch(i){case"h":return Et(Mt.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return It(i.length,t)}}validate(t,i){return i>=1&&i<=12}set(t,i,s){const o=t.getHours()>=12;return o&&s<12?t.setHours(s+12,0,0,0):!o&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}}class V3 extends Ze{constructor(){super(...arguments);de(this,"priority",70);de(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,i,s){switch(i){case"H":return Et(Mt.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return It(i.length,t)}}validate(t,i){return i>=0&&i<=23}set(t,i,s){return t.setHours(s,0,0,0),t}}class U3 extends Ze{constructor(){super(...arguments);de(this,"priority",70);de(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,i,s){switch(i){case"K":return Et(Mt.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return It(i.length,t)}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}}class F3 extends Ze{constructor(){super(...arguments);de(this,"priority",70);de(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,i,s){switch(i){case"k":return Et(Mt.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return It(i.length,t)}}validate(t,i){return i>=1&&i<=24}set(t,i,s){const o=s<=24?s%24:s;return t.setHours(o,0,0,0),t}}class q3 extends Ze{constructor(){super(...arguments);de(this,"priority",60);de(this,"incompatibleTokens",["t","T"])}parse(t,i,s){switch(i){case"m":return Et(Mt.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return It(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,s){return t.setMinutes(s,0,0),t}}class z3 extends Ze{constructor(){super(...arguments);de(this,"priority",50);de(this,"incompatibleTokens",["t","T"])}parse(t,i,s){switch(i){case"s":return Et(Mt.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return It(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,s){return t.setSeconds(s,0),t}}class B3 extends Ze{constructor(){super(...arguments);de(this,"priority",30);de(this,"incompatibleTokens",["t","T"])}parse(t,i){const s=o=>Math.trunc(o*Math.pow(10,-i.length+3));return Pt(It(i.length,t),s)}set(t,i,s){return t.setMilliseconds(s),t}}class H3 extends Ze{constructor(){super(...arguments);de(this,"priority",10);de(this,"incompatibleTokens",["t","T","x"])}parse(t,i){switch(i){case"X":return tr(er.basicOptionalMinutes,t);case"XX":return tr(er.basic,t);case"XXXX":return tr(er.basicOptionalSeconds,t);case"XXXXX":return tr(er.extendedOptionalSeconds,t);case"XXX":default:return tr(er.extended,t)}}set(t,i,s){return i.timestampIsSet?t:Bt(t,t.getTime()-Yf(t)-s)}}class G3 extends Ze{constructor(){super(...arguments);de(this,"priority",10);de(this,"incompatibleTokens",["t","T","X"])}parse(t,i){switch(i){case"x":return tr(er.basicOptionalMinutes,t);case"xx":return tr(er.basic,t);case"xxxx":return tr(er.basicOptionalSeconds,t);case"xxxxx":return tr(er.extendedOptionalSeconds,t);case"xxx":default:return tr(er.extended,t)}}set(t,i,s){return i.timestampIsSet?t:Bt(t,t.getTime()-Yf(t)-s)}}class Y3 extends Ze{constructor(){super(...arguments);de(this,"priority",40);de(this,"incompatibleTokens","*")}parse(t){return sR(t)}set(t,i,s){return[Bt(t,s*1e3),{timestampIsSet:!0}]}}class W3 extends Ze{constructor(){super(...arguments);de(this,"priority",20);de(this,"incompatibleTokens","*")}parse(t){return sR(t)}set(t,i,s){return[Bt(t,s),{timestampIsSet:!0}]}}const Q3={G:new d3,y:new f3,Y:new m3,R:new p3,u:new g3,Q:new y3,q:new _3,M:new v3,L:new E3,w:new b3,I:new T3,d:new C3,D:new N3,E:new R3,e:new I3,c:new D3,i:new k3,a:new M3,b:new P3,B:new j3,h:new L3,H:new V3,K:new U3,k:new F3,m:new q3,s:new z3,S:new B3,X:new H3,x:new G3,t:new Y3,T:new W3},$3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,K3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,X3=/^'([^]*?)'?$/,Z3=/''/g,J3=/\S/,e5=/[a-zA-Z]/;function t5(n,e,t,i){var L,z,Y,Q;const s=()=>Bt(t,NaN),o=s3(),c=o.locale??ZN,d=o.firstWeekContainsDate??((z=(L=o.locale)==null?void 0:L.options)==null?void 0:z.firstWeekContainsDate)??1,m=o.weekStartsOn??((Q=(Y=o.locale)==null?void 0:Y.options)==null?void 0:Q.weekStartsOn)??0,p={firstWeekContainsDate:d,weekStartsOn:m,locale:c},v=[new h3(i==null?void 0:i.in,t)],E=e.match(K3).map(te=>{const re=te[0];if(re in Zy){const ne=Zy[re];return ne(te,c.formatLong)}return te}).join("").match($3),w=[];for(let te of E){iR(te)&&Jy(te,e,n),nR(te)&&Jy(te,e,n);const re=te[0],ne=Q3[re];if(ne){const{incompatibleTokens:k}=ne;if(Array.isArray(k)){const R=w.find(I=>k.includes(I.token)||I.token===re);if(R)throw new RangeError(`The format string mustn't contain \`${R.fullToken}\` and \`${te}\` at the same time`)}else if(ne.incompatibleTokens==="*"&&w.length>0)throw new RangeError(`The format string mustn't contain \`${te}\` and any other token at the same time`);w.push({token:re,fullToken:te});const C=ne.run(n,te,c.match,p);if(!C)return s();v.push(C.setter),n=C.rest}else{if(re.match(e5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+re+"`");if(te==="''"?te="'":re==="'"&&(te=n5(te)),n.indexOf(te)===0)n=n.slice(te.length);else return s()}}if(n.length>0&&J3.test(n))return s();const T=v.map(te=>te.priority).sort((te,re)=>re-te).filter((te,re,ne)=>ne.indexOf(te)===re).map(te=>v.filter(re=>re.priority===te).sort((re,ne)=>ne.subPriority-re.subPriority)).map(te=>te[0]);let S=wt(t,i==null?void 0:i.in);if(isNaN(+S))return s();const P={};for(const te of T){if(!te.validate(S,p))return s();const re=te.set(S,P,p);Array.isArray(re)?(S=re[0],Object.assign(P,re[1])):S=re}return S}function n5(n){return n.match(X3)[1].replace(Z3,"'")}function i5(n,e,t){const[i,s]=Bv(t==null?void 0:t.in,n,e);return i.getFullYear()===s.getFullYear()&&i.getMonth()===s.getMonth()}function r5(n,e,t){return KN(n,-1,t)}function s5({onCategoryChange:n}){const[e,t]=M.useState([{id:"company",name:"회사 일정",color:"#4F46E5",checked:!0},{id:"dev",name:"개발팀",color:"#059669",checked:!0},{id:"marketing",name:"마케팅팀",color:"#DC2626",checked:!0},{id:"hr",name:"인사팀",color:"#D97706",checked:!0},{id:"personal",name:"내 일정",color:"#7C3AED",checked:!0}]),i=s=>{const o=e.map(c=>c.id===s?{...c,checked:!c.checked}:c);t(o),n&&n(o.filter(c=>c.checked))};return g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 mb-6",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"캘린더"}),g.jsx("div",{className:"space-y-2",children:e.map(s=>g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{id:`category-${s.id}`,type:"checkbox",checked:s.checked,onChange:()=>i(s.id),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),g.jsx("div",{className:"w-4 h-4 rounded-full ml-2",style:{backgroundColor:s.color}}),g.jsx("label",{htmlFor:`category-${s.id}`,className:"ml-2 block text-sm text-gray-700",children:s.name})]},s.id))})]})}function a5(){const[n,e]=M.useState(new Date),[t,i]=M.useState([]),[s,o]=M.useState([]),c=[{id:"company",name:"회사 일정",color:"#4F46E5"},{id:"dev",name:"개발팀",color:"#059669"},{id:"marketing",name:"마케팅팀",color:"#DC2626"},{id:"hr",name:"인사팀",color:"#D97706"},{id:"personal",name:"내 일정",color:"#7C3AED"}];M.useEffect(()=>{(async()=>{try{const P=(await or(Hn(Xe,"events"))).docs.map(L=>{var Q;const z=L.data(),Y=((Q=c.find(te=>te.id===z.category))==null?void 0:Q.color)||"#4F46E5";return{id:L.id,...z,start:z.start&&z.start.seconds?new Date(z.start.seconds*1e3):new Date,end:z.end&&z.end.seconds?new Date(z.end.seconds*1e3):new Date,color:Y}});o(P)}catch(S){alert("일정 불러오기 실패: "+S.message)}})()},[]);const d=T=>{i(T.map(S=>S.id))},m=()=>{e(r5(n))},p=()=>{e(KN(n,1))},v=()=>{e(new Date)},E=["일","월","화","수","목","금","토"],w=()=>{const T=h6(n),S=u6(T),P=ts(T),L=f6(S),z=[];let Y=[],Q=P;for(;Q<=L;){for(let te=0;te<7;te++){const re=s.filter(C=>ST(Q,C.start)&&(t.length===0||t.includes(C.category))),ne=i5(Q,T),k=ST(Q,new Date);Y.push(g.jsxs("div",{className:`min-h-[120px] p-2 border border-gray-200 ${ne?"":"bg-gray-50 text-gray-400"} ${k?"bg-indigo-50":""}`,children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${k?"bg-indigo-600 text-white rounded-full":Q.getDay()===0?"text-red-500":Q.getDay()===6?"text-blue-500":""}`,children:nr(Q,"d")}),g.jsx(Ne,{to:`/calendar/day/${nr(Q,"yyyy-MM-dd")}`,className:"text-xs text-gray-500 hover:text-indigo-600",children:"+"})]}),g.jsx("div",{className:"mt-1 space-y-1 overflow-y-auto max-h-[80px]",children:re.map(C=>g.jsx(Ne,{to:`/calendar/${C.id}`,className:"block",children:g.jsxs("div",{className:"text-xs p-1 rounded truncate",style:{backgroundColor:`${C.color}20`,color:C.color},children:[nr(C.start,"HH:mm")," ",C.title]})},C.id))})]},Q.toString())),Q=zv(Q,1)}z.push(g.jsx("div",{className:"grid grid-cols-7",children:Y},Q.toString())),Y=[]}return z};return M.useEffect(()=>{i(["company","dev","marketing","hr","personal"])},[]),g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"일정 관리"}),g.jsx(Ne,{to:"/calendar/new",className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors focus:ring-4 focus:ring-indigo-100",children:"일정 추가"})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[g.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:g.jsx(s5,{onCategoryChange:d})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[g.jsxs("div",{className:"p-4 flex justify-between items-center bg-gray-50 border-b border-gray-100",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:m,className:"p-2 rounded-full hover:bg-gray-200 transition-colors",children:"<"}),g.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:nr(n,"yyyy년 M월")}),g.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-gray-200 transition-colors",children:">"})]}),g.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"오늘"})]}),g.jsx("div",{className:"grid grid-cols-7 bg-gray-50",children:E.map((T,S)=>g.jsx("div",{className:`py-2 text-center text-sm font-medium ${S===0?"text-red-500":S===6?"text-blue-500":"text-gray-700"}`,children:T},S))}),g.jsx("div",{className:"bg-white",children:w()})]})})]})]})}function o5(){const{id:n}=fo(),e=jn(),[t,i]=M.useState(null),[s,o]=M.useState(!0),[c,d]=M.useState(null);M.useEffect(()=>{o(!0),d(null),(async()=>{try{const T=Zt(Xe,"events",n),S=await rs(T);S.exists()?i({id:S.id,...S.data()}):d("일정을 찾을 수 없습니다.")}catch{d("일정 정보를 불러오는 데 실패했습니다.")}o(!1)})()},[n]);const m=()=>{window.confirm("이 일정을 삭제하시겠습니까?")&&(alert("일정이 삭제되었습니다."),e("/calendar"))},p=w=>({company:"회사 일정",dev:"개발팀",marketing:"마케팅팀",hr:"인사팀",personal:"내 일정"})[w]||w;if(s)return g.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-8"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})});if(c)return g.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"text-center py-12",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"오류가 발생했습니다"}),g.jsx("p",{className:"mt-2 text-gray-600",children:c}),g.jsx(Ne,{to:"/calendar",className:"mt-4 inline-block px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"캘린더로 돌아가기"})]})});if(t){let w=function(T){return T?T instanceof Date?T:T.toDate?T.toDate():new Date(T):null};var v=w(t.start),E=w(t.end)}return g.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:t&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[g.jsxs("div",{className:"p-6",style:{backgroundColor:`${t.color}10`},children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:t.color}}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.title})]}),g.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"w-20 font-medium",children:"일정:"}),g.jsxs("span",{children:[v&&nr(v,"yyyy년 M월 d일 (eee) HH:mm")," -",v&&E&&v.toDateString()===E.toDateString()?nr(E," HH:mm"):E&&nr(E," yyyy년 M월 d일 (eee) HH:mm")]})]}),g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"w-20 font-medium",children:"캘린더:"}),g.jsx("span",{children:p(t.category)})]}),t.location&&g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"w-20 font-medium",children:"장소:"}),g.jsx("span",{children:t.location})]}),t.reminder&&g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"w-20 font-medium",children:"알림:"}),g.jsx("span",{children:t.reminder})]}),t.isRecurring&&g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"w-20 font-medium",children:"반복:"}),g.jsx("span",{children:"매주"})]}),t.isPrivate&&g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"w-20 font-medium",children:"공개 여부:"}),g.jsx("span",{children:"비공개"})]})]})]}),g.jsxs("div",{className:"p-6 border-t border-gray-100",children:[t.description&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"설명"}),g.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.description})]}),t.attendees&&t.attendees.length>0&&g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"참석자"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:t.attendees.map((w,T)=>g.jsx("div",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:w},T))})]})]}),g.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-between items-center",children:[g.jsx(Ne,{to:"/calendar",className:"text-gray-600 hover:text-gray-900",children:"캘린더로 돌아가기"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ne,{to:`/calendar/edit/${t.id}`,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"수정"}),g.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:"삭제"})]})]})]})})}function l5(){const{date:n}=fo(),[e,t]=M.useState([]),[i,s]=M.useState(!0),[o,c]=M.useState(null);M.useEffect(()=>{if(n)try{const m=t5(n,"yyyy-MM-dd",new Date);c(m)}catch(m){console.error("날짜 파싱 오류:",m),c(new Date)}else c(new Date)},[n]),M.useEffect(()=>{if(!o)return;s(!0),(async()=>{try{const E=(await or(Hn(Xe,"events"))).docs.map(w=>{const T=w.data();return{id:w.id,...T,start:T.start&&T.start.seconds?new Date(T.start.seconds*1e3):new Date,end:T.end&&T.end.seconds?new Date(T.end.seconds*1e3):new Date}}).filter(w=>w.start.getFullYear()===o.getFullYear()&&w.start.getMonth()===o.getMonth()&&w.start.getDate()===o.getDate());E.sort((w,T)=>w.start-T.start),t(E),s(!1)}catch(p){s(!1),alert("일정 불러오기 실패: "+p.message)}})()},[o]);const d=m=>({company:"회사 일정",dev:"개발팀",marketing:"마케팅팀",hr:"인사팀",personal:"내 일정"})[m]||m;return g.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"일정 목록"}),o&&g.jsx("p",{className:"text-gray-600 mt-1",children:nr(o,"yyyy년 M월 d일 (eee)")})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ne,{to:"/calendar",className:"px-4 py-2 bg-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-300 transition-colors",children:"캘린더로 돌아가기"}),g.jsx(Ne,{to:`/calendar/new?date=${n}`,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors focus:ring-4 focus:ring-indigo-100",children:"일정 추가"})]})]}),g.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:i?g.jsx("div",{className:"p-6",children:g.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map((m,p)=>g.jsxs("div",{className:"flex gap-4",children:[g.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},p))})}):e.length===0?g.jsxs("div",{className:"p-12 text-center",children:[g.jsx("p",{className:"text-gray-500 mb-4",children:"이 날짜에 예정된 일정이 없습니다."}),g.jsx(Ne,{to:`/calendar/new?date=${n}`,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 inline-block",children:"일정 추가하기"})]}):g.jsx("div",{className:"divide-y divide-gray-100",children:e.map(m=>g.jsx(Ne,{to:`/calendar/${m.id}`,className:"block hover:bg-gray-50 transition-colors",children:g.jsxs("div",{className:"p-6 flex gap-4",children:[g.jsxs("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg flex flex-col items-center justify-center",style:{backgroundColor:`${m.color}10`,color:m.color},children:[g.jsx("span",{className:"text-sm font-medium",children:nr(m.start,"HH:mm")}),g.jsx("span",{className:"text-xs",children:nr(m.end,"HH:mm")})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"font-medium text-gray-900",children:m.title}),g.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[g.jsx("span",{className:"text-xs text-gray-500",children:d(m.category)}),m.location&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-gray-300",children:"•"}),g.jsx("span",{className:"text-xs text-gray-500",children:m.location})]})]})]})]})},m.id))})})]})}function IT(){const n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}function DT(){var m;const n=jn(),[e,t]=M.useState({title:"",description:"",location:"",startDate:IT(),startTime:"09:00",endDate:IT(),endTime:"10:00",category:"personal",isPrivate:!1,isAllDay:!1,isRecurring:!1,recurrenceType:"weekly",attendees:"",reminderTime:"30",reminderType:"popup"}),[i,s]=M.useState(!1),o=p=>{const{name:v,value:E,type:w,checked:T}=p.target;t({...e,[v]:w==="checkbox"?T:E})},c=async p=>{p.preventDefault(),s(!0);try{const v=new Date(`${e.startDate}T${e.startTime}`),E=new Date(`${e.endDate}T${e.endTime}`);await Tm(Hn(Xe,"events"),{title:e.title,description:e.description,location:e.location,start:v,end:E,category:e.category,isPrivate:e.isPrivate,isAllDay:e.isAllDay,isRecurring:e.isRecurring,recurrenceType:e.recurrenceType,attendees:e.attendees,reminderTime:e.reminderTime,reminderType:e.reminderType,createdAt:Ji()}),alert("일정이 성공적으로 저장되었습니다."),n("/calendar")}catch(v){alert("일정 저장 실패: "+v.message)}s(!1)},d=[{id:"company",name:"회사 일정",color:"#4F46E5"},{id:"dev",name:"개발팀",color:"#059669"},{id:"marketing",name:"마케팅팀",color:"#DC2626"},{id:"hr",name:"인사팀",color:"#D97706"},{id:"personal",name:"내 일정",color:"#7C3AED"}];return g.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[g.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:g.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"새 일정 등록"})}),g.jsxs("form",{onSubmit:c,className:"p-6",children:[g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["제목 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"text",id:"title",name:"title",value:e.title,onChange:o,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"일정 제목"})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:["캘린더 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("select",{id:"category",name:"category",value:e.category,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 appearance-none",children:d.map(p=>g.jsx("option",{value:p.id,children:p.name},p.id))}),g.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:g.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:(m=d.find(p=>p.id===e.category))==null?void 0:m.color}})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:["시작 날짜 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"date",id:"startDate",name:"startDate",value:e.startDate,onChange:o,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"startTime",className:"block text-sm font-medium text-gray-700 mb-2",children:["시작 시간 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"time",id:"startTime",name:"startTime",value:e.startTime,onChange:o,required:!0,disabled:e.isAllDay,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:["종료 날짜 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"date",id:"endDate",name:"endDate",value:e.endDate,onChange:o,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"endTime",className:"block text-sm font-medium text-gray-700 mb-2",children:["종료 시간 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"time",id:"endTime",name:"endTime",value:e.endTime,onChange:o,required:!0,disabled:e.isAllDay,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"isAllDay",name:"isAllDay",checked:e.isAllDay,onChange:o,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),g.jsx("label",{htmlFor:"isAllDay",className:"ml-2 block text-sm text-gray-700",children:"종일 일정"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"장소"}),g.jsx("input",{type:"text",id:"location",name:"location",value:e.location,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"회의실, 화상회의 등"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"설명"}),g.jsx("textarea",{id:"description",name:"description",value:e.description,onChange:o,rows:"4",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"일정에 대한 설명"})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center mb-2",children:[g.jsx("input",{type:"checkbox",id:"isRecurring",name:"isRecurring",checked:e.isRecurring,onChange:o,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),g.jsx("label",{htmlFor:"isRecurring",className:"ml-2 block text-sm text-gray-700",children:"반복 일정"})]}),e.isRecurring&&g.jsx("div",{className:"mt-2 pl-6",children:g.jsxs("select",{id:"recurrenceType",name:"recurrenceType",value:e.recurrenceType,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",children:[g.jsx("option",{value:"daily",children:"매일"}),g.jsx("option",{value:"weekly",children:"매주"}),g.jsx("option",{value:"monthly",children:"매월"}),g.jsx("option",{value:"yearly",children:"매년"})]})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"attendees",className:"block text-sm font-medium text-gray-700 mb-2",children:"참석자"}),g.jsx("input",{type:"text",id:"attendees",name:"attendees",value:e.attendees,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"참석자 이메일 (쉼표로 구분)"}),g.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"참석자 이메일을 쉼표(,)로 구분하여 입력하세요."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"알림"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("select",{id:"reminderTime",name:"reminderTime",value:e.reminderTime,onChange:o,className:"w-1/2 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",children:[g.jsx("option",{value:"0",children:"정각"}),g.jsx("option",{value:"5",children:"5분 전"}),g.jsx("option",{value:"10",children:"10분 전"}),g.jsx("option",{value:"15",children:"15분 전"}),g.jsx("option",{value:"30",children:"30분 전"}),g.jsx("option",{value:"60",children:"1시간 전"}),g.jsx("option",{value:"120",children:"2시간 전"}),g.jsx("option",{value:"1440",children:"1일 전"})]}),g.jsxs("select",{id:"reminderType",name:"reminderType",value:e.reminderType,onChange:o,className:"w-1/2 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",children:[g.jsx("option",{value:"popup",children:"팝업"}),g.jsx("option",{value:"email",children:"이메일"})]})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"isPrivate",name:"isPrivate",checked:e.isPrivate,onChange:o,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),g.jsx("label",{htmlFor:"isPrivate",className:"ml-2 block text-sm text-gray-700",children:"비공개 일정"})]})]}),g.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[g.jsx(Ne,{to:"/calendar",className:"px-5 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"취소"}),g.jsx("button",{type:"submit",disabled:i,className:`px-5 py-2.5 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors ${i?"opacity-70 cursor-not-allowed":""}`,children:i?g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"저장 중..."]}):"저장"})]})]})]})})}function c5(){var T,S;const[n,e]=M.useState(""),[t,i]=M.useState(""),[s,o]=M.useState(""),[c,d]=M.useState(!1),{login:m}=bi(),p=jn(),E=((S=(T=cr().state)==null?void 0:T.from)==null?void 0:S.pathname)||"/",w=async P=>{if(P.preventDefault(),!n||!t){o("이메일과 비밀번호를 모두 입력해주세요.");return}try{o(""),d(!0),await m(n,t),p(E,{replace:!0})}catch{o("로그인에 실패했습니다. 이메일과 비밀번호를 확인해주세요.")}finally{d(!1)}};return g.jsx("div",{className:"flex items-center justify-center min-h-screen px-4 py-12 bg-gray-50 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"w-full max-w-md space-y-8",children:[g.jsx("div",{children:g.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-center text-gray-900",children:"그룹웨어 로그인"})}),s&&g.jsx("div",{className:"p-4 rounded-md bg-red-50",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("svg",{className:"w-5 h-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),g.jsx("div",{className:"ml-3",children:g.jsx("h3",{className:"text-sm font-medium text-red-800",children:s})})]})}),g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[g.jsxs("div",{className:"-space-y-px rounded-md shadow-sm",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"이메일 주소"}),g.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"이메일 주소",value:n,onChange:P=>e(P.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"sr-only",children:"비밀번호"}),g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"비밀번호",value:t,onChange:P=>i(P.target.value)})]})]}),g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),g.jsx("label",{htmlFor:"remember-me",className:"block ml-2 text-sm text-gray-900",children:"로그인 상태 유지"})]})}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:c,className:"relative flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md group hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:c?"로그인 중...":"로그인"})})]})]})})}const eh={_origin:"https://api.emailjs.com"},u5=(n,e="https://api.emailjs.com")=>{eh._userID=n,eh._origin=e},lR=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class OT{constructor(e){this.status=e.status,this.text=e.responseText}}const cR=(n,e,t={})=>new Promise((i,s)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:c})=>{const d=new OT(c);d.status===200||d.text==="OK"?i(d):s(d)}),o.addEventListener("error",({target:c})=>{s(new OT(c))}),o.open("POST",eh._origin+n,!0),Object.keys(t).forEach(c=>{o.setRequestHeader(c,t[c])}),o.send(e)}),h5=(n,e,t,i)=>{const s=i||eh._userID;return lR(s,n,e),cR("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},d5=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},f5=(n,e,t,i)=>{const s=i||eh._userID,o=d5(t);lR(s,n,e);const c=new FormData(o);return c.append("lib_version","3.2.0"),c.append("service_id",n),c.append("template_id",e),c.append("user_id",s),cR("/api/v1.0/email/send-form",c)},m5={init:u5,send:h5,sendForm:f5};function p5(){const[n,e]=M.useState({email:"",password:"",passwordConfirm:"",displayName:"",department:"",position:"",phone:""}),[t,i]=M.useState(""),[s,o]=M.useState(!1),[c,d]=M.useState(!1),{register:m}=bi(),p=jn(),[v]=fD(),[E,w]=M.useState(null),[T,S]=M.useState(null);M.useEffect(()=>{new URLSearchParams(window.location.search).get("token")||p("/login")},[p]),M.useEffect(()=>{const z=v.get("token");if(!z){w(!1);return}(async()=>{const Q=io(Hn(Xe,"invites"),Yu("token","==",z),Yu("used","==",!1)),te=await or(Q);te.empty?w(!1):(w(!0),S(te.docs[0].id))})()},[v]),M.useEffect(()=>{const z=v.get("email");z&&e(Y=>({...Y,email:z}))},[v]);const P=z=>{const{name:Y,value:Q}=z.target;e(te=>({...te,[Y]:Q}))},L=async z=>{if(z.preventDefault(),!n.email||!n.password||!n.displayName||!n.department||!n.position||!n.phone){i("모든 필수 항목을 입력해주세요.");return}if(n.password!==n.passwordConfirm){i("비밀번호가 일치하지 않습니다.");return}if(!/^(?=.*[a-zA-Z]).{6,}$/.test(n.password)){i("비밀번호는 영문 포함 6자 이상이어야 합니다.");return}i(""),o(!0);try{await m(n.email,n.password,n.displayName,n.department,n.position,n.phone),T&&await mh(Zt(Xe,"invites",T),{used:!0}),d(!0),setTimeout(()=>{p("/login")},3e3)}catch(Y){i(Y.message||"회원가입 중 오류가 발생했습니다.")}finally{o(!1)}};return c?g.jsx("div",{className:"flex items-center justify-center min-h-screen px-4 py-12 bg-gray-50 sm:px-6 lg:px-8",children:g.jsx("div",{className:"w-full max-w-md p-10 space-y-8 bg-white shadow-md rounded-xl",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"회원가입 완료!"}),g.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"회원가입이 성공적으로 완료되었습니다. 잠시 후 로그인 페이지로 이동합니다."}),g.jsx("div",{className:"mt-5",children:g.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full",children:g.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})})]})})}):E===null?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"초대 링크 확인 중..."}):E===!1?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsxs("div",{className:"p-8 bg-white rounded shadow text-center",children:[g.jsx("h2",{className:"text-xl font-bold mb-2",children:"유효하지 않은 초대 링크입니다."}),g.jsx("p",{className:"text-gray-500",children:"이미 사용된 초대이거나, 잘못된 링크입니다."}),g.jsx(Ne,{to:"/login",className:"mt-4 inline-block text-indigo-600 hover:underline",children:"로그인"})]})}):g.jsx("div",{className:"flex items-center justify-center min-h-screen px-4 py-12 bg-gray-50 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"w-full max-w-md space-y-8",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-center text-gray-900",children:"그룹웨어 회원가입"}),g.jsxs("p",{className:"mt-2 text-sm text-center text-gray-600",children:["이미 계정이 있으신가요?"," ",g.jsx(Ne,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"로그인"})]})]}),t&&g.jsx("div",{className:"p-4 rounded-md bg-red-50",children:g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("svg",{className:"w-5 h-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),g.jsx("div",{className:"ml-3",children:g.jsx("h3",{className:"text-sm font-medium text-red-800",children:t})})]})}),g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:L,children:[g.jsxs("div",{className:"-space-y-px rounded-md shadow-sm",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"sr-only",children:"이메일 주소"}),g.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"이메일 주소",value:n.email,onChange:P,readOnly:!!v.get("email")})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"이름"}),g.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"이름 (실명)",value:n.displayName,onChange:P})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"sr-only",children:"비밀번호"}),g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"비밀번호 (6자 이상)",value:n.password,onChange:P})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"passwordConfirm",className:"sr-only",children:"비밀번호 확인"}),g.jsx("input",{id:"passwordConfirm",name:"passwordConfirm",type:"password",autoComplete:"new-password",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"비밀번호 확인",value:n.passwordConfirm,onChange:P})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"department",className:"sr-only",children:"부서"}),g.jsxs("select",{id:"department",name:"department",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",value:n.department,onChange:P,children:[g.jsx("option",{value:"",disabled:!0,children:"부서 선택"}),g.jsx("option",{value:"개발팀",children:"개발팀"}),g.jsx("option",{value:"마케팅팀",children:"마케팅팀"}),g.jsx("option",{value:"인사팀",children:"인사팀"}),g.jsx("option",{value:"관리팀",children:"관리팀"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"position",className:"sr-only",children:"직책"}),g.jsx("input",{id:"position",name:"position",type:"text",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"직책",value:n.position,onChange:P})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"phone",className:"sr-only",children:"전화번호"}),g.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,className:"relative block w-full px-3 py-2 text-gray-900 placeholder-gray-500 border border-gray-300 rounded-none appearance-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"전화번호",value:n.phone,onChange:P})]})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:s,className:"relative flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md group hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:s?"처리 중...":"회원가입"})})]})]})})}function g5(){const{currentUser:n,logout:e}=bi(),t=jn(),i=async()=>{try{await e(),t("/login")}catch(s){console.error("로그아웃 오류:",s)}};return g.jsx("nav",{className:"text-white bg-indigo-600 shadow-lg",children:g.jsx("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between h-16",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(Ne,{to:"/",className:"flex items-center flex-shrink-0",children:g.jsx("span",{className:"text-xl font-bold",children:"작당모의"})}),g.jsxs("div",{className:"flex items-center ml-10 space-x-4",children:[g.jsx(Ne,{to:"/",className:"px-3 py-2 text-sm font-medium rounded-md hover:bg-indigo-500",children:"홈"}),g.jsx(Ne,{to:"/notice",className:"px-3 py-2 text-sm font-medium rounded-md hover:bg-indigo-500",children:"공지사항"}),g.jsx(Ne,{to:"/tasks",className:"px-3 py-2 text-sm font-medium rounded-md hover:bg-indigo-500",children:"작업관리"}),g.jsx(Ne,{to:"/calendar",className:"px-3 py-2 text-sm font-medium rounded-md hover:bg-indigo-500",children:"일정관리"})]})]}),g.jsx("div",{className:"flex items-center",children:n&&g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("span",{className:"text-sm",children:n.displayName||n.email}),g.jsx("button",{onClick:i,className:"px-3 py-2 text-sm font-medium bg-indigo-700 rounded-md hover:bg-indigo-800",children:"로그아웃"})]})})]})})})}function y5(){const{currentUser:n}=bi(),e=QN(t=>t.setCurrentUser);return M.useEffect(()=>{e(n)},[n,e]),g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx(g5,{}),g.jsx("main",{className:"flex-grow",children:g.jsx(HT,{})})]})}function _5(){const{currentUser:n,loading:e}=bi();return e?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):n?g.jsx(HT,{}):g.jsx(BT,{to:"/login",replace:!0})}function v5(){return g.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-gray-50 to-gray-100",children:g.jsxs("div",{className:"w-full max-w-lg overflow-hidden bg-white shadow-lg rounded-2xl",children:[g.jsxs("div",{className:"p-6 bg-gradient-to-r from-indigo-600 to-purple-600",children:[g.jsx("h1",{className:"text-3xl font-bold text-white",children:"404"}),g.jsx("p",{className:"mt-1 text-indigo-100",children:"페이지를 찾을 수 없습니다"})]}),g.jsxs("div",{className:"p-8",children:[g.jsx("div",{className:"flex justify-center mb-6",children:g.jsx("div",{className:"flex items-center justify-center w-32 h-32 rounded-full bg-indigo-50",children:g.jsx("svg",{className:"w-20 h-20 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),g.jsxs("div",{className:"mb-8 text-center",children:[g.jsx("h2",{className:"mb-2 text-2xl font-bold text-gray-800",children:"요청하신 페이지를 찾을 수 없습니다"}),g.jsxs("p",{className:"text-gray-600",children:["페이지가 삭제되었거나 주소가 변경되었을 수 있습니다.",g.jsx("br",{}),"URL을 확인하고 다시 시도해 주세요."]})]}),g.jsxs("div",{className:"flex flex-col space-y-3",children:[g.jsx(Ne,{to:"/",className:"flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"홈페이지로 이동"}),g.jsx("button",{onClick:()=>window.history.back(),className:"flex justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"이전 페이지로 돌아가기"})]})]}),g.jsx("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"도움이 필요하신가요?"}),g.jsx(Ne,{to:"/help",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"고객센터 문의 →"})]})})]})})}function kT(){const n=jn(),{currentUser:e}=bi(),{id:t}=fo(),i=!!t,[s,o]=M.useState(""),[c,d]=M.useState("진행중"),[m,p]=M.useState(""),[v,E]=M.useState(""),[w,T]=M.useState(""),[S,P]=M.useState(!1),[L,z]=M.useState(null),[Y,Q]=M.useState(i);M.useEffect(()=>{i?(async()=>{Q(!0);try{const ne=Zt(Xe,"tasks",t),k=await rs(ne);if(k.exists()){const C=k.data();o(C.title||""),d(C.status||"진행중"),p(C.description||""),E(C.department||""),T(C.authorName||"")}else z("작업을 찾을 수 없습니다.")}catch{z("작업 정보를 불러오는 데 실패했습니다.")}Q(!1)})():(E((e==null?void 0:e.department)||""),T((e==null?void 0:e.displayName)||""))},[i,t,e]);const te=async re=>{re.preventDefault(),P(!0),z(null);try{if(i){const ne=Zt(Xe,"tasks",t);await mh(ne,{title:s,status:c,description:m}),alert("작업이 수정되었습니다.")}else await Tm(Hn(Xe,"tasks"),{title:s,department:v,authorName:w,assignedTo:(e==null?void 0:e.uid)||"",status:c,description:m,createdAt:Ji(),viewCount:0}),alert("작업이 추가되었습니다.");n("/tasks")}catch(ne){z("저장 실패: "+ne.message)}P(!1)};return Y?g.jsx("div",{className:"max-w-xl mx-auto px-4 py-8",children:"로딩 중..."}):g.jsxs("div",{className:"max-w-xl mx-auto px-4 py-8",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:i?"작업 수정":"작업 추가"}),g.jsxs("form",{onSubmit:te,className:"space-y-4",children:[L&&g.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:g.jsx("p",{children:L})}),g.jsxs("div",{children:[g.jsx("label",{className:"block mb-1 font-medium",children:"제목"}),g.jsx("input",{type:"text",value:s,onChange:re=>o(re.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block mb-1 font-medium",children:"상태"}),g.jsxs("select",{value:c,onChange:re=>d(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",children:[g.jsx("option",{value:"예정",children:"예정"}),g.jsx("option",{value:"진행중",children:"진행중"}),g.jsx("option",{value:"완료",children:"완료"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block mb-1 font-medium",children:"설명"}),g.jsx("textarea",{value:m,onChange:re=>p(re.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block mb-1 font-medium",children:"부서"}),g.jsx("input",{type:"text",value:v,disabled:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-500"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block mb-1 font-medium",children:"작성자"}),g.jsx("input",{type:"text",value:w,disabled:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-500"})]}),g.jsx("button",{type:"submit",disabled:S,className:"w-full py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors focus:ring-4 focus:ring-indigo-100",children:S?"저장 중...":"저장"}),g.jsx("div",{className:"flex justify-end",children:g.jsx(Ne,{to:"/tasks",className:"text-sm text-gray-500 hover:underline",children:"작업 목록으로 돌아가기"})})]})]})}function E5(){const{id:n}=fo(),e=jn(),[t,i]=M.useState(null),[s,o]=M.useState(!0),[c,d]=M.useState(null);M.useEffect(()=>{(async()=>{o(!0),d(null);try{const v=Zt(Xe,"tasks",n),E=await rs(v);E.exists()?i({id:E.id,...E.data()}):d("작업을 찾을 수 없습니다.")}catch{d("작업을 불러오는 데 실패했습니다.")}o(!1)})()},[n]);const m=async()=>{if(window.confirm("이 작업을 삭제하시겠습니까?"))try{await AC(Zt(Xe,"tasks",n)),alert("작업이 삭제되었습니다."),e("/tasks")}catch(p){alert("삭제 실패: "+p.message)}};return s?g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-8"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):c?g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"text-center py-12",children:[g.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"오류가 발생했습니다"}),g.jsx("p",{className:"mt-2 text-gray-600",children:c}),g.jsx(Ne,{to:"/tasks",className:"mt-4 inline-block px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"작업 목록으로"})]})}):g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:t&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("div",{className:"flex items-center gap-2 mb-4",children:g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.title})}),g.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-6 pb-6 border-b border-gray-100",children:[g.jsx("span",{children:t.department}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:t.authorName}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:t.status}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:t.createdAt&&t.createdAt.toDate?t.createdAt.toDate().toLocaleDateString():""})]}),g.jsx("div",{className:"prose max-w-none mb-6",children:g.jsx("p",{className:"whitespace-pre-line text-gray-800",children:t.description})})]}),g.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-between items-center",children:[g.jsx(Ne,{to:"/tasks",className:"text-gray-600 hover:text-gray-900",children:"목록으로"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ne,{to:`/tasks/${t.id}/edit`,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"수정"}),g.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:"삭제"})]})]})]})})}function w5(){const[n,e]=M.useState([]),[t,i]=M.useState(!0),[s,o]=M.useState(""),[c,d]=M.useState("latest"),[m,p]=M.useState(1),[v,E]=M.useState("전체"),w=5,T=1,S=jn();M.useEffect(()=>{i(!0),(async()=>{try{const k=io(Hn(Xe,"tasks"),Nu("createdAt","desc")),R=(await or(k)).docs.map(I=>({id:I.id,...I.data()}));e(R),i(!1)}catch(k){alert("작업 불러오기 실패: "+k.message),i(!1)}})()},[]);const Y=[...(ne=>{switch(v){case"내 작업":return ne.filter(k=>k.my);case"완료한 작업":return ne.filter(k=>k.status==="완료");case"진행중인 작업":return ne.filter(k=>k.status==="진행중");default:return ne}})(n).filter(ne=>ne.title&&ne.title.toLowerCase().includes(s.toLowerCase())||ne.author&&ne.author.toLowerCase().includes(s.toLowerCase()))].sort((ne,k)=>c==="latest"?new Date(k.createdAt)-new Date(ne.createdAt):c==="oldest"?new Date(ne.createdAt)-new Date(k.createdAt):c==="views"?(k.viewCount||0)-(ne.viewCount||0):0).slice((m-1)*w,m*w),Q=ne=>{ne.preventDefault(),p(1)},te=ne=>{d(ne.target.value),p(1)},re=["전체","내 작업","완료한 작업","진행중인 작업"];return g.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"작업관리"}),g.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors focus:ring-4 focus:ring-indigo-100",onClick:()=>S("/tasks/new"),children:"작업 추가"})]}),g.jsx("div",{className:"mb-6 flex space-x-2",children:re.map(ne=>g.jsx("button",{onClick:()=>{E(ne),p(1)},className:`px-4 py-2 rounded-lg text-sm font-medium border transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-100 ${v===ne?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300 hover:bg-indigo-50"}`,children:ne},ne))}),g.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[g.jsx("form",{onSubmit:Q,className:"flex-1",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:s,onChange:ne=>o(ne.target.value),placeholder:"제목 또는 작성자로 검색",className:"w-full pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),g.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-indigo-600",children:"🔍"})]})}),g.jsx("div",{className:"w-full sm:w-48",children:g.jsxs("select",{value:c,onChange:te,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300",children:[g.jsx("option",{value:"latest",children:"최신순"}),g.jsx("option",{value:"oldest",children:"오래된순"}),g.jsx("option",{value:"views",children:"조회수순"})]})})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[g.jsx("div",{className:"divide-y divide-gray-100",children:t?Array(3).fill(0).map((ne,k)=>g.jsx("div",{className:"px-6 py-4",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})},k)):Y.length===0?g.jsx("div",{className:"px-6 py-12 text-center",children:g.jsx("p",{className:"text-gray-500",children:"작업이 없습니다."})}):Y.map(ne=>g.jsx(Ne,{to:`/tasks/${ne.id}`,className:"block hover:bg-gray-50 transition-colors",children:g.jsxs("div",{className:"px-6 py-4",children:[g.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:ne.title}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[g.jsx("span",{children:ne.department}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:ne.author}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:ne.createdAt&&ne.createdAt.seconds?new Date(ne.createdAt.seconds*1e3).toLocaleDateString():typeof ne.createdAt=="string"?ne.createdAt:""}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsxs("span",{children:["조회 ",ne.viewCount||0]}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx("span",{children:ne.status})]})]})},ne.id))}),!t&&Y.length>0&&g.jsx("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-center",children:g.jsxs("nav",{className:"flex items-center space-x-2",children:[g.jsx("button",{onClick:()=>p(ne=>Math.max(ne-1,1)),disabled:m===1,className:`px-3 py-1 rounded-md ${m===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:"이전"}),[...Array(T)].map((ne,k)=>g.jsx("button",{onClick:()=>p(k+1),className:`px-3 py-1 rounded-md ${m===k+1?"bg-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:k+1},k+1)),g.jsx("button",{onClick:()=>p(ne=>Math.min(ne+1,T)),disabled:m===T,className:`px-3 py-1 rounded-md ${m===T?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:"다음"})]})})]})]})}const Xd={"회사 일정":"#4F46E5",개발팀:"#059669",마케팅팀:"#DC2626",인사팀:"#D97706","내 일정":"#7C3AED"};function b5(){const{currentUser:n}=bi(),e=jn(),[t,i]=M.useState([]),[s,o]=M.useState({}),[c,d]=M.useState(!0);if(M.useEffect(()=>{(async()=>{d(!0);try{const S=(await or(Hn(Xe,"users"))).docs.map(L=>({id:L.id,...L.data()}));i(S);const P={};for(const L of S){const z=io(Hn(Xe,"tasks"),Yu("assignedTo","==",L.id),Yu("status","==","진행중")),Y=await or(z);P[L.id]=Y.docs.map(Q=>({id:Q.id,...Q.data()}))}o(P)}catch(T){alert("유저/작업 정보 불러오기 실패: "+T.message)}d(!1)})()},[]),c)return g.jsx("div",{className:"p-8 text-center",children:"불러오는 중..."});const m=t.find(w=>w.id===(n==null?void 0:n.uid)),p=t.filter(w=>w.id!==(n==null?void 0:n.uid)),v={};p.forEach(w=>{const T=w.department||"기타";v[T]||(v[T]=[]),v[T].push(w)});const E=(w,T=!1,S=void 0)=>g.jsxs("div",{className:"rounded-2xl shadow p-6 flex flex-col gap-2 relative bg-white",style:S?{borderLeft:`8px solid ${S}`}:{},children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",style:{backgroundColor:S||"#E0E7FF",color:S?"#fff":"#4F46E5"},children:(w.name||w.displayName||"-").charAt(0)}),g.jsxs("div",{children:[g.jsx("div",{className:"text-base font-semibold text-gray-900",children:w.name||w.displayName||"-"}),g.jsx("div",{className:"text-xs text-gray-500",children:w.email||"-"})]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600",children:[g.jsxs("span",{children:["부서: ",w.department||"-"]}),g.jsxs("span",{children:["직책: ",w.position||"-"]}),g.jsxs("span",{children:["전화: ",w.phone||"-"]})]}),g.jsxs("div",{className:"mt-2",children:[g.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"진행중인 작업"}),s[w.id]&&s[w.id].length>0?g.jsx("ul",{className:"list-disc list-inside text-xs text-gray-700",children:s[w.id].map(P=>g.jsx("li",{children:P.title},P.id))}):g.jsx("span",{className:"text-gray-400 text-xs",children:"없음"})]}),T?g.jsx("div",{className:"mt-4",children:g.jsx("button",{className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 transition-colors",onClick:()=>e("/profile"),children:"내 정보 수정"})}):g.jsx("div",{className:"mt-4",children:g.jsx("button",{className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 transition-colors",onClick:()=>e(`/messages/${w.id}`),children:"메시지"})})]},w.id);return g.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[g.jsx("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-2xl shadow-lg mb-8",children:g.jsx("h1",{className:"text-xl font-bold text-white",children:"주소록"})}),m&&g.jsx("div",{className:"mb-8",children:E(m,!0,Xd[m.department]||"#4F46E5")}),Object.entries(v).map(([w,T])=>g.jsxs("div",{className:"mb-8",children:[g.jsxs("div",{className:"flex items-center mb-3",children:[g.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:Xd[w]||"#A3A3A3"}}),g.jsx("span",{className:"font-semibold",style:{color:Xd[w]||"#A3A3A3"},children:w})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(S=>E(S,!1,Xd[w]||"#A3A3A3"))})]},w))]})}const x5="service_groupware",T5="template_lcnqdjh",S5="0sEbFtOIMZG19DW4H";function A5(n=32){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let i=0;i<n;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function C5(){const[n,e]=M.useState(""),[t,i]=M.useState(!1),[s,o]=M.useState(""),c=async d=>{d.preventDefault(),i(!0),o("");try{const m=A5();await Tm(Hn(Xe,"invites"),{email:n,token:m,used:!1,createdAt:Ji()});const p=`${window.location.origin}/signup?token=${m}&email=${n}`;await m5.send(x5,T5,{to_email:n,invite_link:p},S5),o("초대장이 이메일로 발송되었습니다!"),e("")}catch(m){o("초대 생성/발송 실패: "+m.message)}i(!1)};return g.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded shadow",children:[g.jsx("h2",{className:"text-lg font-bold mb-4",children:"회원 초대"}),g.jsxs("form",{onSubmit:c,className:"flex flex-col gap-2",children:[g.jsx("input",{type:"email",placeholder:"초대할 이메일 입력",value:n,onChange:d=>e(d.target.value),required:!0,className:"border px-3 py-2 rounded"}),g.jsx("button",{type:"submit",disabled:t,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50",children:t?"초대 생성 중...":"초대장 생성"})]}),s&&g.jsx("div",{className:"mt-4 text-sm break-all",children:s})]})}function N5(){const{currentUser:n}=bi();return!n||!n.isAdmin?g.jsx(BT,{to:"/",replace:!0}):g.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:g.jsxs("div",{className:"w-full max-w-lg p-8 bg-white rounded shadow",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"관리자 페이지"}),g.jsx(C5,{})]})})}function R5(){const{currentUser:n}=bi(),[e,t]=M.useState(""),[i,s]=M.useState(""),[o,c]=M.useState(!1),[d,m]=M.useState(!1),[p,v]=M.useState("");function E(T){const S=T.replace(/[^0-9]/g,"");return S.length<4?S:S.length<8?S.replace(/(\d{3})(\d{1,4})/,"$1-$2"):S.replace(/(\d{3})(\d{4})(\d{1,4})/,"$1-$2-$3")}M.useEffect(()=>{n&&(t(E(n.phone||"")),s(n.photoURL||""))},[n]);const w=async T=>{T.preventDefault(),c(!0),v(""),m(!1);try{await mh(Zt(Xe,"users",n.uid),{phone:e,photoURL:i}),await PS(n,{photoURL:i}),m(!0)}catch(S){v("저장 실패: "+S.message)}c(!1)};return n?g.jsx("div",{className:"max-w-lg mx-auto px-4 py-10",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow p-8",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6 text-indigo-700",children:"내 프로필"}),g.jsxs("form",{onSubmit:w,className:"flex flex-col gap-6",children:[g.jsxs("div",{className:"flex flex-col items-center gap-2",children:[g.jsx("img",{src:i||"/public/vite.svg",alt:"프로필",className:"w-24 h-24 rounded-full object-cover border mb-2"}),g.jsx("input",{type:"text",className:"border rounded px-3 py-1 w-full text-sm",placeholder:"프로필 사진 URL",value:i,onChange:T=>s(T.target.value)}),g.jsx("span",{className:"text-xs text-gray-400",children:"이미지 URL을 입력하세요. (파일 업로드는 추후 지원)"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"이름"}),g.jsx("input",{type:"text",className:"border rounded px-3 py-2 w-full bg-gray-100 text-gray-500",value:n.displayName||n.name||"",disabled:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"이메일"}),g.jsx("input",{type:"email",className:"border rounded px-3 py-2 w-full bg-gray-100 text-gray-500",value:n.email,disabled:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"전화번호"}),g.jsx("input",{type:"text",className:"border rounded px-3 py-2 w-full",value:e,onChange:T=>t(E(T.target.value)),placeholder:"전화번호 입력",maxLength:13})]}),p&&g.jsx("div",{className:"text-red-500 text-sm",children:p}),d&&g.jsx("div",{className:"text-green-600 text-sm",children:"저장되었습니다!"}),g.jsx("button",{type:"submit",className:"w-full py-2 bg-indigo-600 text-white rounded font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-60",disabled:o,children:o?"저장 중...":"저장하기"})]})]})}):g.jsx("div",{className:"p-8 text-center",children:"로그인이 필요합니다."})}function I5(n,e){return[n,e].sort().join("_")}function D5(){const{userId:n}=fo(),{currentUser:e}=bi(),[t,i]=M.useState(""),[s,o]=M.useState([]),[c,d]=M.useState(""),[m,p]=M.useState(null),v=M.useRef(null),E=qv();M.useEffect(()=>{if(!e||!n)return;const T=I5(e.uid,n);i(T);const S=Ja(E,`channels/${T}`);LU(S).then(P=>{P.exists()?vT(S,{[`members/${e.uid}`]:!0,[`members/${n}`]:!0}):GN(S,{members:{[e.uid]:!0,[n]:!0},createdAt:Date.now()})})},[e,n]),M.useEffect(()=>{n&&rs(Zt(Xe,"users",n)).then(T=>{T.exists()&&p({id:n,...T.data()})})},[n]),M.useEffect(()=>{if(!t)return;const T=Ja(E,`channels/${t}/messages`);o([]);const S=VU(T,P=>{o(L=>[...L,{id:P.key,...P.val()}]),setTimeout(()=>{var L;return(L=v.current)==null?void 0:L.scrollIntoView({behavior:"smooth"})},100)});return()=>S()},[t]),M.useEffect(()=>{if(!t||!e)return;const T=Ja(E,`channels/${t}/messages`);Fv(T,S=>{const P=S.val()||{};Object.entries(P).forEach(([L,z])=>{z.sender!==e.uid&&!z.seen&&vT(Ja(E,`channels/${t}/messages/${L}`),{seen:!0})})})},[t,e]);const w=async T=>{if(T.preventDefault(),!c.trim()||!e||!t)return;const S=Ja(E,`channels/${t}/messages`);await jU(S,{text:c,sender:e.uid,createdAt:Date.now(),seen:!1}),d("")};return e?g.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 flex flex-col h-[70vh]",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("img",{src:(m==null?void 0:m.photoURL)||"/public/vite.svg",alt:"상대 프로필",className:"w-10 h-10 rounded-full object-cover border"}),g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold",children:(m==null?void 0:m.name)||(m==null?void 0:m.displayName)||"상대방"}),g.jsx("div",{className:"text-xs text-gray-500",children:m==null?void 0:m.email})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded p-3 mb-4",children:[s.map(T=>{const S=T.sender===e.uid,P=T.createdAt?new Date(T.createdAt).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):"",L=S&&T.seen;return g.jsx("div",{className:`mb-2 flex ${S?"justify-end":"justify-start"}`,children:g.jsxs("div",{className:"flex flex-col items-end max-w-xs",children:[g.jsx("div",{className:`px-3 py-2 rounded-xl break-words text-sm shadow ${S?"bg-indigo-500 text-white self-end":"bg-white border text-gray-800 self-start"}`,children:T.text}),g.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-400",children:[g.jsx("span",{children:P}),L&&g.jsx("span",{className:"ml-1 text-blue-500",children:"읽음"})]})]})},T.id)}),g.jsx("div",{ref:v})]}),g.jsxs("form",{onSubmit:w,className:"flex gap-2",children:[g.jsx("input",{type:"text",className:"flex-1 border rounded px-3 py-2 text-sm",placeholder:"메시지 입력...",value:c,onChange:T=>d(T.target.value),autoFocus:!0}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded font-semibold hover:bg-indigo-700 transition-colors",disabled:!c.trim(),children:"전송"})]})]})}):g.jsx("div",{className:"p-8 text-center",children:"로그인이 필요합니다."})}function O5(){const{currentUser:n}=bi(),[e,t]=M.useState([]),[i,s]=M.useState(!0),o=jn(),c=qv();return M.useEffect(()=>{if(!n)return;const d=Ja(c,"channels"),m=Fv(d,async p=>{const v=p.val()||{},E=Object.entries(v).filter(([,T])=>T.members&&T.members[n.uid]).map(([T,S])=>({id:T,...S})),w=await Promise.all(E.map(async T=>{const S=Object.keys(T.members).find(Y=>Y!==n.uid);let P=null;if(S){const Y=await rs(Zt(Xe,"users",S));Y.exists()&&(P={id:S,...Y.data()})}let L=null,z=0;if(T.messages){const Y=Object.entries(T.messages).map(([Q,te])=>({id:Q,...te}));Y.sort((Q,te)=>(te.createdAt||0)-(Q.createdAt||0)),L=Y[0],z=Y.filter(Q=>Q.sender!==n.uid&&!Q.seen).length}return{id:T.id,otherUser:P,lastMsg:L,unreadCount:z,updatedAt:L!=null&&L.createdAt?new Date(L.createdAt):T.createdAt?new Date(T.createdAt):null}}));w.sort((T,S)=>(S.updatedAt||0)-(T.updatedAt||0)),t(w),s(!1)});return()=>m()},[n]),n?i?g.jsx("div",{className:"p-8 text-center",children:"불러오는 중..."}):g.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[g.jsx("h1",{className:"text-xl font-bold mb-6 text-indigo-700",children:"메시지 채널"}),e.length===0?g.jsx("div",{className:"text-gray-400 text-center py-12",children:"채널이 없습니다."}):g.jsx("ul",{className:"divide-y",children:e.map(d=>{var m,p,v,E;return g.jsxs("li",{className:"py-4 flex items-center gap-4 cursor-pointer hover:bg-gray-50 rounded-lg px-2 transition",onClick:()=>d.otherUser&&o(`/messages/${d.otherUser.id}`),children:[g.jsx("img",{src:((m=d.otherUser)==null?void 0:m.photoURL)||"/public/vite.svg",alt:"상대 프로필",className:"w-12 h-12 rounded-full object-cover border"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"font-semibold truncate flex items-center gap-2",children:[((p=d.otherUser)==null?void 0:p.name)||((v=d.otherUser)==null?void 0:v.displayName)||"상대방",d.unreadCount>0&&g.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full bg-red-500 ml-1"})]}),g.jsx("div",{className:"text-xs text-gray-500 truncate",children:((E=d.lastMsg)==null?void 0:E.text)||"대화를 시작해보세요!"})]}),g.jsx("div",{className:"text-xs text-gray-400 ml-2",children:d.updatedAt?d.updatedAt.toLocaleString("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""})]},d.id)})})]})}):g.jsx("div",{className:"p-8 text-center",children:"로그인이 필요합니다."})}function k5(){return g.jsx(IL,{children:g.jsxs(VI,{children:[g.jsx(mt,{path:"/login",element:g.jsx(c5,{})}),g.jsx(mt,{path:"/signup",element:g.jsx(p5,{})}),g.jsx(mt,{element:g.jsx(_5,{}),children:g.jsxs(mt,{element:g.jsx(y5,{}),children:[g.jsx(mt,{path:"/",element:g.jsx(QU,{})}),g.jsx(mt,{path:"/notice",element:g.jsx($U,{})}),g.jsx(mt,{path:"/notice/:id",element:g.jsx(KU,{})}),g.jsx(mt,{path:"/notice/:id/edit",element:g.jsx(xT,{})}),g.jsx(mt,{path:"/notice/new",element:g.jsx(xT,{})}),g.jsx(mt,{path:"/calendar",element:g.jsx(a5,{})}),g.jsx(mt,{path:"/calendar/:id",element:g.jsx(o5,{})}),g.jsx(mt,{path:"/calendar/day/:date",element:g.jsx(l5,{})}),g.jsx(mt,{path:"/calendar/new",element:g.jsx(DT,{})}),g.jsx(mt,{path:"/calendar/edit/:id",element:g.jsx(DT,{})}),g.jsx(mt,{path:"/tasks",element:g.jsx(w5,{})}),g.jsx(mt,{path:"/tasks/new",element:g.jsx(kT,{})}),g.jsx(mt,{path:"/tasks/:id",element:g.jsx(E5,{})}),g.jsx(mt,{path:"/tasks/:id/edit",element:g.jsx(kT,{})}),g.jsx(mt,{path:"/contacts",element:g.jsx(b5,{})}),g.jsx(mt,{path:"/profile",element:g.jsx(R5,{})}),g.jsx(mt,{path:"/messages",element:g.jsx(O5,{})}),g.jsx(mt,{path:"/messages/:userId",element:g.jsx(D5,{})}),g.jsx(mt,{path:"/admin",element:g.jsx(N5,{})})]})}),g.jsx(mt,{path:"*",element:g.jsx(v5,{})})]})})}Y1.createRoot(document.getElementById("root")).render(g.jsx(M.StrictMode,{children:g.jsx(lD,{children:g.jsx(k5,{})})}));
